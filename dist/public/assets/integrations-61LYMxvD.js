import{g as N,h as v,j as a,i as d,k as _,l as b,m,n as I,o as g,p as E,q as k,r as p,s as f,t as u,u as h}from"./radix-D6tAntsm.js";import{r as s}from"./vendor-B5oVexe1.js";import{c as i}from"./index-TF11M3hR.js";import{d as y,r as R,s as C}from"./icons-8ZevHjIu.js";const J=N,K=v,T=s.forwardRef(({className:r,children:e,...t},o)=>a.jsxs(d,{ref:o,className:i("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...t,children:[e,a.jsx(_,{asChild:!0,children:a.jsx(y,{className:"h-4 w-4 opacity-50"})})]}));T.displayName=d.displayName;const w=s.forwardRef(({className:r,...e},t)=>a.jsx(p,{ref:t,className:i("flex cursor-default items-center justify-center py-1",r),...e,children:a.jsx(C,{className:"h-4 w-4"})}));w.displayName=p.displayName;const x=s.forwardRef(({className:r,...e},t)=>a.jsx(f,{ref:t,className:i("flex cursor-default items-center justify-center py-1",r),...e,children:a.jsx(y,{className:"h-4 w-4"})}));x.displayName=f.displayName;const B=s.forwardRef(({className:r,children:e,position:t="popper",...o},n)=>a.jsx(b,{children:a.jsxs(m,{ref:n,className:i("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:t,...o,children:[a.jsx(w,{}),a.jsx(I,{className:i("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(x,{})]})}));B.displayName=m.displayName;const F=s.forwardRef(({className:r,...e},t)=>a.jsx(u,{ref:t,className:i("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...e}));F.displayName=u.displayName;const P=s.forwardRef(({className:r,children:e,...t},o)=>a.jsxs(g,{ref:o,className:i("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(E,{children:a.jsx(R,{className:"h-4 w-4"})})}),a.jsx(k,{children:e})]}));P.displayName=g.displayName;const D=s.forwardRef(({className:r,...e},t)=>a.jsx(h,{ref:t,className:i("-mx-1 my-1 h-px bg-muted",r),...e}));D.displayName=h.displayName;const M={async getIntegrations(r){try{const e=await fetch(`/api/integrations?user_id=${r}`);if(!e.ok)throw new Error("Failed to fetch integrations");return await e.json()}catch(e){return console.error("Error fetching integrations:",e),[]}},async createIntegration(r){try{const e=await fetch("/api/integrations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok){const t=await e.json();throw new Error(t.error||"Failed to create integration")}return await e.json()}catch(e){throw console.error("Error creating integration:",e),e}},async updateIntegration(r,e,t){try{const o=await fetch("/api/integrations",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r,user_id:e,...t})});if(!o.ok){const n=await o.json();throw new Error(n.error||"Failed to update integration")}return await o.json()}catch(o){throw console.error("Error updating integration:",o),o}},async deleteIntegration(r,e){try{if(!(await fetch(`/api/integrations?id=${r}&user_id=${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete integration");return!0}catch(t){return console.error("Error deleting integration:",t),!1}},async migrateFromLocalStorage(r){try{if(localStorage.getItem("integrations_migrated_v2")==="true")return;const t=localStorage.getItem("chatgpt_api_key"),o=localStorage.getItem("chatgpt_model"),n=localStorage.getItem("claude_api_key"),j=localStorage.getItem("claude_model"),c=localStorage.getItem("gemini_api_key"),S=localStorage.getItem("gemini_model"),L=JSON.parse(localStorage.getItem("verified_integrations")||"[]"),l=[];t&&l.push(this.createIntegration({user_id:r,type:"AI",provider:"openai",api_key:t,config:{model:o||"o4-mini"},is_active:!0})),n&&l.push(this.createIntegration({user_id:r,type:"AI",provider:"claude",api_key:n,config:{model:j||"claude-3-5-sonnet-20241022"},is_active:!0})),c&&l.push(this.createIntegration({user_id:r,type:"AI",provider:"gemini",api_key:c,config:{model:S||"gemini-1.5-pro"},is_active:!0})),await Promise.all(l),localStorage.setItem("integrations_migrated_v2","true")}catch(e){console.error("Error migrating integrations:",e)}},async getIntegrationByProvider(r,e){try{return(await this.getIntegrations(r)).find(o=>o.provider===e&&o.is_active)||null}catch(t){return console.error("Error getting integration by provider:",t),null}}};export{J as S,T as a,K as b,B as c,P as d,M as i};
