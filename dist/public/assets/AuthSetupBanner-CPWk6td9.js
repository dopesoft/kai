import{j as e,E as S,G as W,H as Z,J as T,K as ee,M as ae,N as te,Q as se,U as z,W as R,X as D,Y as A,Z as _,_ as I,$ as M,a0 as E,a1 as U}from"./radix-D6tAntsm.js";import{B as i,c as n,u as re,b as oe}from"./index-TF11M3hR.js";import{u as L,r as l}from"./vendor-B5oVexe1.js";import{q as ne,x as le,y as de,r as ie,z as ce,X as me,D as xe,w as j,F as he,G as ge,H as ue,B as pe,S as fe,j as be,u as ve,I as Ne,J as we}from"./icons-8ZevHjIu.js";import{i as C,a as ye}from"./utils-CElquc7p.js";function Pe({onToggleSidebar:t,isSidebarOpen:a,onNewChat:s}){const[,r]=L(),c=()=>{s?s():r("/")};return e.jsxs("header",{className:"fixed top-0 left-0 right-0 z-40 flex items-center justify-between px-4 py-3 bg-white dark:bg-black",children:[e.jsx("div",{className:"flex items-center gap-3"}),e.jsxs("div",{className:"flex items-center gap-4 md:gap-2",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:c,className:"p-3 md:p-2 text-gray-600 hover:text-gray-900 dark:text-white dark:hover:text-white",children:e.jsx(ne,{className:"w-7 h-7 md:w-5 md:h-5 font-bold stroke-[2.5]"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:t,className:"p-3 md:p-2 md:hidden text-gray-600 hover:text-gray-900 dark:text-white dark:hover:text-white",children:e.jsx(le,{className:"w-7 h-7 md:w-5 md:h-5 font-bold stroke-[2.5]"})})]})]})}const P=l.forwardRef(({className:t,children:a,...s},r)=>e.jsxs(S,{ref:r,className:n("relative overflow-hidden",t),...s,children:[e.jsx(W,{className:"h-full w-full rounded-[inherit]",children:a}),e.jsx(B,{}),e.jsx(Z,{})]}));P.displayName=S.displayName;const B=l.forwardRef(({className:t,orientation:a="vertical",...s},r)=>e.jsx(T,{ref:r,orientation:a,className:n("flex touch-none select-none transition-colors",a==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",a==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...s,children:e.jsx(ee,{className:"relative flex-1 rounded-full bg-border"})}));B.displayName=T.displayName;const p=ae,f=te,ke=l.forwardRef(({className:t,inset:a,children:s,...r},c)=>e.jsxs(D,{ref:c,className:n("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",t),...r,children:[s,e.jsx(de,{className:"ml-auto"})]}));ke.displayName=D.displayName;const je=l.forwardRef(({className:t,...a},s)=>e.jsx(A,{ref:s,className:n("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...a}));je.displayName=A.displayName;const u=l.forwardRef(({className:t,sideOffset:a=4,...s},r)=>e.jsx(se,{children:e.jsx(z,{ref:r,sideOffset:a,className:n("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...s})}));u.displayName=z.displayName;const g=l.forwardRef(({className:t,inset:a,...s},r)=>e.jsx(R,{ref:r,className:n("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",t),...s}));g.displayName=R.displayName;const Ce=l.forwardRef(({className:t,children:a,checked:s,...r},c)=>e.jsxs(_,{ref:c,className:n("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:s,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(I,{children:e.jsx(ie,{className:"h-4 w-4"})})}),a]}));Ce.displayName=_.displayName;const Se=l.forwardRef(({className:t,children:a,...s},r)=>e.jsxs(M,{ref:r,className:n("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(I,{children:e.jsx(ce,{className:"h-2 w-2 fill-current"})})}),a]}));Se.displayName=M.displayName;const Te=l.forwardRef(({className:t,inset:a,...s},r)=>e.jsx(E,{ref:r,className:n("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",t),...s}));Te.displayName=E.displayName;const ze=l.forwardRef(({className:t,...a},s)=>e.jsx(U,{ref:s,className:n("-mx-1 my-1 h-px bg-muted",t),...a}));ze.displayName=U.displayName;function Be({isOpen:t,onClose:a,onThreadSelect:s,onNewChat:r,activeThreadId:c,onThreadDelete:b,threads:v}){const[_e,x]=L(),{theme:Y,toggleTheme:F}=re(),{user:G,profile:d,authEnabled:V,signOut:$}=oe(),J=async()=>{try{localStorage.removeItem("activeThreadId"),localStorage.removeItem("forceNewThread"),await $(),x("/auth")}catch(o){console.error("Error during logout:",o)}},X=()=>d!=null&&d.full_name?d.full_name.split(" ")[0]:null,q=()=>{var y,k;if(!(d!=null&&d.full_name))return"U";const o=d.full_name.split(" "),m=((y=o[0])==null?void 0:y[0])||"",h=((k=o[1])==null?void 0:k[0])||"";return(m+h).toUpperCase()||"U"},N=(v||[]).filter(o=>{const m=new Date(o.updated_at);return C(m)}),K=(v||[]).filter(o=>{const m=new Date(o.updated_at);return!C(m)}),Q=o=>{b&&b(o)},w=o=>{const m=o.thread_id===c;return e.jsxs("div",{className:`w-full text-left px-3 py-2 text-sm rounded-lg transition-colors relative group ${m?"bg-gray-200 dark:bg-gray-700 text-black dark:text-white":"text-black dark:text-white hover:bg-gray-100 dark:hover:bg-[#435058]"}`,children:[e.jsx("button",{onClick:()=>s(o.thread_id),className:"w-full text-left truncate font-normal pr-8",children:o.title}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs(p,{children:[e.jsx(f,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-gray-300 dark:hover:bg-[#435058]",onClick:h=>h.stopPropagation(),children:e.jsx(be,{className:"h-3 w-3"})})}),e.jsx(u,{align:"end",className:"w-40",children:e.jsxs(g,{onClick:h=>{h.stopPropagation(),Q(o.thread_id)},className:"text-red-600 dark:text-red-400 focus:text-red-600 dark:focus:text-red-400",children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),"Delete"]})})]})})]},o.id)};return e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"fixed inset-0 backdrop-blur-md z-40 md:hidden",onClick:a}),e.jsx("aside",{className:`
        fixed top-0 left-0 h-full w-[296px] z-50 transform transition-transform duration-200 ease-in-out
        ${t?"translate-x-0":"-translate-x-full"}
        md:relative md:translate-x-0 md:ml-10
        text-[#666666] dark:text-white px-3 py-[0.5rem] flex items-center
        bg-transparent
      `,children:e.jsx("div",{className:"bg-[#f9f9f9] dark:bg-black rounded-xl h-[calc(80vh+16px)] w-full shadow-sm border border-gray-300 dark:border-gray-600",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 pb-9",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 flex-1",children:[e.jsx("span",{className:"text-lg font-medium text-black dark:text-white",children:"kai"}),e.jsx("span",{className:"text-xs bg-black dark:bg-white text-white dark:text-black px-1.5 py-0.5 rounded",children:"1k"})]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:a,className:"md:hidden p-1 text-[#666666] hover:text-black dark:text-white dark:hover:text-white hover:bg-gray-200 dark:hover:bg-gray-800",children:e.jsx(me,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"px-3 pb-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[#666666] dark:text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search",className:"w-full h-8 pl-9 pr-3 text-sm bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-black dark:text-white placeholder-[#666666] dark:placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-300 dark:focus:ring-gray-600 focus:border-gray-300 dark:focus:border-gray-600 transition-colors"})]})}),e.jsx(P,{className:"flex-1 px-3",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"pt-6",children:[e.jsx("h3",{className:"text-xs font-bold text-[#666666] dark:text-white mb-2 px-2",children:"CHATS"}),e.jsx("div",{className:"space-y-1",children:K.map(w)})]}),N.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-[#666666] dark:text-white mb-2 px-2",children:"YESTERDAY"}),e.jsx("div",{className:"space-y-1",children:N.map(w)})]})]})}),e.jsx("div",{className:"p-3 border-t border-gray-300 dark:border-gray-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[V&&G?e.jsxs(p,{children:[e.jsx(f,{asChild:!0,children:e.jsxs("button",{className:"flex items-center gap-3 hover:bg-gray-200 dark:hover:bg-gray-800 rounded p-1 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-black dark:bg-white rounded-full flex items-center justify-center text-white dark:text-black text-sm font-medium",children:q()}),e.jsx("span",{className:"text-sm text-[#666666] dark:text-white",children:X()||"User"})]})}),e.jsxs(u,{align:"start",className:"bg-white dark:bg-black border-gray-200 dark:border-gray-700 mb-2",children:[e.jsxs(g,{onClick:()=>x("/settings"),className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer",children:[e.jsx(j,{className:"w-4 h-4"}),"Profile Settings"]}),e.jsxs(g,{onClick:J,className:"flex items-center gap-2 text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer",children:[e.jsx(he,{className:"w-4 h-4"}),"Sign Out"]})]})]}):e.jsxs(p,{children:[e.jsx(f,{asChild:!0,children:e.jsxs("button",{className:"flex items-center gap-3 hover:bg-gray-200 dark:hover:bg-gray-800 rounded p-1 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-black dark:bg-white rounded-full flex items-center justify-center text-white dark:text-black text-sm font-medium",children:"U"}),e.jsx("span",{className:"text-sm text-[#666666] dark:text-white",children:"User"})]})}),e.jsx(u,{align:"start",className:"bg-white dark:bg-black border-gray-200 dark:border-gray-700 mb-2",children:e.jsxs(g,{onClick:()=>x("/settings"),className:"flex items-center gap-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer",children:[e.jsx(j,{className:"w-4 h-4"}),"Settings"]})})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:F,className:"p-2 text-[#666666] hover:text-black dark:text-white dark:hover:text-white hover:bg-gray-200 dark:hover:bg-gray-800",children:Y==="light"?e.jsx(ge,{className:"w-4 h-4"}):e.jsx(ue,{className:"w-4 h-4"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>x("/memory"),className:"p-2 text-[#666666] hover:text-black dark:text-white dark:hover:text-white hover:bg-gray-200 dark:hover:bg-gray-800",children:e.jsx(pe,{className:"w-4 h-4"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>x("/settings"),className:"p-2 text-[#666666] hover:text-black dark:text-white dark:hover:text-white hover:bg-gray-200 dark:hover:bg-gray-800",children:e.jsx(fe,{className:"w-4 h-4"})})]})]})})]})})})]})}const Re=l.forwardRef(({className:t,...a},s)=>e.jsx("textarea",{className:n("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...a}));Re.displayName="Textarea";const De=ye("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),H=l.forwardRef(({className:t,variant:a,...s},r)=>e.jsx("div",{ref:r,role:"alert",className:n(De({variant:a}),t),...s}));H.displayName="Alert";const Ae=l.forwardRef(({className:t,...a},s)=>e.jsx("h5",{ref:s,className:n("mb-1 font-medium leading-none tracking-tight",t),...a}));Ae.displayName="AlertTitle";const O=l.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:n("text-sm [&_p]:leading-relaxed",t),...a}));O.displayName="AlertDescription";function He(){return e.jsxs(H,{className:"border-amber-200 bg-amber-50 dark:bg-amber-950 dark:border-amber-800",children:[e.jsx(Ne,{className:"h-4 w-4 text-amber-600 dark:text-amber-400"}),e.jsxs(O,{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"text-amber-800 dark:text-amber-200",children:[e.jsx("strong",{children:"Authentication not configured:"})," To enable user accounts and profiles, please set up Supabase by following the setup guide."]}),e.jsxs(i,{variant:"outline",size:"sm",className:"ml-4 border-amber-300 text-amber-700 hover:bg-amber-100 dark:border-amber-700 dark:text-amber-300 dark:hover:bg-amber-900",onClick:()=>window.open("/AUTHENTICATION_SETUP.md","_blank"),children:[e.jsx(we,{className:"w-3 h-3 mr-1"}),"Setup Guide"]})]})]})}export{He as A,p as D,Pe as H,Be as S,Re as T,f as a,u as b,g as c};
