import{j as e}from"./radix-D6tAntsm.js";import{r as c}from"./vendor-B5oVexe1.js";import{u as Re,b as $e,c as Z}from"./query-4uz7M6Xs.js";import{T as Ae,A as De,S as Ee,H as Fe}from"./AuthSetupBanner-CPWk6td9.js";import{u as Oe,a as le,B as M,c as C,b as He,S as Be}from"./index-TF11M3hR.js";import{M as Pe,h as qe}from"./markdown-BBjlYdCw.js";import{B as Ve,f as ae,g as We,h as Ke,i as Ze,j as Je,k as Le,P as ie,M as ce,l as de}from"./icons-8ZevHjIu.js";import{S as Ue,a as Qe,b as Ye,c as Ge,d as Xe,i as eo}from"./integrations-61LYMxvD.js";import{m as oo}from"./motion-C1uzXyO4.js";import{n as ne}from"./utils-CElquc7p.js";import"./charts-BZMYq3Wc.js";const to={'code[class*="language-"]':{background:"hsl(220, 13%, 18%)",color:"hsl(220, 14%, 71%)",textShadow:"0 1px rgba(0, 0, 0, 0.3)",fontFamily:'"Fira Code", "Fira Mono", Menlo, Consolas, "DejaVu Sans Mono", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"2",OTabSize:"2",tabSize:"2",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{background:"hsl(220, 13%, 18%)",color:"hsl(220, 14%, 71%)",textShadow:"0 1px rgba(0, 0, 0, 0.3)",fontFamily:'"Fira Code", "Fira Mono", Menlo, Consolas, "DejaVu Sans Mono", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"2",OTabSize:"2",tabSize:"2",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:"0.5em 0",overflow:"auto",borderRadius:"0.3em"},'code[class*="language-"]::-moz-selection':{background:"hsl(220, 13%, 28%)",color:"inherit",textShadow:"none"},'code[class*="language-"] *::-moz-selection':{background:"hsl(220, 13%, 28%)",color:"inherit",textShadow:"none"},'pre[class*="language-"] *::-moz-selection':{background:"hsl(220, 13%, 28%)",color:"inherit",textShadow:"none"},'code[class*="language-"]::selection':{background:"hsl(220, 13%, 28%)",color:"inherit",textShadow:"none"},'code[class*="language-"] *::selection':{background:"hsl(220, 13%, 28%)",color:"inherit",textShadow:"none"},'pre[class*="language-"] *::selection':{background:"hsl(220, 13%, 28%)",color:"inherit",textShadow:"none"},':not(pre) > code[class*="language-"]':{padding:"0.2em 0.3em",borderRadius:"0.3em",whiteSpace:"normal"},comment:{color:"hsl(220, 10%, 40%)",fontStyle:"italic"},prolog:{color:"hsl(220, 10%, 40%)"},cdata:{color:"hsl(220, 10%, 40%)"},doctype:{color:"hsl(220, 14%, 71%)"},punctuation:{color:"hsl(220, 14%, 71%)"},entity:{color:"hsl(220, 14%, 71%)",cursor:"help"},"attr-name":{color:"hsl(29, 54%, 61%)"},"class-name":{color:"hsl(29, 54%, 61%)"},boolean:{color:"hsl(29, 54%, 61%)"},constant:{color:"hsl(29, 54%, 61%)"},number:{color:"hsl(29, 54%, 61%)"},atrule:{color:"hsl(29, 54%, 61%)"},keyword:{color:"hsl(286, 60%, 67%)"},property:{color:"hsl(355, 65%, 65%)"},tag:{color:"hsl(355, 65%, 65%)"},symbol:{color:"hsl(355, 65%, 65%)"},deleted:{color:"hsl(355, 65%, 65%)"},important:{color:"hsl(355, 65%, 65%)"},selector:{color:"hsl(95, 38%, 62%)"},string:{color:"hsl(95, 38%, 62%)"},char:{color:"hsl(95, 38%, 62%)"},builtin:{color:"hsl(95, 38%, 62%)"},inserted:{color:"hsl(95, 38%, 62%)"},regex:{color:"hsl(95, 38%, 62%)"},"attr-value":{color:"hsl(95, 38%, 62%)"},"attr-value > .token.punctuation":{color:"hsl(95, 38%, 62%)"},variable:{color:"hsl(207, 82%, 66%)"},operator:{color:"hsl(207, 82%, 66%)"},function:{color:"hsl(207, 82%, 66%)"},url:{color:"hsl(187, 47%, 55%)"},"attr-value > .token.punctuation.attr-equals":{color:"hsl(220, 14%, 71%)"},"special-attr > .token.attr-value > .token.value.css":{color:"hsl(220, 14%, 71%)"},".language-css .token.selector":{color:"hsl(355, 65%, 65%)"},".language-css .token.property":{color:"hsl(220, 14%, 71%)"},".language-css .token.function":{color:"hsl(187, 47%, 55%)"},".language-css .token.url > .token.function":{color:"hsl(187, 47%, 55%)"},".language-css .token.url > .token.string.url":{color:"hsl(95, 38%, 62%)"},".language-css .token.important":{color:"hsl(286, 60%, 67%)"},".language-css .token.atrule .token.rule":{color:"hsl(286, 60%, 67%)"},".language-javascript .token.operator":{color:"hsl(286, 60%, 67%)"},".language-javascript .token.template-string > .token.interpolation > .token.interpolation-punctuation.punctuation":{color:"hsl(5, 48%, 51%)"},".language-json .token.operator":{color:"hsl(220, 14%, 71%)"},".language-json .token.null.keyword":{color:"hsl(29, 54%, 61%)"},".language-markdown .token.url":{color:"hsl(220, 14%, 71%)"},".language-markdown .token.url > .token.operator":{color:"hsl(220, 14%, 71%)"},".language-markdown .token.url-reference.url > .token.string":{color:"hsl(220, 14%, 71%)"},".language-markdown .token.url > .token.content":{color:"hsl(207, 82%, 66%)"},".language-markdown .token.url > .token.url":{color:"hsl(187, 47%, 55%)"},".language-markdown .token.url-reference.url":{color:"hsl(187, 47%, 55%)"},".language-markdown .token.blockquote.punctuation":{color:"hsl(220, 10%, 40%)",fontStyle:"italic"},".language-markdown .token.hr.punctuation":{color:"hsl(220, 10%, 40%)",fontStyle:"italic"},".language-markdown .token.code-snippet":{color:"hsl(95, 38%, 62%)"},".language-markdown .token.bold .token.content":{color:"hsl(29, 54%, 61%)"},".language-markdown .token.italic .token.content":{color:"hsl(286, 60%, 67%)"},".language-markdown .token.strike .token.content":{color:"hsl(355, 65%, 65%)"},".language-markdown .token.strike .token.punctuation":{color:"hsl(355, 65%, 65%)"},".language-markdown .token.list.punctuation":{color:"hsl(355, 65%, 65%)"},".language-markdown .token.title.important > .token.punctuation":{color:"hsl(355, 65%, 65%)"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},namespace:{Opacity:"0.8"},"token.tab:not(:empty):before":{color:"hsla(220, 14%, 71%, 0.15)",textShadow:"none"},"token.cr:before":{color:"hsla(220, 14%, 71%, 0.15)",textShadow:"none"},"token.lf:before":{color:"hsla(220, 14%, 71%, 0.15)",textShadow:"none"},"token.space:before":{color:"hsla(220, 14%, 71%, 0.15)",textShadow:"none"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item":{marginRight:"0.4em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > button":{background:"hsl(220, 13%, 26%)",color:"hsl(220, 9%, 55%)",padding:"0.1em 0.4em",borderRadius:"0.3em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > a":{background:"hsl(220, 13%, 26%)",color:"hsl(220, 9%, 55%)",padding:"0.1em 0.4em",borderRadius:"0.3em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > span":{background:"hsl(220, 13%, 26%)",color:"hsl(220, 9%, 55%)",padding:"0.1em 0.4em",borderRadius:"0.3em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > button:hover":{background:"hsl(220, 13%, 28%)",color:"hsl(220, 14%, 71%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > button:focus":{background:"hsl(220, 13%, 28%)",color:"hsl(220, 14%, 71%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > a:hover":{background:"hsl(220, 13%, 28%)",color:"hsl(220, 14%, 71%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > a:focus":{background:"hsl(220, 13%, 28%)",color:"hsl(220, 14%, 71%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > span:hover":{background:"hsl(220, 13%, 28%)",color:"hsl(220, 14%, 71%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > span:focus":{background:"hsl(220, 13%, 28%)",color:"hsl(220, 14%, 71%)"},".line-highlight.line-highlight":{background:"hsla(220, 100%, 80%, 0.04)"},".line-highlight.line-highlight:before":{background:"hsl(220, 13%, 26%)",color:"hsl(220, 14%, 71%)",padding:"0.1em 0.6em",borderRadius:"0.3em",boxShadow:"0 2px 0 0 rgba(0, 0, 0, 0.2)"},".line-highlight.line-highlight[data-end]:after":{background:"hsl(220, 13%, 26%)",color:"hsl(220, 14%, 71%)",padding:"0.1em 0.6em",borderRadius:"0.3em",boxShadow:"0 2px 0 0 rgba(0, 0, 0, 0.2)"},"pre[id].linkable-line-numbers.linkable-line-numbers span.line-numbers-rows > span:hover:before":{backgroundColor:"hsla(220, 100%, 80%, 0.04)"},".line-numbers.line-numbers .line-numbers-rows":{borderRightColor:"hsla(220, 14%, 71%, 0.15)"},".command-line .command-line-prompt":{borderRightColor:"hsla(220, 14%, 71%, 0.15)"},".line-numbers .line-numbers-rows > span:before":{color:"hsl(220, 14%, 45%)"},".command-line .command-line-prompt > span:before":{color:"hsl(220, 14%, 45%)"},".rainbow-braces .token.token.punctuation.brace-level-1":{color:"hsl(355, 65%, 65%)"},".rainbow-braces .token.token.punctuation.brace-level-5":{color:"hsl(355, 65%, 65%)"},".rainbow-braces .token.token.punctuation.brace-level-9":{color:"hsl(355, 65%, 65%)"},".rainbow-braces .token.token.punctuation.brace-level-2":{color:"hsl(95, 38%, 62%)"},".rainbow-braces .token.token.punctuation.brace-level-6":{color:"hsl(95, 38%, 62%)"},".rainbow-braces .token.token.punctuation.brace-level-10":{color:"hsl(95, 38%, 62%)"},".rainbow-braces .token.token.punctuation.brace-level-3":{color:"hsl(207, 82%, 66%)"},".rainbow-braces .token.token.punctuation.brace-level-7":{color:"hsl(207, 82%, 66%)"},".rainbow-braces .token.token.punctuation.brace-level-11":{color:"hsl(207, 82%, 66%)"},".rainbow-braces .token.token.punctuation.brace-level-4":{color:"hsl(286, 60%, 67%)"},".rainbow-braces .token.token.punctuation.brace-level-8":{color:"hsl(286, 60%, 67%)"},".rainbow-braces .token.token.punctuation.brace-level-12":{color:"hsl(286, 60%, 67%)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix)":{backgroundColor:"hsla(353, 100%, 66%, 0.15)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix)":{backgroundColor:"hsla(353, 100%, 66%, 0.15)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix)::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix) *::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix)::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix) *::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix)":{backgroundColor:"hsla(137, 100%, 55%, 0.15)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix)":{backgroundColor:"hsla(137, 100%, 55%, 0.15)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix)::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix) *::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix)::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix) *::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},".prism-previewer.prism-previewer:before":{borderColor:"hsl(224, 13%, 17%)"},".prism-previewer-gradient.prism-previewer-gradient div":{borderColor:"hsl(224, 13%, 17%)",borderRadius:"0.3em"},".prism-previewer-color.prism-previewer-color:before":{borderRadius:"0.3em"},".prism-previewer-easing.prism-previewer-easing:before":{borderRadius:"0.3em"},".prism-previewer.prism-previewer:after":{borderTopColor:"hsl(224, 13%, 17%)"},".prism-previewer-flipped.prism-previewer-flipped.after":{borderBottomColor:"hsl(224, 13%, 17%)"},".prism-previewer-angle.prism-previewer-angle:before":{background:"hsl(219, 13%, 22%)"},".prism-previewer-time.prism-previewer-time:before":{background:"hsl(219, 13%, 22%)"},".prism-previewer-easing.prism-previewer-easing":{background:"hsl(219, 13%, 22%)"},".prism-previewer-angle.prism-previewer-angle circle":{stroke:"hsl(220, 14%, 71%)",strokeOpacity:"1"},".prism-previewer-time.prism-previewer-time circle":{stroke:"hsl(220, 14%, 71%)",strokeOpacity:"1"},".prism-previewer-easing.prism-previewer-easing circle":{stroke:"hsl(220, 14%, 71%)",fill:"transparent"},".prism-previewer-easing.prism-previewer-easing path":{stroke:"hsl(220, 14%, 71%)"},".prism-previewer-easing.prism-previewer-easing line":{stroke:"hsl(220, 14%, 71%)"}},ro={'code[class*="language-"]':{background:"hsl(230, 1%, 98%)",color:"hsl(230, 8%, 24%)",fontFamily:'"Fira Code", "Fira Mono", Menlo, Consolas, "DejaVu Sans Mono", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"2",OTabSize:"2",tabSize:"2",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{background:"hsl(230, 1%, 98%)",color:"hsl(230, 8%, 24%)",fontFamily:'"Fira Code", "Fira Mono", Menlo, Consolas, "DejaVu Sans Mono", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"2",OTabSize:"2",tabSize:"2",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:"0.5em 0",overflow:"auto",borderRadius:"0.3em"},'code[class*="language-"]::-moz-selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'code[class*="language-"] *::-moz-selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'pre[class*="language-"] *::-moz-selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'code[class*="language-"]::selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'code[class*="language-"] *::selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'pre[class*="language-"] *::selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},':not(pre) > code[class*="language-"]':{padding:"0.2em 0.3em",borderRadius:"0.3em",whiteSpace:"normal"},comment:{color:"hsl(230, 4%, 64%)",fontStyle:"italic"},prolog:{color:"hsl(230, 4%, 64%)"},cdata:{color:"hsl(230, 4%, 64%)"},doctype:{color:"hsl(230, 8%, 24%)"},punctuation:{color:"hsl(230, 8%, 24%)"},entity:{color:"hsl(230, 8%, 24%)",cursor:"help"},"attr-name":{color:"hsl(35, 99%, 36%)"},"class-name":{color:"hsl(35, 99%, 36%)"},boolean:{color:"hsl(35, 99%, 36%)"},constant:{color:"hsl(35, 99%, 36%)"},number:{color:"hsl(35, 99%, 36%)"},atrule:{color:"hsl(35, 99%, 36%)"},keyword:{color:"hsl(301, 63%, 40%)"},property:{color:"hsl(5, 74%, 59%)"},tag:{color:"hsl(5, 74%, 59%)"},symbol:{color:"hsl(5, 74%, 59%)"},deleted:{color:"hsl(5, 74%, 59%)"},important:{color:"hsl(5, 74%, 59%)"},selector:{color:"hsl(119, 34%, 47%)"},string:{color:"hsl(119, 34%, 47%)"},char:{color:"hsl(119, 34%, 47%)"},builtin:{color:"hsl(119, 34%, 47%)"},inserted:{color:"hsl(119, 34%, 47%)"},regex:{color:"hsl(119, 34%, 47%)"},"attr-value":{color:"hsl(119, 34%, 47%)"},"attr-value > .token.punctuation":{color:"hsl(119, 34%, 47%)"},variable:{color:"hsl(221, 87%, 60%)"},operator:{color:"hsl(221, 87%, 60%)"},function:{color:"hsl(221, 87%, 60%)"},url:{color:"hsl(198, 99%, 37%)"},"attr-value > .token.punctuation.attr-equals":{color:"hsl(230, 8%, 24%)"},"special-attr > .token.attr-value > .token.value.css":{color:"hsl(230, 8%, 24%)"},".language-css .token.selector":{color:"hsl(5, 74%, 59%)"},".language-css .token.property":{color:"hsl(230, 8%, 24%)"},".language-css .token.function":{color:"hsl(198, 99%, 37%)"},".language-css .token.url > .token.function":{color:"hsl(198, 99%, 37%)"},".language-css .token.url > .token.string.url":{color:"hsl(119, 34%, 47%)"},".language-css .token.important":{color:"hsl(301, 63%, 40%)"},".language-css .token.atrule .token.rule":{color:"hsl(301, 63%, 40%)"},".language-javascript .token.operator":{color:"hsl(301, 63%, 40%)"},".language-javascript .token.template-string > .token.interpolation > .token.interpolation-punctuation.punctuation":{color:"hsl(344, 84%, 43%)"},".language-json .token.operator":{color:"hsl(230, 8%, 24%)"},".language-json .token.null.keyword":{color:"hsl(35, 99%, 36%)"},".language-markdown .token.url":{color:"hsl(230, 8%, 24%)"},".language-markdown .token.url > .token.operator":{color:"hsl(230, 8%, 24%)"},".language-markdown .token.url-reference.url > .token.string":{color:"hsl(230, 8%, 24%)"},".language-markdown .token.url > .token.content":{color:"hsl(221, 87%, 60%)"},".language-markdown .token.url > .token.url":{color:"hsl(198, 99%, 37%)"},".language-markdown .token.url-reference.url":{color:"hsl(198, 99%, 37%)"},".language-markdown .token.blockquote.punctuation":{color:"hsl(230, 4%, 64%)",fontStyle:"italic"},".language-markdown .token.hr.punctuation":{color:"hsl(230, 4%, 64%)",fontStyle:"italic"},".language-markdown .token.code-snippet":{color:"hsl(119, 34%, 47%)"},".language-markdown .token.bold .token.content":{color:"hsl(35, 99%, 36%)"},".language-markdown .token.italic .token.content":{color:"hsl(301, 63%, 40%)"},".language-markdown .token.strike .token.content":{color:"hsl(5, 74%, 59%)"},".language-markdown .token.strike .token.punctuation":{color:"hsl(5, 74%, 59%)"},".language-markdown .token.list.punctuation":{color:"hsl(5, 74%, 59%)"},".language-markdown .token.title.important > .token.punctuation":{color:"hsl(5, 74%, 59%)"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},namespace:{Opacity:"0.8"},"token.tab:not(:empty):before":{color:"hsla(230, 8%, 24%, 0.2)"},"token.cr:before":{color:"hsla(230, 8%, 24%, 0.2)"},"token.lf:before":{color:"hsla(230, 8%, 24%, 0.2)"},"token.space:before":{color:"hsla(230, 8%, 24%, 0.2)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item":{marginRight:"0.4em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > button":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 6%, 44%)",padding:"0.1em 0.4em",borderRadius:"0.3em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > a":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 6%, 44%)",padding:"0.1em 0.4em",borderRadius:"0.3em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > span":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 6%, 44%)",padding:"0.1em 0.4em",borderRadius:"0.3em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > button:hover":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > button:focus":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > a:hover":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > a:focus":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > span:hover":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > span:focus":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},".line-highlight.line-highlight":{background:"hsla(230, 8%, 24%, 0.05)"},".line-highlight.line-highlight:before":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 8%, 24%)",padding:"0.1em 0.6em",borderRadius:"0.3em",boxShadow:"0 2px 0 0 rgba(0, 0, 0, 0.2)"},".line-highlight.line-highlight[data-end]:after":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 8%, 24%)",padding:"0.1em 0.6em",borderRadius:"0.3em",boxShadow:"0 2px 0 0 rgba(0, 0, 0, 0.2)"},"pre[id].linkable-line-numbers.linkable-line-numbers span.line-numbers-rows > span:hover:before":{backgroundColor:"hsla(230, 8%, 24%, 0.05)"},".line-numbers.line-numbers .line-numbers-rows":{borderRightColor:"hsla(230, 8%, 24%, 0.2)"},".command-line .command-line-prompt":{borderRightColor:"hsla(230, 8%, 24%, 0.2)"},".line-numbers .line-numbers-rows > span:before":{color:"hsl(230, 1%, 62%)"},".command-line .command-line-prompt > span:before":{color:"hsl(230, 1%, 62%)"},".rainbow-braces .token.token.punctuation.brace-level-1":{color:"hsl(5, 74%, 59%)"},".rainbow-braces .token.token.punctuation.brace-level-5":{color:"hsl(5, 74%, 59%)"},".rainbow-braces .token.token.punctuation.brace-level-9":{color:"hsl(5, 74%, 59%)"},".rainbow-braces .token.token.punctuation.brace-level-2":{color:"hsl(119, 34%, 47%)"},".rainbow-braces .token.token.punctuation.brace-level-6":{color:"hsl(119, 34%, 47%)"},".rainbow-braces .token.token.punctuation.brace-level-10":{color:"hsl(119, 34%, 47%)"},".rainbow-braces .token.token.punctuation.brace-level-3":{color:"hsl(221, 87%, 60%)"},".rainbow-braces .token.token.punctuation.brace-level-7":{color:"hsl(221, 87%, 60%)"},".rainbow-braces .token.token.punctuation.brace-level-11":{color:"hsl(221, 87%, 60%)"},".rainbow-braces .token.token.punctuation.brace-level-4":{color:"hsl(301, 63%, 40%)"},".rainbow-braces .token.token.punctuation.brace-level-8":{color:"hsl(301, 63%, 40%)"},".rainbow-braces .token.token.punctuation.brace-level-12":{color:"hsl(301, 63%, 40%)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix)":{backgroundColor:"hsla(353, 100%, 66%, 0.15)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix)":{backgroundColor:"hsla(353, 100%, 66%, 0.15)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix)::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix) *::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix)::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix) *::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix)":{backgroundColor:"hsla(137, 100%, 55%, 0.15)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix)":{backgroundColor:"hsla(137, 100%, 55%, 0.15)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix)::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix) *::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix)::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix) *::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},".prism-previewer.prism-previewer:before":{borderColor:"hsl(0, 0, 95%)"},".prism-previewer-gradient.prism-previewer-gradient div":{borderColor:"hsl(0, 0, 95%)",borderRadius:"0.3em"},".prism-previewer-color.prism-previewer-color:before":{borderRadius:"0.3em"},".prism-previewer-easing.prism-previewer-easing:before":{borderRadius:"0.3em"},".prism-previewer.prism-previewer:after":{borderTopColor:"hsl(0, 0, 95%)"},".prism-previewer-flipped.prism-previewer-flipped.after":{borderBottomColor:"hsl(0, 0, 95%)"},".prism-previewer-angle.prism-previewer-angle:before":{background:"hsl(0, 0%, 100%)"},".prism-previewer-time.prism-previewer-time:before":{background:"hsl(0, 0%, 100%)"},".prism-previewer-easing.prism-previewer-easing":{background:"hsl(0, 0%, 100%)"},".prism-previewer-angle.prism-previewer-angle circle":{stroke:"hsl(230, 8%, 24%)",strokeOpacity:"1"},".prism-previewer-time.prism-previewer-time circle":{stroke:"hsl(230, 8%, 24%)",strokeOpacity:"1"},".prism-previewer-easing.prism-previewer-easing circle":{stroke:"hsl(230, 8%, 24%)",fill:"transparent"},".prism-previewer-easing.prism-previewer-easing path":{stroke:"hsl(230, 8%, 24%)"},".prism-previewer-easing.prism-previewer-easing line":{stroke:"hsl(230, 8%, 24%)"}};function J({content:t,role:r,timestamp:l,memoryCount:n}){const{theme:i}=Oe(),{toast:g}=le(),[u,m]=c.useState(!1);r==="assistant"&&n&&console.log("🧠 ChatMessage received memoryCount:",n,"for content:",t.substring(0,50)+"...");const f=a=>{console.log("🔍 Preprocessing content:",a.substring(0,200));let o=a;return o=o.replace(/^[─\-]{3,}\s*/gm,""),o=o.replace(/\n[─\-]{3,}\s*/g,`
`),o=o.replace(/ • /g,`
- `),o=o.replace(/^• /gm,"- "),o=o.replace(/\n• /g,`
- `),o=o.replace(/^(\d+)\. /gm,"$1. "),o=o.replace(/^([A-Za-z][A-Za-z0-9\s\-&]+):/gm,"**$1:**"),o=o.replace(/\n([A-Za-z][A-Za-z0-9\s\-&]+):/g,`
**$1:**`),o=o.replace(/:(\s+[^:\n])/g,`:
$1`),o=o.replace(/(\*\*[^*]+:\*\*)([^\n])/g,`$1
$2`),o=o.replace(/^(#{1,6}) /gm,`
$1 `),o=o.replace(/^([A-Z][A-Za-z0-9\s\-&]+)$/gm,"**$1**"),o=o.replace(/\n([A-Z][A-Za-z0-9\s\-&]+)$/gm,`
**$1**`),o=o.replace(/\n{3,}/g,`

`),console.log("✅ Processed content:",o.substring(0,200)),o.trim()},h=async()=>{try{await navigator.clipboard.writeText(t),g({title:"Copied to clipboard",description:"Message copied successfully",duration:2e3})}catch{g({title:"Copy failed",description:"Failed to copy message to clipboard",variant:"destructive",duration:2e3})}},I=a=>{if(!a)return"Just now";const o=typeof a=="string"?new Date(a):a;return isNaN(o.getTime())?"Just now":new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).format(o)};return e.jsx("div",{className:`group flex ${r==="user"?"justify-end":"justify-start"} animate-fade-in mb-6`,"data-message-role":r,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:e.jsxs("div",{className:`${r==="user"?"max-w-[80%] md:max-w-[70%] flex flex-col items-end":"w-full"}`,children:[e.jsx("div",{className:`${r==="user"?"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded-2xl px-4 py-3":"text-gray-800 dark:text-gray-100"}`,children:e.jsx("div",{className:"text-sm md:text-base leading-relaxed",children:r==="assistant"?e.jsx(Pe,{components:{code({className:a,children:o,...w}){const A=/language-(\w+)/.exec(a||"");return!!a&&A?e.jsx(qe,{style:i==="dark"?to:ro,language:A[1],PreTag:"div",className:"rounded-md text-sm",children:String(o).replace(/\n$/,"")}):e.jsx("code",{className:"bg-gray-200 dark:bg-gray-700 px-1 py-0.5 rounded text-xs",children:o})},p:({children:a})=>e.jsx("p",{className:"mb-3 last:mb-0",children:a}),ul:({children:a})=>e.jsx("ul",{className:"mb-3 last:mb-0 pl-6 space-y-1 list-disc",children:a}),ol:({children:a})=>e.jsx("ol",{className:"mb-3 last:mb-0 pl-6 space-y-1 list-decimal",children:a}),li:({children:a})=>e.jsx("li",{className:"mb-1",children:a}),strong:({children:a})=>e.jsx("strong",{className:"font-bold",children:a}),em:({children:a})=>e.jsx("em",{className:"italic",children:a}),h1:({children:a})=>e.jsx("h1",{className:"text-2xl font-bold mb-3 mt-4 first:mt-0",children:a}),h2:({children:a})=>e.jsx("h2",{className:"text-xl font-bold mb-3 mt-4 first:mt-0",children:a}),h3:({children:a})=>e.jsx("h3",{className:"text-lg font-bold mb-2 mt-3 first:mt-0",children:a}),h4:({children:a})=>e.jsx("h4",{className:"text-base font-bold mb-2 mt-3 first:mt-0",children:a}),h5:({children:a})=>e.jsx("h5",{className:"text-sm font-bold mb-2 mt-2 first:mt-0",children:a}),h6:({children:a})=>e.jsx("h6",{className:"text-sm font-bold mb-2 mt-2 first:mt-0",children:a}),blockquote:({children:a})=>e.jsx("blockquote",{className:"border-l-4 border-gray-300 dark:border-gray-600 pl-4 py-2 my-3 italic text-gray-700 dark:text-gray-300",children:a}),hr:()=>e.jsx("hr",{className:"my-4 border-gray-300 dark:border-gray-600"}),a:({href:a,children:o})=>e.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 underline hover:text-blue-800 dark:hover:text-blue-300",children:o})},children:f(t)}):t})}),r==="assistant"&&n&&n>0&&e.jsxs("div",{className:"flex items-center gap-2 mt-3 mb-1",children:[e.jsx(Ve,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),e.jsxs("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:[n," Memories made"]})]}),e.jsx("div",{className:`flex items-center gap-1 mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 ${r==="user"?"justify-end":"justify-start"}`,children:r==="assistant"?e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:h,className:"h-6 w-6 p-0 hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(ae,{className:"h-3 w-3"})}),e.jsx(M,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(We,{className:"h-3 w-3"})}),e.jsx(M,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(Ke,{className:"h-3 w-3"})}),e.jsx(M,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(Ze,{className:"h-3 w-3"})}),e.jsx(M,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(Je,{className:"h-3 w-3"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:h,className:"h-6 w-6 p-0 hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(ae,{className:"h-3 w-3"})}),e.jsx(M,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(Le,{className:"h-3 w-3"})})]})}),l&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:I(l)})]})})}function ao(){return e.jsx("div",{className:"flex justify-start animate-fade-in",children:e.jsx("div",{className:"max-w-[80%] md:max-w-[70%] bg-gray-100 dark:bg-gray-800 rounded-2xl px-4 py-3 shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})}function no({messages:t,isTyping:r,streamingContent:l,isStreaming:n,memoryCounts:i,onContainerRef:g}){const u=c.useRef(null),m=c.useRef(null),f=c.useRef(t.length),h=[];for(let o=0;o<t.length;o++)t[o].role==="user"?t[o+1]&&t[o+1].role==="assistant"?(h.push({user:t[o],assistant:t[o+1]}),o++):h.push({user:t[o]}):o===0&&t[o].role==="assistant"&&h.push({user:t[o]});const I=h.length>0?h[h.length-1].user.id:null;c.useEffect(()=>{const o=u.current,w=m.current,A=f.current;o&&w&&t.length>A&&t[t.length-1].role==="user"&&requestAnimationFrame(()=>{setTimeout(()=>{const R=w.offsetTop-40;o.scrollTo({top:Math.max(0,R),behavior:"smooth"})},50)}),f.current=t.length},[t]),c.useEffect(()=>{const o=u.current;o&&n&&l&&requestAnimationFrame(()=>{o.scrollTo({top:o.scrollHeight,behavior:"smooth"})})},[n,l]);const a=()=>{const o=u.current;o&&(o.scrollTop=o.scrollHeight)};return c.useEffect(()=>{const o=u.current,w=f.current;o&&t.length>w&&t.length>0&&t[t.length-1].role==="assistant"&&(a(),setTimeout(a,100),setTimeout(a,300),setTimeout(a,600),setTimeout(a,1e3))},[t]),c.useEffect(()=>{u.current&&i&&Object.keys(i).length>0&&(setTimeout(a,100),setTimeout(a,400))},[i]),e.jsx("main",{className:"h-full relative z-10 overflow-hidden",children:e.jsx("div",{ref:o=>{u.current=o,g&&g(o)},className:"h-full overflow-y-auto px-4 scroll-smooth text-[15px]",style:{paddingTop:"16px",paddingBottom:"40px"},children:e.jsx("div",{className:"max-w-4xl mx-auto space-y-8",children:h.map((o,w)=>e.jsxs("div",{ref:o.user.id===I?m:null,className:"space-y-2",children:[e.jsx(J,{content:o.user.content,role:o.user.role,timestamp:o.user.timestamp}),o.assistant?e.jsx(J,{content:o.assistant.content,role:o.assistant.role,timestamp:o.assistant.timestamp,memoryCount:i==null?void 0:i[o.assistant.id]}):w===h.length-1&&(n||r)?n&&l?e.jsx(J,{content:l,role:"assistant"}):r?e.jsx(ao,{}):null:null]},o.user.id))})})})}const so=({minHeight:t,maxHeight:r})=>{const l=c.useRef(null),n=c.useCallback(i=>{const g=l.current;if(!g)return;if(i){g.style.height=`${t}px`;return}g.style.height=`${t}px`;const u=Math.max(t,Math.min(g.scrollHeight,r??Number.POSITIVE_INFINITY));g.style.height=`${u}px`},[t,r]);return c.useEffect(()=>{const i=l.current;i&&(i.style.height=`${t}px`)},[t]),c.useEffect(()=>{const i=()=>n();return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[n]),{textareaRef:l,adjustHeight:n}},he=({className:t,...r})=>e.jsx("form",{className:C("w-full overflow-hidden rounded-xl border bg-background shadow-sm",t),...r}),ge=({onChange:t,className:r,placeholder:l="What would you like to know?",minHeight:n=48,maxHeight:i=164,...g})=>{const{textareaRef:u,adjustHeight:m}=so({minHeight:n,maxHeight:i}),f=h=>{if(h.key==="Enter"&&!h.shiftKey){h.preventDefault();const I=h.currentTarget.form;I&&I.requestSubmit()}};return e.jsx(Ae,{name:"message",placeholder:l,ref:u,className:C("w-full resize-none rounded-none border-none p-3 shadow-none outline-none ring-0 focus:ring-0 focus:outline-none focus-visible:ring-0 focus-visible:outline-none",r),onChange:h=>{m(),t==null||t(h)},onKeyDown:f,...g})},ue=({className:t,...r})=>e.jsx("div",{className:C("flex items-center justify-between p-1",t),...r}),me=({className:t,...r})=>e.jsx("div",{className:C("flex items-center gap-1",t),...r}),P=({variant:t="ghost",className:r,size:l,...n})=>{const i=l??c.Children.count(n.children)>1?"default":"icon";return e.jsx(M,{type:"button",variant:t,size:i,className:C("shrink-0 gap-1.5 text-muted-foreground",i==="default"&&"px-3",r),...n})},pe=({className:t,variant:r="ghost",size:l="icon",...n})=>e.jsx(M,{type:"submit",variant:r,size:l,className:C("gap-1.5 text-muted-foreground",t),...n}),be=t=>e.jsx(Ue,{...t}),ke=({className:t,...r})=>e.jsx(Qe,{className:C("border-none bg-transparent font-medium text-muted-foreground shadow-none transition-colors",'hover:bg-accent hover:text-foreground [&[aria-expanded="true"]]:bg-accent [&[aria-expanded="true"]]:text-foreground',t),...r}),fe=({className:t,...r})=>e.jsx(Ge,{className:C(t),...r}),xe=({className:t,...r})=>e.jsx(Xe,{className:C(t),...r}),we=({className:t,...r})=>e.jsx(Ye,{className:C(t),...r});function lo({onSendMessage:t,isLoading:r}){const[l,n]=c.useState("1k"),i=g=>{g.preventDefault();const m=new FormData(g.currentTarget).get("message");m!=null&&m.trim()&&(t(m.trim()),g.currentTarget.reset())};return e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-4 py-8",style:{paddingTop:"300px"},children:e.jsxs("div",{className:"max-w-4xl w-full text-center space-y-8",children:[e.jsx("div",{className:"mb-6",children:e.jsx("h1",{className:"text-6xl md:text-7xl lg:text-8xl font-black tracking-tight text-black dark:text-white",children:"Conquer"})}),e.jsx("div",{className:"w-full max-w-3xl mx-auto px-2 sm:px-4 relative z-10",children:e.jsxs(he,{onSubmit:i,className:"border border-gray-300 dark:border-gray-600 rounded-lg shadow-[0_0_0_1px_rgba(67,80,88,0.15)] dark:shadow-[0_0_0_1px_rgba(67,80,88,0.3)] hover:shadow-[0_0_0_2px_rgba(67,80,88,0.25)] dark:hover:shadow-[0_0_0_2px_rgba(67,80,88,0.4)] transition-all duration-300",children:[e.jsx(ge,{placeholder:"Ask anything",disabled:r,className:"text-sm sm:text-base dark:text-white dark:placeholder-white border-none resize-none"}),e.jsxs(ue,{className:"gap-1",children:[e.jsxs(me,{className:"gap-1",children:[e.jsx(P,{disabled:r,className:"h-8 w-8 sm:h-9 sm:w-9 dark:text-white dark:hover:bg-[#435058]",children:e.jsx(ie,{size:14,className:"sm:size-4"})}),e.jsx(P,{disabled:r,className:"h-8 w-8 sm:h-9 sm:w-9 dark:text-white dark:hover:bg-[#435058]",children:e.jsx(ce,{size:14,className:"sm:size-4"})}),e.jsxs(be,{value:l,onValueChange:n,children:[e.jsx(ke,{className:"h-8 sm:h-9 text-xs sm:text-sm w-12 sm:w-auto min-w-[48px] px-2 dark:text-white dark:border-white",children:e.jsx(we,{})}),e.jsx(fe,{className:"dark:bg-black dark:border-white",children:e.jsx(xe,{value:"1k",className:"dark:text-white dark:hover:bg-[#435058]",children:"1k"})})]})]}),e.jsx(pe,{disabled:r,className:"h-8 w-8 sm:h-9 sm:w-9 dark:text-white dark:hover:bg-[#435058]",children:e.jsx(de,{size:14,className:"sm:size-4"})})]})]})})]})})}function io({onSendMessage:t,isLoading:r}){const[l,n]=c.useState("1k"),i=g=>{g.preventDefault();const m=new FormData(g.currentTarget).get("message");m!=null&&m.trim()&&(t(m.trim()),g.currentTarget.reset())};return e.jsx("footer",{className:"bg-white dark:bg-black p-4 md:p-4 relative z-20",children:e.jsx("div",{className:"w-full max-w-4xl mx-auto px-2 sm:px-0",children:e.jsxs(he,{onSubmit:i,className:"border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm",children:[e.jsx(ge,{placeholder:"Type a message...",disabled:r,className:"text-sm sm:text-base font-medium dark:text-white dark:placeholder-white border-none resize-none"}),e.jsxs(ue,{className:"gap-1",children:[e.jsxs(me,{className:"gap-1",children:[e.jsx(P,{disabled:r,className:"h-8 w-8 sm:h-9 sm:w-9 dark:text-white dark:hover:bg-[#435058]",children:e.jsx(ie,{size:14,className:"sm:size-4"})}),e.jsx(P,{disabled:r,className:"h-8 w-8 sm:h-9 sm:w-9 dark:text-white dark:hover:bg-[#435058]",children:e.jsx(ce,{size:14,className:"sm:size-4"})}),e.jsxs(be,{value:l,onValueChange:n,children:[e.jsx(ke,{className:"h-8 sm:h-9 text-xs sm:text-sm w-12 sm:w-auto min-w-[48px] px-2 dark:text-white dark:border-white",children:e.jsx(we,{})}),e.jsx(fe,{className:"dark:bg-black dark:border-white",children:e.jsx(xe,{value:"1k",className:"dark:text-white dark:hover:bg-[#435058]",children:"1k"})})]})]}),e.jsx(pe,{disabled:r,className:"h-8 w-8 sm:h-9 sm:w-9 dark:text-white dark:hover:bg-[#435058]",children:e.jsx(de,{size:14,className:"sm:size-4"})})]})]})})})}function se({position:t}){const r=Array.from({length:36},(l,n)=>({id:n,d:`M-${380-n*5*t} -${300+n*6}C-${380-n*5*t} -${300+n*6} -${312-n*5*t} ${150-n*6} ${152-n*5*t} ${250-n*6}C${616-n*5*t} ${370-n*6} ${684-n*5*t} ${700-n*6} ${684-n*5*t} ${700-n*6}`,color:`rgba(15,23,42,${.05+n*.015})`,width:.5+n*.03}));return e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.jsxs("svg",{className:"w-full h-full text-slate-950 dark:text-white",viewBox:"0 0 696 316",fill:"none",children:[e.jsx("title",{children:"Background Paths"}),r.map(l=>e.jsx(oo.path,{d:l.d,stroke:"currentColor",strokeWidth:l.width,strokeOpacity:.05+l.id*.015,initial:{pathLength:.3,opacity:.3},animate:{pathLength:1,opacity:[.15,.3,.15],pathOffset:[0,1,0]},transition:{duration:20+Math.random()*10,repeat:Number.POSITIVE_INFINITY,ease:"linear"}},l.id))]})})}function co(){return e.jsxs("div",{className:"absolute inset-0 overflow-hidden z-0",children:[e.jsx(se,{position:1}),e.jsx(se,{position:-1})]})}function yo(){const{authEnabled:t,user:r}=He(),[l,n]=c.useState(!1),[i,g]=c.useState(!1),[u,m]=c.useState(null),[f,h]=c.useState([]),[I,a]=c.useState(null),[o,w]=c.useState(""),[A,R]=c.useState(!1),[ve,L]=c.useState({}),[N,ye]=c.useState(null),U=Re(),{toast:H}=le();c.useEffect(()=>{if(N&&f.length>0){console.log("📍 MessageContainer ref available, scrolling to bottom");const s=()=>{N.scrollTop=N.scrollHeight};setTimeout(s,50),setTimeout(s,200),setTimeout(s,400)}},[N,f.length]);const x=c.useMemo(()=>{const s=localStorage.getItem("anon_user_id"),p=(r==null?void 0:r.id)||s||null;return console.log("getEffectiveUserId:",{userId:r==null?void 0:r.id,anon:s,effectiveUserId:p}),p},[r==null?void 0:r.id]),{data:B=[],refetch:je}=$e({queryKey:["threads",x],queryFn:async()=>{if(!x)return[];const s=await fetch(`/api/chat/threads?user_id=${x}`);if(!s.ok)throw new Error("Failed to fetch threads");return s.json()},enabled:!!x});c.useEffect(()=>{u&&x&&f.length===0&&(console.log("📥 Loading thread:",u),Se(u))},[u,x]);const Se=async s=>{var p;try{if(console.log("🔍 fetchThreadMessages called with:",{threadId:s,effectiveUserId:x}),!s||!x){console.warn("Missing threadId or effectiveUserId:",{threadId:s,effectiveUserId:x});return}const d=`/api/chat/threads/${s}?user_id=${x}`;console.log("Fetching thread messages from:",d);const S=await fetch(d);if(console.log("📥 Response received:",{status:S.status,ok:S.ok}),!S.ok){let b="Failed to fetch thread";const T=S.headers.get("content-type");if(T&&T.includes("application/json"))try{b=(await S.json()).error||b}catch{}else console.error("Non-JSON error response:",S.status,T);throw new Error(b)}const k=await S.json();console.log("📋 Thread data received:",{threadId:k.thread_id,messageCount:((p=k.messages)==null?void 0:p.length)||0,title:k.title}),a(k);const z=k.messages?k.messages.map(b=>({id:b.id,content:b.content,role:b.role,timestamp:new Date(b.created_at)})):[];console.log("✅ Setting messages:",{count:z.length}),h(z);const v=()=>{N&&(N.scrollTop=N.scrollHeight,console.log("📍 Scrolled to bottom after loading thread"))};setTimeout(v,50),setTimeout(v,150),setTimeout(v,300),setTimeout(v,500)}catch(d){console.error("❌ Failed to fetch thread messages:",d),H({title:"Error",description:d instanceof Error?d.message:"Failed to load conversation history",variant:"destructive"})}},Ne=Z({mutationFn:async s=>{const p=localStorage.getItem("anon_user_id"),d=p||ne();p||localStorage.setItem("anon_user_id",d);const S=ne(),k=await fetch("/api/chat/threads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:x??d,thread_id:S,title:s})});if(!k.ok){const v=k.headers.get("content-type");let b="Failed to create thread";if(v&&v.includes("application/json"))try{const T=await k.json();b=T.error||T.message||b}catch{}throw new Error(b)}const z=await k.json();return console.log("Thread creation response:",z),z},onSuccess:s=>{U.setQueryData(["threads",x],p=>p?[...p,s]:[s])}}),Te=Z({mutationFn:async s=>{const p=await fetch(`/api/chat/threads/${s}`,{method:"DELETE"});if(!p.ok)throw new Error("Failed to delete thread");return p.json()},onSuccess:()=>{je()}}),q=()=>{console.log("🆕 New chat requested"),a(null),m(null),h([]),n(!1),R(!1),w(""),L({}),localStorage.removeItem("activeThreadId"),localStorage.setItem("forceNewThread","true"),console.log("🆕 Marked for new thread creation on next message")},Ce=s=>{console.log("🎯 handleThreadSelect called:",{threadId:s,effectiveUserId:x,currentActiveThread:u}),localStorage.removeItem("forceNewThread"),h([]),a(null),m(s),localStorage.setItem("activeThreadId",s),console.log("✅ Updated activeThreadId to:",s)},Ie=async s=>{try{await Te.mutateAsync(s),s===u&&q(),H({title:"Success",description:"Conversation deleted"})}catch{H({title:"Error",description:"Failed to delete conversation",variant:"destructive"})}};c.useEffect(()=>{const s=localStorage.getItem("activeThreadId");s&&B.length>0&&!u&&(B.some(d=>d.thread_id===s)?(console.log("📂 Restoring thread:",s),m(s)):localStorage.removeItem("activeThreadId"))},[B]);const V=Z({mutationFn:async s=>{var X,ee,oe,te;const p={id:Date.now(),content:s,role:"user",timestamp:new Date};console.log("📝 Adding user message FIRST, current length:",f.length),h(y=>{const $=[...y,p];return console.log("📝 Previous messages:",y.length,"New messages:",$.length),console.log("📝 This should trigger chat view since messages > 0"),$}),console.log("🤔 Setting typing indicator to true"),n(!0);let d=I;const S=localStorage.getItem("forceNewThread")==="true";if(f.length===0||!u||!I||S){localStorage.removeItem("forceNewThread");const $=s.split(" ").slice(0,4).join(" ")+(s.split(" ").length>4?"...":"");try{d=await Ne.mutateAsync($),console.log("✅ Created NEW thread:",d),d&&(a(d),m(d.thread_id),localStorage.setItem("activeThreadId",d.thread_id))}catch(re){console.error("❌ Failed to create thread:",re);const E={id:"temp-"+Date.now(),thread_id:"temp-"+Date.now(),title:$,user_id:x||"anon",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),archived:!1,metadata:{}};d=E,a(E),m(E.thread_id)}}let k,z;if(r&&t){const y=await eo.getIntegrationByProvider(r.id,"openai");y&&(k=y.api_key,z=(X=y.config)==null?void 0:X.model)}if(!k&&(k=localStorage.getItem("chatgpt_api_key")||void 0,z=localStorage.getItem("chatgpt_model")||void 0,!k))throw new Error("No API key found. Please configure an OpenAI integration in Settings.");if(!(d!=null&&d.thread_id))throw new Error("Failed to create thread - no thread ID available");const v={message:s,apiKey:k,model:z,userId:x||void 0,threadId:d.thread_id};console.log("📤 Sending request with:",{userId:v.userId,threadId:v.threadId,hasApiKey:!!v.apiKey,model:v.model});const b=await fetch("/api/chat/stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(!b.ok){const y=await b.text();throw console.error("❌ Response not OK:",b.status,y),d!=null&&d.thread_id&&m(d.thread_id),new Error(`Failed to send message: ${b.status} ${y}`)}const T=(ee=b.body)==null?void 0:ee.getReader(),W=new TextDecoder;let D="",G=!1;if(T)for(;;){const{done:y,value:$}=await T.read();if(y)break;const E=W.decode($).split(`
`);for(const K of E)if(K.startsWith("data: "))try{const j=JSON.parse(K.slice(6));if(j.error)throw new Error(j.error);if(j.type==="memory_update"){console.log("📝 Memory saved:",j.memories);const F=((oe=j.memories.short_term)==null?void 0:oe.length)||0,O=((te=j.memories.long_term)==null?void 0:te.length)||0,_=F+O;_>0&&(console.log("🧠 Storing memory count in localStorage:",_),localStorage.setItem("nextMemoryCount",_.toString()))}else j.type==="thread_info"?console.log("OpenAI Thread ID:",j.threadId):j.content&&(G||(console.log("🔄 Transitioning from typing to streaming"),n(!1),R(!0),w(""),G=!0),D+=j.content,w(D));if(j.done){const F={id:Date.now()+1,content:D,role:"assistant",timestamp:new Date};h(_=>[..._,F]);const O=localStorage.getItem("nextMemoryCount");if(console.log("🧠 Retrieved memory count from localStorage:",O),O){const _=parseInt(O,10);console.log("🧠 Setting memory count for message",F.id,":",_),L(_e=>({..._e,[F.id]:_})),localStorage.removeItem("nextMemoryCount"),setTimeout(()=>{N&&(console.log("🚀 Auto-scrolling to bottom for memory notification"),N.scrollTo({top:N.scrollHeight,behavior:"smooth"}))},300)}return setTimeout(()=>{R(!1),w("")},100),U.invalidateQueries({queryKey:["threads",x]}),{content:D,role:"assistant"}}}catch{console.warn("Invalid JSON in stream:",K)}}return{content:D,role:"assistant"}},onError:s=>{console.error("Failed to send message:",s),n(!1),R(!1),w(""),h(p=>(p.length>0&&p[p.length-1].role==="user",p)),H({title:"Error",description:s instanceof Error?s.message:"Failed to send message. Please try again.",variant:"destructive"})},onSuccess:()=>{console.log("✅ Message sent successfully"),f.length>0&&console.log("✅ Messages exist, should be showing chat view")},onSettled:()=>{n(!1)}}),Q=s=>{V.mutate(s)},ze=()=>{g(!i)},Me=()=>{g(!1)},Y=f.length>0||u!==null;return e.jsxs("div",{className:"h-screen flex bg-white dark:bg-black relative overflow-hidden",children:[!t&&e.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 p-4",children:e.jsx(De,{})}),Y?e.jsx(Be,{}):e.jsx(co,{}),e.jsx(Ee,{isOpen:i,onClose:Me,onThreadSelect:Ce,onNewChat:q,activeThreadId:u,onThreadDelete:Ie,threads:B}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 relative z-10",children:[e.jsx(Fe,{onToggleSidebar:ze,isSidebarOpen:i,onNewChat:q}),Y?e.jsxs("div",{className:`flex-1 flex flex-col h-full ${t?"pt-16":"pt-20"}`,children:[e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(no,{messages:f,isTyping:l,streamingContent:o,isStreaming:A,memoryCounts:ve,onContainerRef:ye})}),e.jsx("div",{className:"flex-shrink-0 z-30",style:{marginBottom:"80px",position:"relative",top:"-4px"},children:e.jsx(io,{onSendMessage:Q,isLoading:V.isPending})})]}):e.jsx("div",{className:`flex-1 ${t?"pt-16":"pt-20"}`,children:e.jsx(lo,{onSendMessage:Q,isLoading:V.isPending})})]})]})}export{yo as default};
