const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Landing-C2bHCQQ-.js","assets/radix-D6tAntsm.js","assets/vendor-B5oVexe1.js","assets/badge-BgMtBYxe.js","assets/utils-CElquc7p.js","assets/motion-C1uzXyO4.js","assets/icons-8ZevHjIu.js","assets/markdown-BBjlYdCw.js","assets/charts-BZMYq3Wc.js","assets/query-4uz7M6Xs.js","assets/chat-C7AXKxB3.js","assets/AuthSetupBanner-CPWk6td9.js","assets/integrations-61LYMxvD.js","assets/settings-DvOIEeqI.js","assets/dialog-BRGN119b.js","assets/memory-DxDag2RN.js"])))=>i.map(i=>d[i]);
import{j as g,V as Ir,R as Ar,A as jr,C as Mr,T as Dr,D as zr,P as ua,a as Lr,b as ha,S as da,L as $r,c as Ur,d as Nr,e as fa}from"./radix-D6tAntsm.js";import{a as pa,r as P,e as ga,d as ue,u as qs,S as ma,f as ft}from"./vendor-B5oVexe1.js";import{_ as Ae}from"./markdown-BBjlYdCw.js";import{Q as ya,a as va}from"./query-4uz7M6Xs.js";import{t as ba,c as wa,a as Fr}from"./utils-CElquc7p.js";import{X as _a,L as ys,E as cn,a as ln,C as xa}from"./icons-8ZevHjIu.js";import{u as ka,m as Sa}from"./motion-C1uzXyO4.js";import"./charts-BZMYq3Wc.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();var Br,un=pa;Br=un.createRoot,un.hydrateRoot;async function Pa(i){if(!i.ok){const e=await i.text()||i.statusText;throw new Error(`${i.status}: ${e}`)}}const Ca=({on401:i})=>async({queryKey:e})=>{const t=await fetch(e[0],{credentials:"include"});return await Pa(t),await t.json()},Oa=new ya({defaultOptions:{queries:{queryFn:Ca({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),Ea=1,Ta=1e6;let Hi=0;function Ra(){return Hi=(Hi+1)%Number.MAX_SAFE_INTEGER,Hi.toString()}const Wi=new Map,hn=i=>{if(Wi.has(i))return;const e=setTimeout(()=>{Wi.delete(i),Ht({type:"REMOVE_TOAST",toastId:i})},Ta);Wi.set(i,e)},Ia=(i,e)=>{switch(e.type){case"ADD_TOAST":return{...i,toasts:[e.toast,...i.toasts].slice(0,Ea)};case"UPDATE_TOAST":return{...i,toasts:i.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?hn(t):i.toasts.forEach(s=>{hn(s.id)}),{...i,toasts:i.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...i,toasts:[]}:{...i,toasts:i.toasts.filter(t=>t.id!==e.toastId)}}},vi=[];let bi={toasts:[]};function Ht(i){bi=Ia(bi,i),vi.forEach(e=>{e(bi)})}function Aa({...i}){const e=Ra(),t=n=>Ht({type:"UPDATE_TOAST",toast:{...n,id:e}}),s=()=>Ht({type:"DISMISS_TOAST",toastId:e});return Ht({type:"ADD_TOAST",toast:{...i,id:e,open:!0,onOpenChange:n=>{n||s()}}}),{id:e,dismiss:s,update:t}}function qr(){const[i,e]=P.useState(bi);return P.useEffect(()=>(vi.push(e),()=>{const t=vi.indexOf(e);t>-1&&vi.splice(t,1)}),[i]),{...i,toast:Aa,dismiss:t=>Ht({type:"DISMISS_TOAST",toastId:t})}}function z(...i){return ba(wa(i))}const ja=ua,Vr=P.forwardRef(({className:i,...e},t)=>g.jsx(Ir,{ref:t,className:z("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",i),...e}));Vr.displayName=Ir.displayName;const Ma=Fr("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Hr=P.forwardRef(({className:i,variant:e,...t},s)=>g.jsx(Ar,{ref:s,className:z(Ma({variant:e}),i),...t}));Hr.displayName=Ar.displayName;const Da=P.forwardRef(({className:i,...e},t)=>g.jsx(jr,{ref:t,className:z("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",i),...e}));Da.displayName=jr.displayName;const Wr=P.forwardRef(({className:i,...e},t)=>g.jsx(Mr,{ref:t,className:z("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",i),"toast-close":"",...e,children:g.jsx(_a,{className:"h-4 w-4"})}));Wr.displayName=Mr.displayName;const Gr=P.forwardRef(({className:i,...e},t)=>g.jsx(Dr,{ref:t,className:z("text-sm font-semibold",i),...e}));Gr.displayName=Dr.displayName;const Kr=P.forwardRef(({className:i,...e},t)=>g.jsx(zr,{ref:t,className:z("text-sm opacity-90",i),...e}));Kr.displayName=zr.displayName;function za(){const{toasts:i}=qr();return g.jsxs(ja,{children:[i.map(function({id:e,title:t,description:s,action:n,...r}){return g.jsxs(Hr,{...r,children:[g.jsxs("div",{className:"grid gap-1",children:[t&&g.jsx(Gr,{children:t}),s&&g.jsx(Kr,{children:s})]}),n,g.jsx(Wr,{})]},e)}),g.jsx(Vr,{})]})}const La=ha,$a=P.forwardRef(({className:i,sideOffset:e=4,...t},s)=>g.jsx(Lr,{ref:s,sideOffset:e,className:z("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",i),...t}));$a.displayName=Lr.displayName;const Jr=P.createContext(void 0);function Ua({children:i}){const[e,t]=P.useState("light");P.useEffect(()=>{const n=localStorage.getItem("theme");n&&t(n)},[]),P.useEffect(()=>{document.documentElement.classList.toggle("dark",e==="dark"),localStorage.setItem("theme",e)},[e]);const s=()=>{t(n=>n==="light"?"dark":"light")};return g.jsx(Jr.Provider,{value:{theme:e,toggleTheme:s},children:i})}function Na(){const i=P.useContext(Jr);if(!i)throw new Error("useTheme must be used within a ThemeProvider");return i}const Fa=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>Ae(async()=>{const{default:s}=await Promise.resolve().then(()=>Lt);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Vs extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Ba extends Vs{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class qa extends Vs{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Va extends Vs{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var vs;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(vs||(vs={}));var Ha=function(i,e,t,s){function n(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?r(u.value):n(u.value).then(a,c)}l((s=s.apply(i,e||[])).next())})};class Wa{constructor(e,{headers:t={},customFetch:s,region:n=vs.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=Fa(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return Ha(this,void 0,void 0,function*(){try{const{headers:n,method:r,body:o}=t;let a={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:l}).catch(p=>{throw new Ba(p)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new qa(u);if(!u.ok)throw new Va(u);let d=((s=u.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),f;return d==="application/json"?f=yield u.json():d==="application/octet-stream"?f=yield u.blob():d==="text/event-stream"?f=u:d==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(n){return{data:null,error:n}}})}}var ne={},Hs={},Di={},ti={},zi={},Li={},Ga=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},It=Ga();const Ka=It.fetch,Qr=It.fetch.bind(It),Yr=It.Headers,Ja=It.Request,Qa=It.Response,Lt=Object.freeze(Object.defineProperty({__proto__:null,Headers:Yr,Request:Ja,Response:Qa,default:Qr,fetch:Ka},Symbol.toStringTag,{value:"Module"})),Ya=ga(Lt);var $i={};Object.defineProperty($i,"__esModule",{value:!0});let Xa=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};$i.default=Xa;var Xr=ue&&ue.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Li,"__esModule",{value:!0});const Za=Xr(Ya),ec=Xr($i);let tc=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Za.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async r=>{var o,a,c;let l=null,u=null,h=null,d=r.status,f=r.statusText;if(r.ok){if(this.method!=="HEAD"){const _=await r.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=_:u=JSON.parse(_))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),m=(a=r.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&m&&m.length>1&&(h=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,d=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=await r.text();try{l=JSON.parse(y),Array.isArray(l)&&r.status===404&&(u=[],l=null,d=200,f="OK")}catch{r.status===404&&y===""?(d=204,f="No Content"):l={message:y}}if(l&&this.isMaybeSingle&&(!((c=l==null?void 0:l.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,d=200,f="OK"),l&&this.shouldThrowOnError)throw new ec.default(l)}return{error:l,data:u,count:h,status:d,statusText:f}});return this.shouldThrowOnError||(n=n.catch(r=>{var o,a,c;return{error:{message:`${(o=r==null?void 0:r.name)!==null&&o!==void 0?o:"FetchError"}: ${r==null?void 0:r.message}`,details:`${(a=r==null?void 0:r.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=r==null?void 0:r.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};Li.default=tc;var ic=ue&&ue.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(zi,"__esModule",{value:!0});const sc=ic(Li);let nc=class extends sc.default{select(e){let t=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:r=n}={}){const o=r?`${r}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const r=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:r=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,r?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};zi.default=nc;var rc=ue&&ue.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ti,"__esModule",{value:!0});const oc=rc(zi);let ac=class extends oc.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let r="";n==="plain"?r="pl":n==="phrase"?r="ph":n==="websearch"&&(r="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${r}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};ti.default=ac;var cc=ue&&ue.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Di,"__esModule",{value:!0});const Ut=cc(ti);let lc=class{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let r=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new Ut.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n="POST",r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),s||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new Ut.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:r=!0}={}){const o="POST",a=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ut.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new Ut.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Ut.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Di.default=lc;var Ui={},Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.version=void 0;Ni.version="0.0.0-automated";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.DEFAULT_HEADERS=void 0;const uc=Ni;Ui.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${uc.version}`};var Zr=ue&&ue.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Hs,"__esModule",{value:!0});const hc=Zr(Di),dc=Zr(ti),fc=Ui;let pc=class eo{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},fc.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new hc.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new eo(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:r}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;s||n?(o=s?"HEAD":"GET",Object.entries(t).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{a.searchParams.append(u,h)})):(o="POST",c=t);const l=Object.assign({},this.headers);return r&&(l.Prefer=`count=${r}`),new dc.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Hs.default=pc;var $t=ue&&ue.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ne,"__esModule",{value:!0});ne.PostgrestError=ne.PostgrestBuilder=ne.PostgrestTransformBuilder=ne.PostgrestFilterBuilder=ne.PostgrestQueryBuilder=ne.PostgrestClient=void 0;const to=$t(Hs);ne.PostgrestClient=to.default;const io=$t(Di);ne.PostgrestQueryBuilder=io.default;const so=$t(ti);ne.PostgrestFilterBuilder=so.default;const no=$t(zi);ne.PostgrestTransformBuilder=no.default;const ro=$t(Li);ne.PostgrestBuilder=ro.default;const oo=$t($i);ne.PostgrestError=oo.default;var gc=ne.default={PostgrestClient:to.default,PostgrestQueryBuilder:io.default,PostgrestFilterBuilder:so.default,PostgrestTransformBuilder:no.default,PostgrestBuilder:ro.default,PostgrestError:oo.default};const{PostgrestClient:mc,PostgrestQueryBuilder:by,PostgrestFilterBuilder:wy,PostgrestTransformBuilder:_y,PostgrestBuilder:xy,PostgrestError:ky}=gc;let bs;typeof window>"u"?bs=require("ws"):bs=window.WebSocket;const yc="2.11.10",vc={"X-Client-Info":`realtime-js/${yc}`},bc="1.0.0",ao=1e4,wc=1e3;var Pt;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Pt||(Pt={}));var Z;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Z||(Z={}));var me;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(me||(me={}));var ws;(function(i){i.websocket="websocket"})(ws||(ws={}));var Xe;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Xe||(Xe={}));class _c{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),r=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=s.decode(e.slice(o,o+n));o=o+n;const c=s.decode(e.slice(o,o+r));o=o+r;const l=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class co{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var j;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(j||(j={}));const dn=(i,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((r,o)=>(r[o]=xc(o,i,e,n),r),{})},xc=(i,e,t,s)=>{const n=e.find(a=>a.name===i),r=n==null?void 0:n.type,o=t[i];return r&&!s.includes(r)?lo(r,o):_s(o)},lo=(i,e)=>{if(i.charAt(0)==="_"){const t=i.slice(1,i.length);return Cc(e,t)}switch(i){case j.bool:return kc(e);case j.float4:case j.float8:case j.int2:case j.int4:case j.int8:case j.numeric:case j.oid:return Sc(e);case j.json:case j.jsonb:return Pc(e);case j.timestamp:return Oc(e);case j.abstime:case j.date:case j.daterange:case j.int4range:case j.int8range:case j.money:case j.reltime:case j.text:case j.time:case j.timestamptz:case j.timetz:case j.tsrange:case j.tstzrange:return _s(e);default:return _s(e)}},_s=i=>i,kc=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Sc=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},Pc=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},Cc=(i,e)=>{if(typeof i!="string")return i;const t=i.length-1,s=i[t];if(i[0]==="{"&&s==="}"){let r;const o=i.slice(1,t);try{r=JSON.parse("["+o+"]")}catch{r=o?o.split(","):[]}return r.map(a=>lo(e,a))}return i},Oc=i=>typeof i=="string"?i.replace(" ","T"):i,uo=i=>{let e=i;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};let Gi=class{constructor(e,t,s={},n=ao){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var fn;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(fn||(fn={}));class Wt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wt.syncState(this.state,n,r,o),this.pendingDiffs.forEach(c=>{this.state=Wt.syncDiff(this.state,c,r,o)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},n=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Wt.syncDiff(this.state,n,r,o),a())}),this.onJoin((n,r,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:r,newPresences:o})}),this.onLeave((n,r,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:r,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const r=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(r,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const h=r[l];if(h){const d=u.map(m=>m.presence_ref),f=h.map(m=>m.presence_ref),p=u.filter(m=>f.indexOf(m.presence_ref)<0),y=h.filter(m=>d.indexOf(m.presence_ref)<0);p.length>0&&(a[l]=p),y.length>0&&(c[l]=y)}else a[l]=u}),this.syncDiff(r,{joins:a,leaves:c},s,n)}static syncDiff(e,t,s,n){const{joins:r,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(r,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const h=e[a].map(f=>f.presence_ref),d=u.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...d)}s(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(h=>h.presence_ref);l=l.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=l,n(a,l,c),l.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var pn;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(pn||(pn={}));var gn;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(gn||(gn={}));var Ee;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Ee||(Ee={}));class Ws{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Z.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Gi(this,me.join,this.params,this.timeout),this.rejoinTimer=new co(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Z.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Z.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this._on(me.reply,{},(n,r)=>{this._trigger(this._replyEventName(r),n)}),this.presence=new Wt(this),this.broadcastEndpointURL=uo(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:r,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Ee.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Ee.CLOSED));const c={},l={broadcast:r,presence:o,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&n!==void 0?n:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(Ee.SUBSCRIBED);return}else{const d=this.bindings.postgres_changes,f=(h=d==null?void 0:d.length)!==null&&h!==void 0?h:0,p=[];for(let y=0;y<f;y++){const m=d[y],{filter:{event:_,schema:w,table:v,filter:b}}=m,k=u&&u[y];if(k&&k.event===_&&k.schema===w&&k.table===v&&k.filter===b)p.push(Object.assign(Object.assign({},m),{id:k.id}));else{this.unsubscribe(),this.state=Z.errored,e==null||e(Ee.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Ee.SUBSCRIBED);return}}).receive("error",u=>{this.state=Z.errored,e==null||e(Ee.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ee.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:r,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=l.body)===null||n===void 0?void 0:n.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var o,a,c;const l=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&r("ok"),l.receive("ok",()=>r("ok")),l.receive("error",()=>r("error")),l.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Z.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(me.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(s=>{const n=new Gi(this,me.leave,{},e);n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const n=new AbortController,r=setTimeout(()=>n.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(r),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Gi(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,r;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=me;if(s&&[a,c,l,u].indexOf(o)>=0&&s!==this._joinRef())return;let d=this._onMessage(o,t,s);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(f=>{var p,y,m;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((m=(y=f.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(f=>f.callback(d,s)):(r=this.bindings[o])===null||r===void 0||r.filter(f=>{var p,y,m,_,w,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const b=f.id,k=(p=f.filter)===null||p===void 0?void 0:p.event;return b&&((y=t.ids)===null||y===void 0?void 0:y.includes(b))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((m=t.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const b=(w=(_=f==null?void 0:f.filter)===null||_===void 0?void 0:_.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return b==="*"||b===((v=t==null?void 0:t.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const p=d.data,{schema:y,table:m,commit_timestamp:_,type:w,errors:v}=p;d=Object.assign(Object.assign({},{schema:y,table:m,commit_timestamp:_,eventType:w,new:{},old:{},errors:v}),this._getPayloadRecords(p))}f.callback(d,s)})}_isClosed(){return this.state===Z.closed}_isJoined(){return this.state===Z.joined}_isJoining(){return this.state===Z.joining}_isLeaving(){return this.state===Z.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),r={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(r):this.bindings[n]=[r],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var r;return!(((r=n.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===s&&Ws.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(me.close,{},e)}_onError(e){this._on(me.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Z.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=dn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=dn(e.columns,e.old_record)),t}}const mn=()=>{},Ec=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Tc{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=vc,this.params={},this.timeout=ao,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=mn,this.ref=0,this.logger=mn,this.conn=null,this.sendBuffer=[],this.serializer=new _c,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=r=>{let o;return r?o=r:typeof fetch>"u"?o=(...a)=>Ae(async()=>{const{default:c}=await Promise.resolve().then(()=>Lt);return{default:c}},void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${ws.websocket}`,this.httpEndpoint=uo(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:r=>[1e3,2e3,5e3,1e4][r-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(r,o)=>o(JSON.stringify(r)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new co(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=bs),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new Rc(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:bc}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(s=>s._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Pt.connecting:return Xe.Connecting;case Pt.open:return Xe.Open;case Pt.closing:return Xe.Closing;default:return Xe.Closed}}isConnected(){return this.connectionState()===Xe.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(r=>r.topic===s);if(n)return n;{const r=new Ws(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:s,payload:n,ref:r}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${t} ${s} (${r})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),s.joinedOnce&&s._isJoined()&&s._push(me.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(wc,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:r,ref:o}=t;s==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${r.status||""} ${s} ${n} ${o&&"("+o+")"||""}`,r),Array.from(this.channels).filter(a=>a._isMember(s)).forEach(a=>a._trigger(n,r,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(me.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([Ec],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class Rc{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Pt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class Gs extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function q(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class Ic extends Gs{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class xs extends Gs{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Ac=function(i,e,t,s){function n(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?r(u.value):n(u.value).then(a,c)}l((s=s.apply(i,e||[])).next())})};const ho=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>Ae(async()=>{const{default:s}=await Promise.resolve().then(()=>Lt);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},jc=()=>Ac(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ae(()=>Promise.resolve().then(()=>Lt),void 0)).Response:Response}),ks=i=>{if(Array.isArray(i))return i.map(t=>ks(t));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,r=>r.toUpperCase().replace(/[-_]/g,""));e[n]=ks(s)}),e};var lt=function(i,e,t,s){function n(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?r(u.value):n(u.value).then(a,c)}l((s=s.apply(i,e||[])).next())})};const Ki=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Mc=(i,e,t)=>lt(void 0,void 0,void 0,function*(){const s=yield jc();i instanceof s&&!(t!=null&&t.noResolveJson)?i.json().then(n=>{e(new Ic(Ki(n),i.status||500))}).catch(n=>{e(new xs(Ki(n),n))}):e(new xs(Ki(i),i))}),Dc=(i,e,t,s)=>{const n={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),t))};function ii(i,e,t,s,n,r){return lt(this,void 0,void 0,function*(){return new Promise((o,a)=>{i(t,Dc(e,s,n,r)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Mc(c,a,s))})})}function Pi(i,e,t,s){return lt(this,void 0,void 0,function*(){return ii(i,"GET",e,t,s)})}function Me(i,e,t,s,n){return lt(this,void 0,void 0,function*(){return ii(i,"POST",e,s,n,t)})}function zc(i,e,t,s,n){return lt(this,void 0,void 0,function*(){return ii(i,"PUT",e,s,n,t)})}function Lc(i,e,t,s){return lt(this,void 0,void 0,function*(){return ii(i,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function fo(i,e,t,s,n){return lt(this,void 0,void 0,function*(){return ii(i,"DELETE",e,s,n,t)})}var ie=function(i,e,t,s){function n(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?r(u.value):n(u.value).then(a,c)}l((s=s.apply(i,e||[])).next())})};const $c={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Uc{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=ho(n)}uploadOrUpdate(e,t,s,n){return ie(this,void 0,void 0,function*(){try{let r;const o=Object.assign(Object.assign({},yn),n);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(r=new FormData,r.append("cacheControl",o.cacheControl),c&&r.append("metadata",this.encodeMetadata(c)),r.append("",s)):typeof FormData<"u"&&s instanceof FormData?(r=s,r.append("cacheControl",o.cacheControl),c&&r.append("metadata",this.encodeMetadata(c))):(r=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(a=Object.assign(Object.assign({},a),n.headers));const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:r,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),d=yield h.json();return h.ok?{data:{path:l,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(r){if(q(r))return{data:null,error:r};throw r}})}upload(e,t,s){return ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return ie(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),o=this._getFinalPath(r),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let c;const l=Object.assign({upsert:yn.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",l.cacheControl)):(c=s,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),d=yield h.json();return h.ok?{data:{path:r,fullPath:d.Key},error:null}:{data:null,error:d}}catch(c){if(q(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return ie(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const r=yield Me(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),o=new URL(this.url+r.url),a=o.searchParams.get("token");if(!a)throw new Gs("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(s){if(q(s))return{data:null,error:s};throw s}})}update(e,t,s){return ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return ie(this,void 0,void 0,function*(){try{return{data:yield Me(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}})}copy(e,t,s){return ie(this,void 0,void 0,function*(){try{return{data:{path:(yield Me(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return ie(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),r=yield Me(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${o}`)},{data:r,error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return ie(this,void 0,void 0,function*(){try{const n=yield Me(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),r=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${r}`):null})),error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}})}download(e,t){return ie(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=r?`?${r}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Pi(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(q(a))return{data:null,error:a};throw a}})}info(e){return ie(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Pi(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ks(s),error:null}}catch(s){if(q(s))return{data:null,error:s};throw s}})}exists(e){return ie(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Lc(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(q(s)&&s instanceof xs){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],r=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";r!==""&&n.push(r);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&n.push(c);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${l}`)}}}remove(e){return ie(this,void 0,void 0,function*(){try{return{data:yield fo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(q(t))return{data:null,error:t};throw t}})}list(e,t,s){return ie(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},$c),t),{prefix:e||""});return{data:yield Me(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(q(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Nc="2.7.1",Fc={"X-Client-Info":`storage-js/${Nc}`};var pt=function(i,e,t,s){function n(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?r(u.value):n(u.value).then(a,c)}l((s=s.apply(i,e||[])).next())})};class Bc{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Fc),t),this.fetch=ho(s)}listBuckets(){return pt(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(q(e))return{data:null,error:e};throw e}})}getBucket(e){return pt(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(q(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return pt(this,void 0,void 0,function*(){try{return{data:yield Me(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(q(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return pt(this,void 0,void 0,function*(){try{return{data:yield zc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(q(s))return{data:null,error:s};throw s}})}emptyBucket(e){return pt(this,void 0,void 0,function*(){try{return{data:yield Me(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(q(t))return{data:null,error:t};throw t}})}deleteBucket(e){return pt(this,void 0,void 0,function*(){try{return{data:yield fo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(q(t))return{data:null,error:t};throw t}})}}class qc extends Bc{constructor(e,t={},s){super(e,t,s)}from(e){return new Uc(this.url,this.headers,e,this.fetch)}}const Vc="2.50.0";let qt="";typeof Deno<"u"?qt="deno":typeof document<"u"?qt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?qt="react-native":qt="node";const Hc={"X-Client-Info":`supabase-js-${qt}/${Vc}`},Wc={headers:Hc},Gc={schema:"public"},Kc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Jc={};var Qc=function(i,e,t,s){function n(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?r(u.value):n(u.value).then(a,c)}l((s=s.apply(i,e||[])).next())})};const Yc=i=>{let e;return i?e=i:typeof fetch>"u"?e=Qr:e=fetch,(...t)=>e(...t)},Xc=()=>typeof Headers>"u"?Yr:Headers,Zc=(i,e,t)=>{const s=Yc(t),n=Xc();return(r,o)=>Qc(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:i;let l=new n(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",i),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),s(r,Object.assign(Object.assign({},o),{headers:l}))})};var el=function(i,e,t,s){function n(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?r(u.value):n(u.value).then(a,c)}l((s=s.apply(i,e||[])).next())})};function tl(i){return i.endsWith("/")?i:i+"/"}function il(i,e){var t,s;const{db:n,auth:r,realtime:o,global:a}=i,{db:c,auth:l,realtime:u,global:h}=e,d={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(t=h==null?void 0:h.headers)!==null&&t!==void 0?t:{}),(s=a==null?void 0:a.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>el(this,void 0,void 0,function*(){return""})};return i.accessToken?d.accessToken=i.accessToken:delete d.accessToken,d}const po="2.70.0",_t=30*1e3,Ss=3,Ji=Ss*_t,sl="http://localhost:9999",nl="supabase.auth.token",rl={"X-Client-Info":`gotrue-js/${po}`},Ps="X-Supabase-Api-Version",go={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ol=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,al=6e5;class Ks extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function O(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class cl extends Ks{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function ll(i){return O(i)&&i.name==="AuthApiError"}class mo extends Ks{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Be extends Ks{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class je extends Be{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ul(i){return O(i)&&i.name==="AuthSessionMissingError"}class ni extends Be{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ri extends Be{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class oi extends Be{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hl(i){return O(i)&&i.name==="AuthImplicitGrantRedirectError"}class vn extends Be{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Cs extends Be{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Qi(i){return O(i)&&i.name==="AuthRetryableFetchError"}class bn extends Be{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Gt extends Be{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ci="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),wn=` 	
\r=`.split(""),dl=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<wn.length;e+=1)i[wn[e].charCodeAt(0)]=-2;for(let e=0;e<Ci.length;e+=1)i[Ci[e].charCodeAt(0)]=e;return i})();function _n(i,e,t){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Ci[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Ci[s]),e.queuedBits-=6}}function yo(i,e,t){const s=dl[i];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function xn(i){const e=[],t=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},r=o=>{gl(o,s,t)};for(let o=0;o<i.length;o+=1)yo(i.charCodeAt(o),n,r);return e.join("")}function fl(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function pl(i,e){for(let t=0;t<i.length;t+=1){let s=i.charCodeAt(t);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(i.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}fl(s,e)}}function gl(i,e,t){if(e.utf8seq===0){if(i<=127){t(i);return}for(let s=1;s<6;s+=1)if(!(i>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function ml(i){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<i.length;n+=1)yo(i.charCodeAt(n),t,s);return new Uint8Array(e)}function yl(i){const e=[];return pl(i,t=>e.push(t)),new Uint8Array(e)}function vl(i){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};return i.forEach(n=>_n(n,t,s)),_n(null,t,s),e.join("")}function bl(i){return Math.round(Date.now()/1e3)+i}function wl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=Math.random()*16|0;return(i=="x"?e:e&3|8).toString(16)})}const pe=()=>typeof window<"u"&&typeof document<"u",Ve={tested:!1,writable:!1},Kt=()=>{if(!pe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ve.tested)return Ve.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Ve.tested=!0,Ve.writable=!0}catch{Ve.tested=!0,Ve.writable=!1}return Ve.writable};function _l(i){const e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,r)=>{e[r]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const vo=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>Ae(async()=>{const{default:s}=await Promise.resolve().then(()=>Lt);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},xl=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",bo=async(i,e,t)=>{await i.setItem(e,JSON.stringify(t))},ai=async(i,e)=>{const t=await i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ci=async(i,e)=>{await i.removeItem(e)};class Fi{constructor(){this.promise=new Fi.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Fi.promiseConstructor=Promise;function Yi(i){const e=i.split(".");if(e.length!==3)throw new Gt("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!ol.test(e[s]))throw new Gt("JWT not in base64url format");return{header:JSON.parse(xn(e[0])),payload:JSON.parse(xn(e[1])),signature:ml(e[2]),raw:{header:e[0],payload:e[1]}}}async function kl(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function Sl(i,e){return new Promise((s,n)=>{(async()=>{for(let r=0;r<1/0;r++)try{const o=await i(r);if(!e(r,null,o)){s(o);return}}catch(o){if(!e(r,o)){n(o);return}}})()})}function Pl(i){return("0"+i.toString(16)).substr(-2)}function Cl(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let r=0;r<56;r++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,Pl).join("")}async function Ol(i){const t=new TextEncoder().encode(i),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(r=>String.fromCharCode(r)).join("")}async function El(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const t=await Ol(i);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gt(i,e,t=!1){const s=Cl();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await bo(i,`${e}-code-verifier`,n);const r=await El(s);return[r,s===r?"plain":"s256"]}const Tl=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Rl(i){const e=i.headers.get(Ps);if(!e||!e.match(Tl))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Il(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function Al(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const jl=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function mt(i){if(!jl.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Ml=function(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(i);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(i,s[n])&&(t[s[n]]=i[s[n]]);return t};const Qe=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Dl=[502,503,504];async function kn(i){var e;if(!xl(i))throw new Cs(Qe(i),0);if(Dl.includes(i.status))throw new Cs(Qe(i),i.status);let t;try{t=await i.json()}catch(r){throw new mo(Qe(r),r)}let s;const n=Rl(i);if(n&&n.getTime()>=go["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new bn(Qe(t),i.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new je}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0))throw new bn(Qe(t),i.status,t.weak_password.reasons);throw new cl(Qe(t),i.status||500,s)}const zl=(i,e,t,s)=>{const n={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function E(i,e,t,s){var n;const r=Object.assign({},s==null?void 0:s.headers);r[Ps]||(r[Ps]=go["2024-01-01"].name),s!=null&&s.jwt&&(r.Authorization=`Bearer ${s.jwt}`);const o=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Ll(i,e,t+a,{headers:r,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Ll(i,e,t,s,n,r){const o=zl(e,s,n,r);let a;try{a=await i(t,Object.assign({},o))}catch(c){throw console.error(c),new Cs(Qe(c),0)}if(a.ok||await kn(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(c){await kn(c)}}function Oe(i){var e;let t=null;Fl(i)&&(t=Object.assign({},i),i.expires_at||(t.expires_at=bl(i.expires_in)));const s=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:t,user:s},error:null}}function Sn(i){const e=Oe(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=i.weak_password),e}function De(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function $l(i){return{data:i,error:null}}function Ul(i){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:r}=i,o=Ml(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:r},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function Nl(i){return i}function Fl(i){return i.access_token&&i.refresh_token&&i.expires_in}const Xi=["global","local","others"];var Bl=function(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(i);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(i,s[n])&&(t[s[n]]=i[s[n]]);return t};class ql{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=vo(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Xi[0]){if(Xi.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Xi.join(", ")}`);try{return await E(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(O(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await E(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:De})}catch(s){if(O(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Bl(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await E(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Ul,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(O(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await E(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:De})}catch(t){if(O(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,r,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await E(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(r=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:""},xform:Nl});if(u.error)throw u.error;const h=await u.json(),d=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(p.split(";")[1].split("=")[1]);l[`${m}Page`]=y}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(l){if(O(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){mt(e);try{return await E(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:De})}catch(t){if(O(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){mt(e);try{return await E(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:De})}catch(s){if(O(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){mt(e);try{return await E(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:De})}catch(s){if(O(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){mt(e.userId);try{const{data:t,error:s}=await E(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(O(t))return{data:null,error:t};throw t}}async _deleteFactor(e){mt(e.userId),mt(e.id);try{return{data:await E(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(O(t))return{data:null,error:t};throw t}}}const Vl={getItem:i=>Kt()?globalThis.localStorage.getItem(i):null,setItem:(i,e)=>{Kt()&&globalThis.localStorage.setItem(i,e)},removeItem:i=>{Kt()&&globalThis.localStorage.removeItem(i)}};function Pn(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}function Hl(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const yt={debug:!!(globalThis&&Kt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class wo extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Wl extends wo{}async function Gl(i,e,t){yt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),yt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){yt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,n.name);try{return await t()}finally{yt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,n.name)}}else{if(e===0)throw yt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new Wl(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(yt.debug)try{const r=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(r,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Hl();const Kl={url:sl,storageKey:nl,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:rl,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Cn(i,e,t){return await t()}class Qt{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Qt.nextInstanceID,Qt.nextInstanceID+=1,this.instanceID>0&&pe()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Kl),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new ql({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=vo(n.fetch),this.lock=n.lock||Cn,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:pe()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Gl:this.lock=Cn,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Kt()?this.storage=Vl:(this.memoryStorage={},this.storage=Pn(this.memoryStorage)):(this.memoryStorage={},this.storage=Pn(this.memoryStorage)),pe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async r=>{this._debug("received broadcast notification from other tab or client",r),await this._notifyAllSubscribers(r.data.event,r.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${po}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=_l(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),pe()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:r}=await this._getSessionFromURL(t,s);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),hl(r)){const c=(e=r.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:r}}return await this._removeSession(),{error:r}}const{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return O(t)?{error:t}:{error:new mo("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const r=await E(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Oe}),{data:o,error:a}=r;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(r){if(O(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(e){var t,s,n;try{let r;if("email"in e){const{email:u,password:h,options:d}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await gt(this.storage,this.storageKey)),r=await E(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:u,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:p},xform:Oe})}else if("phone"in e){const{phone:u,password:h,options:d}=e;r=await E(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},channel:(n=d==null?void 0:d.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Oe})}else throw new ri("You must provide either an email or phone number and a password");const{data:o,error:a}=r;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(r){if(O(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:o,options:a}=e;t=await E(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Sn})}else if("phone"in e){const{phone:r,password:o,options:a}=e;t=await E(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Sn})}else throw new ri("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new ni}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(O(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,r;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(r=e.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,n,r,o,a,c,l,u,h,d,f;let p,y;if("message"in e)p=e.message,y=e.signature;else{const{chain:m,wallet:_,statement:w,options:v}=e;let b;if(pe())if(typeof _=="object")b=_;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))b=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=_}const k=new URL((t=v==null?void 0:v.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in b&&b.signIn){const S=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),w?{statement:w}:null));let I;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")I=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)I=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)p=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),y=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${k.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(n=(s=v==null?void 0:v.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((r=v==null?void 0:v.signInWithSolana)===null||r===void 0)&&r.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const S=await b.signMessage(new TextEncoder().encode(p),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=S}}try{const{data:m,error:_}=await E(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:vl(y)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Oe});if(_)throw _;return!m||!m.session||!m.user?{data:{user:null,session:null},error:new ni}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:Object.assign({},m),error:_})}catch(m){if(O(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await ai(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:r,error:o}=await E(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Oe});if(await ci(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!r||!r.session||!r.user?{data:{user:null,session:null,redirectType:null},error:new ni}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign(Object.assign({},r),{redirectType:n??null}),error:o})}catch(r){if(O(r))return{data:{user:null,session:null,redirectType:null},error:r};throw r}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:r,nonce:o}=e,a=await E(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:r,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Oe}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ni}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(t){if(O(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,r,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await gt(this.storage,this.storageKey));const{error:h}=await E(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await E(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new ri("You must provide either an email or phone number.")}catch(a){if(O(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,s;try{let n,r;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,r=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:a}=await E(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:n,xform:Oe});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(n){if(O(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let r=null,o=null;return this.flowType==="pkce"&&([r,o]=await gt(this.storage,this.storageKey)),await E(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:o}),headers:this.headers,xform:$l})}catch(r){if(O(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new je;const{error:n}=await E(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(O(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:r}=e,{error:o}=await E(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},redirectTo:r==null?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:n,options:r}=e,{data:o,error:a}=await E(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new ri("You must provide either an email or phone number and a type")}catch(t){if(O(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ai(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Ji:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:n,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await E(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:De}):await this._useSession(async t=>{var s,n,r;const{data:o,error:a}=t;if(a)throw a;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new je}:await E(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0,xform:De})})}catch(t){if(O(t))return ul(t)&&(await this._removeSession(),await ci(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:r}=s;if(r)throw r;if(!n.session)throw new je;const o=n.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await gt(this.storage,this.storageKey));const{data:l,error:u}=await E(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:De});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(O(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new je;const t=Date.now()/1e3;let s=t,n=!0,r=null;const{payload:o}=Yi(e.access_token);if(o.exp&&(s=o.exp,n=s<=t),n){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};r=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;r={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(t){if(O(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new je;const{session:n,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(O(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!pe())throw new oi("No browser detected.");if(e.error||e.error_description||e.error_code)throw new oi(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new vn("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new oi("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new vn("No code detected.");const{data:w,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:r,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!r||!a||!o||!l)throw new oi("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let d=u+h;c&&(d=parseInt(c));const f=d-u;f*1e3<=_t&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const p=d-h;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,u);const{data:y,error:m}=await this._getUser(r);if(m)throw m;const _={provider_token:s,provider_refresh_token:n,access_token:r,expires_in:h,expires_at:d,refresh_token:o,token_type:l,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:e.type},error:null}}catch(s){if(O(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ai(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:r}=t;if(r)return{error:r};const o=(s=n.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(ll(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await ci(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=wl(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:r},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(r){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await gt(this.storage,this.storageKey,!0));try{return await E(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(O(r))return{data:null,error:r};throw r}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(O(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async r=>{var o,a,c,l,u;const{data:h,error:d}=r;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await E(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return pe()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(O(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:r,error:o}=t;if(o)throw o;return await E(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=r.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(O(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Sl(async n=>(n>0&&await kl(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await E(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Oe})),(n,r)=>{const o=200*Math.pow(2,n);return r&&Qi(r)&&Date.now()+o-s<_t})}catch(s){if(this._debug(t,"error",s),O(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),pe()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await ai(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Ji;if(this._debug(t,`session has${n?"":" not"} expired with margin of ${Ji}s`),n){if(this.autoRefreshToken&&s.refresh_token){const{error:r}=await this._callRefreshToken(s.refresh_token);r&&(console.error(r),Qi(r)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",r),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new je;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Fi;const{data:r,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!r.session)throw new je;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const a={session:r.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(r){if(this._debug(n,"error",r),O(r)){const o={session:null,error:r};return Qi(r)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(r),r}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(c){r.push(c)}});if(await Promise.all(o),r.length>0){for(let a=0;a<r.length;a+=1)console.error(r[a]);throw r[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await bo(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ci(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&pe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),_t);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/_t);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${_t}ms, refresh threshold is ${Ss} ticks`),n<=Ss&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof wo)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[r,o]=await gt(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(a.toString())}if(s!=null&&s.queryParams){const r=new URLSearchParams(s.queryParams);n.push(r.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:r}=t;return r?{data:null,error:r}:await E(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(O(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:r,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await E(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(O(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:r}=t;if(r)return{data:null,error:r};const{data:o,error:a}=await E(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(O(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:r}=t;return r?{data:null,error:r}:await E(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(O(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),r=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:n,phone:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:r}=e;if(r)return{data:null,error:r};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Yi(n.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(o=>o.kid===e);if(s||(s=this.jwks.keys.find(o=>o.kid===e),s&&this.jwks_cached_at+al>Date.now()))return s;const{data:n,error:r}=await E(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(r)throw r;if(!n.keys||n.keys.length===0)throw new Gt("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),s=n.keys.find(o=>o.kid===e),!s)throw new Gt("No matching signing key found in JWKS");return s}async getClaims(e,t={keys:[]}){try{let s=e;if(!s){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};s=f.session.access_token}const{header:n,payload:r,signature:o,raw:{header:a,payload:c}}=Yi(s);if(Il(r.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(s);if(f)throw f;return{data:{claims:r,header:n,signature:o},error:null}}const l=Al(n.alg),u=await this.fetchJwk(n.kid,t),h=await crypto.subtle.importKey("jwk",u,l,!0,["verify"]);if(!await crypto.subtle.verify(l,h,o,yl(`${a}.${c}`)))throw new Gt("Invalid JWT signature");return{data:{claims:r,header:n,signature:o},error:null}}catch(s){if(O(s))return{data:null,error:s};throw s}}}Qt.nextInstanceID=0;const Jl=Qt;class Ql extends Jl{constructor(e){super(e)}}var Yl=function(i,e,t,s){function n(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{l(s.next(u))}catch(h){o(h)}}function c(u){try{l(s.throw(u))}catch(h){o(h)}}function l(u){u.done?r(u.value):n(u.value).then(a,c)}l((s=s.apply(i,e||[])).next())})};class Xl{constructor(e,t,s){var n,r,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=tl(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:Gc,realtime:Jc,auth:Object.assign(Object.assign({},Kc),{storageKey:l}),global:Wc},h=il(s??{},u);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(r=h.global.headers)!==null&&r!==void 0?r:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=Zc(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new mc(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Wa(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new qc(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Yl(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:r,flowType:o,lock:a,debug:c},l,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ql({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),l),storageKey:r,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Tc(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Zl=(i,e,t)=>new Xl(i,e,t),_o="https://xutnntqipgbbmegpuwfc.supabase.co",xo="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh1dG5udHFpcGdiYm1lZ3B1d2ZjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg2NjcyOTIsImV4cCI6MjA2NDI0MzI5Mn0.VHHLT_Zev5Sc4xitBTRsFIt4tWjoNOFILDr0DYLKSZY",ko=_o.includes("supabase.co"),So=xo.length>20,Js=!!(ko&&So);console.log("Supabase Config - URL:","set");console.log("Supabase Config - Key:","set");console.log("Supabase Config - Valid URL:",ko);console.log("Supabase Config - Valid Key:",So);console.log("Supabase Config - Configured:",Js);const U=Js?Zl(_o,xo):null,eu=()=>Js,Nt={signUp:async(i,e,t,s)=>{if(!U)throw new Error("Supabase is not configured. Please add VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY to your .env file.");const{data:n,error:r}=await U.auth.signUp({email:i,password:e});if(r)throw r;if(n.user&&!r){const{error:o}=await U.from("users").insert({id:n.user.id,email:n.user.email,full_name:t,phone:s});o&&console.error("Error creating user profile:",o)}return{data:n,error:r}},signIn:async(i,e)=>{if(!U)throw new Error("Supabase is not configured. Please add VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY to your .env file.");const{data:t,error:s}=await U.auth.signInWithPassword({email:i,password:e});if(!s&&t.user){const{data:n}=await U.from("users").select("id").eq("id",t.user.id).single();n||await U.from("users").insert({id:t.user.id,email:t.user.email}),await U.from("users").update({last_seen:new Date().toISOString()}).eq("id",t.user.id)}return{data:t,error:s}},signOut:async()=>{if(!U)throw new Error("Supabase is not configured. Please add VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY to your .env file.");return await U.auth.signOut()},getUser:()=>U?U.auth.getUser():Promise.resolve({data:{user:null},error:null}),getSession:()=>U?U.auth.getSession():Promise.resolve({data:{session:null},error:null}),onAuthStateChange:i=>U?U.auth.onAuthStateChange(i):{data:{subscription:{unsubscribe:()=>{}}}}},On={get:async i=>{if(!U)throw new Error("Supabase is not configured. Please add VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY to your .env file.");const{data:e,error:t}=await U.from("users").select("*").eq("id",i).single();return t?(console.error("Error fetching user profile:",t),null):e},update:async(i,e)=>{if(!U)throw new Error("Supabase is not configured. Please add VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY to your .env file.");const{data:t,error:s}=await U.from("users").update({...e,updated_at:new Date().toISOString(),last_seen:new Date().toISOString()}).eq("id",i).select().single();if(s)throw s;return t}},Po=P.createContext(void 0);function tu({children:i}){const[e,t]=P.useState(null),[s,n]=P.useState(null),[r,o]=P.useState(null),[a,c]=P.useState(!0),l=eu(),u=async w=>{if(l)try{console.log("Auth Context - Starting profile fetch for:",w);const v=await On.get(w);console.log("Auth Context - Profile data received:",v),o(v)}catch(v){console.error("Error fetching profile:",v),o(null)}},h=async(w,v)=>{console.log("Auth Context - handleAuthStateChange called:",{event:w,hasSession:!!v,hasUser:!!(v!=null&&v.user),currentLoading:a});try{n(v),t((v==null?void 0:v.user)??null),v!=null&&v.user?(console.log("Auth Context - User signed in, fetching profile for:",v.user.id),u(v.user.id).then(()=>{console.log("Auth Context - Profile fetched successfully")}).catch(b=>{console.error("Error fetching profile after auth change:",b),o(null)})):(console.log("Auth Context - No user, clearing profile"),o(null))}catch(b){console.error("Auth Context - Error in handleAuthStateChange:",b)}finally{console.log("Auth Context - Setting loading to false"),c(!1)}};P.useEffect(()=>{if(console.log("Auth Context - Initializing, authEnabled:",l),!l){console.log("Auth Context - Auth not enabled"),c(!1),t(null),n(null),o(null);return}let w=!0;const v=async()=>{try{console.log("Auth Context - Getting initial session...");const{data:{session:k},error:S}=await Nt.getSession();if(!w)return;if(console.log("Auth Context - Initial session result:",{hasSession:!!k,hasUser:!!(k!=null&&k.user),error:S==null?void 0:S.message}),S){console.error("Auth Context - Session error:",S),await h("SESSION_ERROR",null);return}await h("INITIAL_SESSION",k)}catch(k){console.error("Auth Context - Error getting initial session:",k),w&&await h("INIT_ERROR",null)}},{data:{subscription:b}}=Nt.onAuthStateChange(async(k,S)=>{w&&(console.log("Auth Context - onAuthStateChange triggered:",k),await h(k,S))});return v(),()=>{w=!1,b.unsubscribe()}},[l]);const _={user:e,session:s,profile:r,loading:a,authEnabled:l,signIn:async(w,v)=>{console.log("Auth Context - Starting signIn");try{const{error:b}=await Nt.signIn(w,v);if(b)throw b;console.log("Auth Context - SignIn request successful")}catch(b){throw console.error("Auth Context - SignIn failed:",b),b}},signUp:async(w,v,b,k)=>{console.log("Auth Context - Starting signUp");try{const{error:S}=await Nt.signUp(w,v,b,k);if(S)throw S;console.log("Auth Context - SignUp request successful")}catch(S){throw console.error("Auth Context - SignUp failed:",S),S}},signOut:async()=>{console.log("Auth Context - Starting signOut");try{t(null),n(null),o(null),localStorage.removeItem("activeThreadId"),localStorage.removeItem("forceNewThread");const{error:w}=await Nt.signOut();if(w)throw w;console.log("Auth Context - SignOut successful")}catch(w){throw console.error("Auth Context - SignOut failed:",w),w}},updateProfile:async w=>{if(!e)throw new Error("No user logged in");try{const v=await On.update(e.id,w);o(v)}catch(v){throw v}},refreshProfile:async()=>{if(!(!e||!l))try{await u(e.id)}catch(w){console.error("Error refreshing profile:",w)}}};return g.jsx(Po.Provider,{value:_,children:i})}function Qs(){const i=P.useContext(Po);if(i===void 0)throw new Error("useAuth must be used within an AuthProvider");return i}function wi({className:i,size:e="md",overlay:t=!1,text:s}){const n={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"},r=g.jsxs("div",{className:z("flex flex-col items-center justify-center gap-2",i),children:[g.jsx(ys,{className:z("animate-spin text-gray-600 dark:text-gray-300",n[e])}),s&&g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s})]});return t?g.jsx("div",{className:"fixed inset-0 bg-white/80 dark:bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:r}):g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white dark:bg-black",children:r})}function Ft({children:i,requireAuth:e=!0}){const{user:t,loading:s,authEnabled:n}=Qs(),[,r]=qs();return console.log("AuthGuard render:",{loading:s,authEnabled:n,user:!!t,requireAuth:e}),P.useEffect(()=>{s||(e?(!n||!t)&&(console.log("AuthGuard: Redirecting to /auth (no auth)"),r("/auth")):n&&t&&(console.log("AuthGuard: Redirecting to /app (already authenticated)"),r("/app")))},[t,s,e,n,r]),s?(console.log("AuthGuard: Still loading, showing loading indicator"),g.jsx(wi,{text:"Checking authentication..."})):e?n&&t?(console.log("AuthGuard: Showing protected content"),g.jsx(g.Fragment,{children:i})):(console.log("AuthGuard: Protected route but no auth, showing loading"),g.jsx(wi,{text:"Redirecting to login..."})):e?null:!n||!t?(console.log("AuthGuard: Showing auth page"),g.jsx(g.Fragment,{children:i})):(console.log("AuthGuard: Auth page but already authenticated, showing loading"),g.jsx(wi,{text:"Redirecting to app..."}))}const iu=Fr("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Vt=P.forwardRef(({className:i,variant:e,size:t,asChild:s=!1,...n},r)=>{const o=s?da:"button";return g.jsx(o,{className:z(iu({variant:e,size:t,className:i})),ref:r,...n})});Vt.displayName="Button";const Ye=P.forwardRef(({className:i,type:e,...t},s)=>g.jsx("input",{type:e,className:z("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",i),ref:s,...t}));Ye.displayName="Input";const Oi=P.forwardRef(({className:i,...e},t)=>g.jsx("div",{ref:t,className:z("rounded-lg border bg-card text-card-foreground shadow-sm",i),...e}));Oi.displayName="Card";const Os=P.forwardRef(({className:i,...e},t)=>g.jsx("div",{ref:t,className:z("flex flex-col space-y-1.5 p-6",i),...e}));Os.displayName="CardHeader";const Es=P.forwardRef(({className:i,...e},t)=>g.jsx("div",{ref:t,className:z("text-2xl font-semibold leading-none tracking-tight",i),...e}));Es.displayName="CardTitle";const Ts=P.forwardRef(({className:i,...e},t)=>g.jsx("div",{ref:t,className:z("text-sm text-muted-foreground",i),...e}));Ts.displayName="CardDescription";const Ei=P.forwardRef(({className:i,...e},t)=>g.jsx("div",{ref:t,className:z("p-6 pt-0",i),...e}));Ei.displayName="CardContent";const su=P.forwardRef(({className:i,...e},t)=>g.jsx("div",{ref:t,className:z("flex items-center p-6 pt-0",i),...e}));su.displayName="CardFooter";const nu=fa,Co=P.forwardRef(({className:i,...e},t)=>g.jsx($r,{ref:t,className:z("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",i),...e}));Co.displayName=$r.displayName;const Rs=P.forwardRef(({className:i,...e},t)=>g.jsx(Ur,{ref:t,className:z("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",i),...e}));Rs.displayName=Ur.displayName;const Is=P.forwardRef(({className:i,...e},t)=>g.jsx(Nr,{ref:t,className:z("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",i),...e}));Is.displayName=Nr.displayName;const et="generated",ru="pointerdown",ou="pointerup",As="pointerleave",au="pointerout",rt="pointermove",cu="touchstart",En="touchend",lu="touchmove",uu="touchcancel",hu="resize",du="visibilitychange",he="tsParticles - Error",Le=100,B=.5,K=1e3,G={x:0,y:0,z:0},li={a:1,b:0,c:0,d:1},At="random",_i="mid",J=2,fu=Math.PI*J,Zi=60,Oo="true",Tn="false",es="canvas",Rn=0,Te=2,In=4,pu=1,An=1,jn=1,gu=4,Eo=1,xi=255,tt=360,js=100,Ms=100,Mn=0,Ds=0,mu=60,yu=0,Ti=.25,Dn=B+Ti,zn=0,vu=1,bu=0,wu=0,_u=1,Ys=1,xu=1,Ln=1,Ri=0,To=1,ku=0,Su=120,Pu=0,Cu=0,Ou=1e4,Eu=0,Tu=1,Ii=0,Ro=1,Ru=1,Iu=0,$n=1,Au=0,ju=0,Un=-Ti,Nn=1.5,Fn=0,Mu=1,Du=0,zs=0,zu=0,Io=1,Lu=1,Ai=1,$u=500,Bn=50,Uu=0,Ls=1,Ao=0,qn=1,Nu=0,He=255,ts=3,is=6,Fu=1,Bu=1,qu=0,Vu=0,Hu=0,Wu=0;var H;(function(i){i.bottom="bottom",i.bottomLeft="bottom-left",i.bottomRight="bottom-right",i.left="left",i.none="none",i.right="right",i.top="top",i.topLeft="top-left",i.topRight="top-right",i.outside="outside",i.inside="inside"})(H||(H={}));function jo(i){return typeof i=="boolean"}function Ne(i){return typeof i=="string"}function Fe(i){return typeof i=="number"}function xt(i){return typeof i=="object"&&i!==null}function Pe(i){return Array.isArray(i)}function x(i){return i==null}class oe{constructor(e,t,s){if(this._updateFromAngle=(n,r)=>{this.x=Math.cos(n)*r,this.y=Math.sin(n)*r},!Fe(e)&&e){this.x=e.x,this.y=e.y;const n=e;this.z=n.z?n.z:G.z}else if(e!==void 0&&t!==void 0)this.x=e,this.y=t,this.z=s??G.z;else throw new Error(`${he} Vector3d not initialized correctly`)}static get origin(){return oe.create(G.x,G.y,G.z)}get angle(){return Math.atan2(this.y,this.x)}set angle(e){this._updateFromAngle(e,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(e){this._updateFromAngle(this.angle,e)}static clone(e){return oe.create(e.x,e.y,e.z)}static create(e,t,s){return new oe(e,t,s)}add(e){return oe.create(this.x+e.x,this.y+e.y,this.z+e.z)}addTo(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}copy(){return oe.clone(this)}distanceTo(e){return this.sub(e).length}distanceToSq(e){return this.sub(e).getLengthSq()}div(e){return oe.create(this.x/e,this.y/e,this.z/e)}divTo(e){this.x/=e,this.y/=e,this.z/=e}getLengthSq(){return this.x**Te+this.y**Te}mult(e){return oe.create(this.x*e,this.y*e,this.z*e)}multTo(e){this.x*=e,this.y*=e,this.z*=e}normalize(){const e=this.length;e!=Ii&&this.multTo(Eo/e)}rotate(e){return oe.create(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e),G.z)}setTo(e){this.x=e.x,this.y=e.y;const t=e;this.z=t.z?t.z:G.z}sub(e){return oe.create(this.x-e.x,this.y-e.y,this.z-e.z)}subFrom(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}}class V extends oe{constructor(e,t){super(e,t,G.z)}static get origin(){return V.create(G.x,G.y)}static clone(e){return V.create(e.x,e.y)}static create(e,t){return new V(e,t)}}let Gu=Math.random;const Mo={nextFrame:i=>requestAnimationFrame(i),cancel:i=>cancelAnimationFrame(i)};function M(){return de(Gu(),0,1-Number.EPSILON)}function Ku(i){return Mo.nextFrame(i)}function Ju(i){Mo.cancel(i)}function de(i,e,t){return Math.min(Math.max(i,e),t)}function ss(i,e,t,s){return Math.floor((i*t+e*s)/(t+s))}function ae(i){const e=Se(i),t=0;let s=Bi(i);return e===s&&(s=t),M()*(e-s)+s}function C(i){return Fe(i)?i:ae(i)}function Bi(i){return Fe(i)?i:i.min}function Se(i){return Fe(i)?i:i.max}function R(i,e){if(i===e||e===void 0&&Fe(i))return i;const t=Bi(i),s=Se(i);return e!==void 0?{min:Math.min(t,e),max:Math.max(s,e)}:R(t,s)}function te(i,e){const t=i.x-e.x,s=i.y-e.y,n=2;return{dx:t,dy:s,distance:Math.sqrt(t**n+s**n)}}function ce(i,e){return te(i,e).distance}function Ue(i){return i*Math.PI/180}function Qu(i,e,t){if(Fe(i))return Ue(i);switch(i){case H.top:return-Math.PI*B;case H.topRight:return-Math.PI*Ti;case H.right:return yu;case H.bottomRight:return Math.PI*Ti;case H.bottom:return Math.PI*B;case H.bottomLeft:return Math.PI*Dn;case H.left:return Math.PI;case H.topLeft:return-Math.PI*Dn;case H.inside:return Math.atan2(t.y-e.y,t.x-e.x);case H.outside:return Math.atan2(e.y-t.y,e.x-t.x);default:return M()*fu}}function Yu(i){const e=V.origin;return e.length=1,e.angle=i,e}function Vn(i,e,t,s){return V.create(i.x*(t-s)/(t+s)+e.x*J*s/(t+s),i.y)}function Xu(i){var e,t;return{x:((e=i.position)==null?void 0:e.x)??M()*i.size.width,y:((t=i.position)==null?void 0:t.y)??M()*i.size.height}}function Do(i){return i?i.endsWith("%")?parseFloat(i)/Le:parseFloat(i):1}var it;(function(i){i.auto="auto",i.increase="increase",i.decrease="decrease",i.random="random"})(it||(it={}));var N;(function(i){i.increasing="increasing",i.decreasing="decreasing"})(N||(N={}));var ot;(function(i){i.none="none",i.max="max",i.min="min"})(ot||(ot={}));var T;(function(i){i.bottom="bottom",i.left="left",i.right="right",i.top="top"})(T||(T={}));var jt;(function(i){i.precise="precise",i.percent="percent"})(jt||(jt={}));var Ct;(function(i){i.max="max",i.min="min",i.random="random"})(Ct||(Ct={}));const Zu={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function at(){return Zu}function eh(i){const e=new Map;return(...t)=>{const s=JSON.stringify(t);if(e.has(s))return e.get(s);const n=i(...t);return e.set(s,n),n}}function Hn(i){const e={bounced:!1},{pSide:t,pOtherSide:s,rectSide:n,rectOtherSide:r,velocity:o,factor:a}=i;return s.min<r.min||s.min>r.max||s.max<r.min||s.max>r.max||(t.max>=n.min&&t.max<=(n.max+n.min)*B&&o>zn||t.min<=n.max&&t.min>(n.max+n.min)*B&&o<zn)&&(e.velocity=o*-a,e.bounced=!0),e}function th(i,e){const t=fe(e,s=>i.matches(s));return Pe(t)?t.some(s=>s):t}function ct(){return typeof window>"u"||!window||typeof window.document>"u"||!window.document}function ih(){return!ct()&&typeof matchMedia<"u"}function zo(i){if(ih())return matchMedia(i)}function sh(i){if(!(ct()||typeof IntersectionObserver>"u"))return new IntersectionObserver(i)}function nh(i){if(!(ct()||typeof MutationObserver>"u"))return new MutationObserver(i)}function $(i,e){return i===e||Pe(e)&&e.indexOf(i)>-1}async function Wn(i,e){try{await document.fonts.load(`${e??"400"} 36px '${i??"Verdana"}'`)}catch{}}function rh(i){return Math.floor(M()*i.length)}function qi(i,e,t=!0){return i[e!==void 0&&t?e%i.length:rh(i)]}function Xs(i,e,t,s,n){return oh(si(i,s??0),e,t,n)}function oh(i,e,t,s){let n=!0;return(!s||s===T.bottom)&&(n=i.top<e.height+t.x),n&&(!s||s===T.left)&&(n=i.right>t.x),n&&(!s||s===T.right)&&(n=i.left<e.width+t.y),n&&(!s||s===T.top)&&(n=i.bottom>t.y),n}function si(i,e){return{bottom:i.y+e,left:i.x-e,right:i.x+e,top:i.y-e}}function re(i,...e){for(const t of e){if(t==null)continue;if(!xt(t)){i=t;continue}const s=Array.isArray(t);s&&(xt(i)||!i||!Array.isArray(i))?i=[]:!s&&(xt(i)||!i||Array.isArray(i))&&(i={});for(const n in t){if(n==="__proto__")continue;const r=t,o=r[n],a=i;a[n]=xt(o)&&Array.isArray(o)?o.map(c=>re(a[n],c)):re(a[n],o)}}return i}function Zs(i,e){return!!Uo(e,t=>t.enable&&$(i,t.mode))}function en(i,e,t){fe(e,s=>{const n=s.mode;s.enable&&$(i,n)&&ah(s,t)})}function ah(i,e){const t=i.selectors;fe(t,s=>{e(s,i)})}function Lo(i,e){if(!(!e||!i))return Uo(i,t=>th(e,t.selectors))}function $s(i){return{position:i.getPosition(),radius:i.getRadius(),mass:i.getMass(),velocity:i.velocity,factor:V.create(C(i.options.bounce.horizontal.value),C(i.options.bounce.vertical.value))}}function $o(i,e){const{x:t,y:s}=i.velocity.sub(e.velocity),[n,r]=[i.position,e.position],{dx:o,dy:a}=te(r,n);if(t*o+s*a<0)return;const l=-Math.atan2(a,o),u=i.mass,h=e.mass,d=i.velocity.rotate(l),f=e.velocity.rotate(l),p=Vn(d,f,u,h),y=Vn(f,d,u,h),m=p.rotate(-l),_=y.rotate(-l);i.velocity.x=m.x*i.factor.x,i.velocity.y=m.y*i.factor.y,e.velocity.x=_.x*e.factor.x,e.velocity.y=_.y*e.factor.y}function ch(i,e){const t=i.getPosition(),s=i.getRadius(),n=si(t,s),r=i.options.bounce,o=Hn({pSide:{min:n.left,max:n.right},pOtherSide:{min:n.top,max:n.bottom},rectSide:{min:e.left,max:e.right},rectOtherSide:{min:e.top,max:e.bottom},velocity:i.velocity.x,factor:C(r.horizontal.value)});o.bounced&&(o.velocity!==void 0&&(i.velocity.x=o.velocity),o.position!==void 0&&(i.position.x=o.position));const a=Hn({pSide:{min:n.top,max:n.bottom},pOtherSide:{min:n.left,max:n.right},rectSide:{min:e.top,max:e.bottom},rectOtherSide:{min:e.left,max:e.right},velocity:i.velocity.y,factor:C(r.vertical.value)});a.bounced&&(a.velocity!==void 0&&(i.velocity.y=a.velocity),a.position!==void 0&&(i.position.y=a.position))}function fe(i,e){return Pe(i)?i.map((s,n)=>e(s,n)):e(i,0)}function ve(i,e,t){return Pe(i)?qi(i,e,t):i}function Uo(i,e){return Pe(i)?i.find((s,n)=>e(s,n)):e(i,0)?i:void 0}function No(i,e){const t=i.value,s=i.animation,n={delayTime:C(s.delay)*K,enable:s.enable,value:C(i.value)*e,max:Se(t)*e,min:Bi(t)*e,loops:0,maxLoops:C(s.count),time:0},r=1;if(s.enable){switch(n.decay=r-C(s.decay),s.mode){case it.increase:n.status=N.increasing;break;case it.decrease:n.status=N.decreasing;break;case it.random:n.status=M()>=B?N.increasing:N.decreasing;break}const o=s.mode===it.auto;switch(s.startValue){case Ct.min:n.value=n.min,o&&(n.status=N.increasing);break;case Ct.max:n.value=n.max,o&&(n.status=N.decreasing);break;case Ct.random:default:n.value=ae(n),o&&(n.status=M()>=B?N.increasing:N.decreasing);break}}return n.initialValue=n.value,n}function lh(i,e){if(!(i.mode===jt.percent)){const{mode:n,...r}=i;return r}return"x"in i?{x:i.x/Le*e.width,y:i.y/Le*e.height}:{width:i.width/Le*e.width,height:i.height/Le*e.height}}function Fo(i,e){return lh(i,e)}function uh(i,e,t,s,n){switch(e){case ot.max:t>=n&&i.destroy();break;case ot.min:t<=s&&i.destroy();break}}function tn(i,e,t,s,n){if(i.destroyed||!e||!e.enable||(e.maxLoops??0)>0&&(e.loops??0)>(e.maxLoops??0))return;const u=(e.velocity??0)*n.factor,h=e.min,d=e.max,f=e.decay??1;if(e.time||(e.time=0),(e.delayTime??0)>0&&e.time<(e.delayTime??0)&&(e.time+=n.value),!((e.delayTime??0)>0&&e.time<(e.delayTime??0))){switch(e.status){case N.increasing:e.value>=d?(t?e.status=N.decreasing:e.value-=d,e.loops||(e.loops=0),e.loops++):e.value+=u;break;case N.decreasing:e.value<=h?(t?e.status=N.increasing:e.value+=d,e.loops||(e.loops=0),e.loops++):e.value-=u}e.velocity&&f!==1&&(e.velocity*=f),uh(i,s,e.value,h,d),i.destroyed||(e.value=de(e.value,h,d))}}function hh(i){var t,s,n,r;const e=document.createElement("div").style;if(!i)return e;for(const o in i){const a=i[o];if(!Object.prototype.hasOwnProperty.call(i,o)||x(a))continue;const c=(t=i.getPropertyValue)==null?void 0:t.call(i,a);if(!c)continue;const l=(s=i.getPropertyPriority)==null?void 0:s.call(i,a);l?(r=e.setProperty)==null||r.call(e,a,c,l):(n=e.setProperty)==null||n.call(e,a,c)}return e}function dh(i){const e=document.createElement("div").style,t=10,s={width:"100%",height:"100%",margin:"0",padding:"0",borderWidth:"0",position:"fixed",zIndex:i.toString(t),"z-index":i.toString(t),top:"0",left:"0"};for(const n in s){const r=s[n];e.setProperty(n,r)}return e}const fh=eh(dh);var Us;(function(i){i.darken="darken",i.enlighten="enlighten"})(Us||(Us={}));function ph(i,e){if(e){for(const t of i.colorManagers.values())if(e.startsWith(t.stringPrefix))return t.parseString(e)}}function we(i,e,t,s=!0){if(!e)return;const n=Ne(e)?{value:e}:e;if(Ne(n.value))return Bo(i,n.value,t,s);if(Pe(n.value))return we(i,{value:qi(n.value,t,s)});for(const r of i.colorManagers.values()){const o=r.handleRangeColor(n);if(o)return o}}function Bo(i,e,t,s=!0){if(!e)return;const n=Ne(e)?{value:e}:e;if(Ne(n.value))return n.value===At?Vo():gh(i,n.value);if(Pe(n.value))return Bo(i,{value:qi(n.value,t,s)});for(const r of i.colorManagers.values()){const o=r.handleColor(n);if(o)return o}}function Yt(i,e,t,s=!0){const n=we(i,e,t,s);return n?qo(n):void 0}function qo(i){const e=i.r/xi,t=i.g/xi,s=i.b/xi,n=Math.max(e,t,s),r=Math.min(e,t,s),o={h:Mn,l:(n+r)*B,s:Ds};return n!==r&&(o.s=o.l<B?(n-r)/(n+r):(n-r)/(J-n-r),o.h=e===n?(t-s)/(n-r):o.h=t===n?J+(s-e)/(n-r):J*J+(e-t)/(n-r)),o.l*=Ms,o.s*=js,o.h*=mu,o.h<Mn&&(o.h+=tt),o.h>=tt&&(o.h-=tt),o}function gh(i,e){return ph(i,e)}function Mt(i){const e=(i.h%tt+tt)%tt,t=Math.max(Ds,Math.min(js,i.s)),s=Math.max(Nu,Math.min(Ms,i.l)),n=e/tt,r=t/js,o=s/Ms;if(t===Ds){const p=Math.round(o*He);return{r:p,g:p,b:p}}const a=(p,y,m)=>{if(m<0&&m++,m>1&&m--,m*is<1)return p+(y-p)*is*m;if(m*J<1)return y;if(m*ts<1*J){const v=J/ts;return p+(y-p)*(v-m)*is}return p},c=o<B?o*(Fu+r):o+r-o*r,l=J*o-c,u=Bu/ts,h=Math.min(He,He*a(l,c,n+u)),d=Math.min(He,He*a(l,c,n)),f=Math.min(He,He*a(l,c,n-u));return{r:Math.round(h),g:Math.round(d),b:Math.round(f)}}function mh(i){const e=Mt(i);return{a:i.a,b:e.b,g:e.g,r:e.r}}function Vo(i){const e=qu,t=xi+Ls;return{b:Math.floor(ae(R(e,t))),g:Math.floor(ae(R(e,t))),r:Math.floor(ae(R(e,t)))}}function Ie(i,e){return`rgba(${i.r}, ${i.g}, ${i.b}, ${e??Ys})`}function Xt(i,e){return`hsla(${i.h}, ${i.s}%, ${i.l}%, ${e??Ys})`}function sn(i,e,t,s){let n=i,r=e;return n.r===void 0&&(n=Mt(i)),r.r===void 0&&(r=Mt(e)),{b:ss(n.b,r.b,t,s),g:ss(n.g,r.g,t,s),r:ss(n.r,r.r,t,s)}}function Ns(i,e,t){if(t===At)return Vo();if(t===_i){const s=i.getFillColor()??i.getStrokeColor(),n=(e==null?void 0:e.getFillColor())??(e==null?void 0:e.getStrokeColor());if(s&&n&&e)return sn(s,n,i.getRadius(),e.getRadius());{const r=s??n;if(r)return Mt(r)}}else return t}function Ho(i,e,t,s){const n=Ne(e)?e:e.value;return n===At?s?we(i,{value:n}):t?At:_i:n===_i?_i:we(i,{value:n})}function Gn(i){return i!==void 0?{h:i.h.value,s:i.s.value,l:i.l.value}:void 0}function Wo(i,e,t){const s={h:{enable:!1,value:i.h},s:{enable:!1,value:i.s},l:{enable:!1,value:i.l}};return e&&(ns(s.h,e.h,t),ns(s.s,e.s,t),ns(s.l,e.l,t)),s}function ns(i,e,t){i.enable=e.enable,i.enable?(i.velocity=C(e.speed)/Le*t,i.decay=Ro-C(e.decay),i.status=N.increasing,i.loops=Hu,i.maxLoops=C(e.count),i.time=Wu,i.delayTime=C(e.delay)*K,e.sync||(i.velocity*=M(),i.value*=M()),i.initialValue=i.value,i.offset=R(e.offset)):i.velocity=Vu}function rs(i,e,t,s){if(!i||!i.enable||(i.maxLoops??0)>0&&(i.loops??0)>(i.maxLoops??0)||(i.time||(i.time=0),(i.delayTime??0)>0&&i.time<(i.delayTime??0)&&(i.time+=s.value),(i.delayTime??0)>0&&i.time<(i.delayTime??0)))return;const u=i.offset?ae(i.offset):0,h=(i.velocity??0)*s.factor+u*3.6,d=i.decay??1,f=Se(e),p=Bi(e);!t||i.status===N.increasing?(i.value+=h,i.value>f&&(i.loops||(i.loops=0),i.loops++,t?i.status=N.decreasing:i.value-=f)):(i.value-=h,i.value<0&&(i.loops||(i.loops=0),i.loops++,i.status=N.increasing)),i.velocity&&d!==1&&(i.velocity*=d),i.value=de(i.value,p,f)}function Go(i,e){if(!i)return;const{h:t,s,l:n}=i,r={h:{min:0,max:360},s:{min:0,max:100},l:{min:0,max:100}};t&&rs(t,r.h,!1,e),s&&rs(s,r.s,!0,e),n&&rs(n,r.l,!0,e)}function Jt(i,e,t){i.beginPath(),i.moveTo(e.x,e.y),i.lineTo(t.x,t.y),i.closePath()}function yh(i,e,t){i.fillStyle=t??"rgba(0,0,0,0)",i.fillRect(G.x,G.y,e.width,e.height)}function vh(i,e,t,s){t&&(i.globalAlpha=s,i.drawImage(t,G.x,G.y,e.width,e.height),i.globalAlpha=1)}function os(i,e){i.clearRect(G.x,G.y,e.width,e.height)}function bh(i){const{container:e,context:t,particle:s,delta:n,colorStyles:r,backgroundMask:o,composite:a,radius:c,opacity:l,shadow:u,transform:h}=i,d=s.getPosition(),f=s.rotation+(s.pathRotation?s.velocity.angle:Uu),p={sin:Math.sin(f),cos:Math.cos(f)},y=!!f,m={a:p.cos*(h.a??li.a),b:y?p.sin*(h.b??Ls):h.b??li.b,c:y?-p.sin*(h.c??Ls):h.c??li.c,d:p.cos*(h.d??li.d)};t.setTransform(m.a,m.b,m.c,m.d,d.x,d.y),o&&(t.globalCompositeOperation=a);const _=s.shadowColor;u.enable&&_&&(t.shadowBlur=u.blur,t.shadowColor=Ie(_),t.shadowOffsetX=u.offset.x,t.shadowOffsetY=u.offset.y),r.fill&&(t.fillStyle=r.fill);const w=s.strokeWidth??Ao;t.lineWidth=w,r.stroke&&(t.strokeStyle=r.stroke);const v={container:e,context:t,particle:s,radius:c,opacity:l,delta:n,transformData:m,strokeWidth:w};_h(v),xh(v),wh(v),t.globalCompositeOperation="source-over",t.resetTransform()}function wh(i){const{container:e,context:t,particle:s,radius:n,opacity:r,delta:o,transformData:a}=i;if(!s.effect)return;const c=e.effectDrawers.get(s.effect);c&&c.draw({context:t,particle:s,radius:n,opacity:r,delta:o,pixelRatio:e.retina.pixelRatio,transformData:{...a}})}function _h(i){const{container:e,context:t,particle:s,radius:n,opacity:r,delta:o,strokeWidth:a,transformData:c}=i;if(!s.shape)return;const l=e.shapeDrawers.get(s.shape);l&&(t.beginPath(),l.draw({context:t,particle:s,radius:n,opacity:r,delta:o,pixelRatio:e.retina.pixelRatio,transformData:{...c}}),s.shapeClose&&t.closePath(),a>Ao&&t.stroke(),s.shapeFill&&t.fill())}function xh(i){const{container:e,context:t,particle:s,radius:n,opacity:r,delta:o,transformData:a}=i;if(!s.shape)return;const c=e.shapeDrawers.get(s.shape);c!=null&&c.afterDraw&&c.afterDraw({context:t,particle:s,radius:n,opacity:r,delta:o,pixelRatio:e.retina.pixelRatio,transformData:{...a}})}function kh(i,e,t){e.draw&&e.draw(i,t)}function Sh(i,e,t,s){e.drawParticle&&e.drawParticle(i,t,s)}function Ph(i,e,t){return{h:i.h,s:i.s,l:i.l+(e===Us.darken?-qn:qn)*t}}function Ch(i,e,t){const s=e[t];s!==void 0&&(i[t]=(i[t]??vu)*s)}function Kn(i,e,t=!1){if(!e)return;const s=i;if(!s)return;const n=s.style;if(!n)return;const r=new Set;for(const o in n)Object.prototype.hasOwnProperty.call(n,o)&&r.add(n[o]);for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.add(e[o]);for(const o of r){const a=e.getPropertyValue(o);a?n.setProperty(o,a,t?"important":""):n.removeProperty(o)}}class Oh{constructor(e,t){this.container=e,this._applyPostDrawUpdaters=r=>{var o;for(const a of this._postDrawUpdaters)(o=a.afterDraw)==null||o.call(a,r)},this._applyPreDrawUpdaters=(r,o,a,c,l,u)=>{var h;for(const d of this._preDrawUpdaters){if(d.getColorStyles){const{fill:f,stroke:p}=d.getColorStyles(o,r,a,c);f&&(l.fill=f),p&&(l.stroke=p)}if(d.getTransformValues){const f=d.getTransformValues(o);for(const p in f)Ch(u,f,p)}(h=d.beforeDraw)==null||h.call(d,o)}},this._applyResizePlugins=()=>{var r;for(const o of this._resizePlugins)(r=o.resize)==null||r.call(o)},this._getPluginParticleColors=r=>{let o,a;for(const c of this._colorPlugins)if(!o&&c.particleFillColor&&(o=Yt(this._engine,c.particleFillColor(r))),!a&&c.particleStrokeColor&&(a=Yt(this._engine,c.particleStrokeColor(r))),o&&a)break;return[o,a]},this._initCover=async()=>{const r=this.container.actualOptions,o=r.backgroundMask.cover,a=o.color;if(a){const c=we(this._engine,a);if(c){const l={...c,a:o.opacity};this._coverColorStyle=Ie(l,l.a)}}else await new Promise((c,l)=>{if(!o.image)return;const u=document.createElement("img");u.addEventListener("load",()=>{this._coverImage={image:u,opacity:o.opacity},c()}),u.addEventListener("error",h=>{l(h.error)}),u.src=o.image})},this._initStyle=()=>{const r=this.element,o=this.container.actualOptions;if(r){this._fullScreen?this._setFullScreenStyle():this._resetOriginalStyle();for(const a in o.style){if(!a||!o.style||!Object.prototype.hasOwnProperty.call(o.style,a))continue;const c=o.style[a];c&&r.style.setProperty(a,c,"important")}}},this._initTrail=async()=>{const r=this.container.actualOptions,o=r.particles.move.trail,a=o.fill;if(!o.enable)return;const c=Eo/o.length;if(a.color){const l=we(this._engine,a.color);if(!l)return;this._trailFill={color:{...l},opacity:c}}else await new Promise((l,u)=>{if(!a.image)return;const h=document.createElement("img");h.addEventListener("load",()=>{this._trailFill={image:h,opacity:c},l()}),h.addEventListener("error",d=>{u(d.error)}),h.src=a.image})},this._paintBase=r=>{this.draw(o=>yh(o,this.size,r))},this._paintImage=(r,o)=>{this.draw(a=>vh(a,this.size,r,o))},this._repairStyle=()=>{const r=this.element;r&&(this._safeMutationObserver(o=>o.disconnect()),this._initStyle(),this.initBackground(),this._safeMutationObserver(o=>{!r||!(r instanceof Node)||o.observe(r,{attributes:!0})}))},this._resetOriginalStyle=()=>{const r=this.element,o=this._originalStyle;!r||!o||Kn(r,o,!0)},this._safeMutationObserver=r=>{this._mutationObserver&&r(this._mutationObserver)},this._setFullScreenStyle=()=>{const r=this.element;r&&Kn(r,fh(this.container.actualOptions.fullScreen.zIndex),!0)},this._engine=t,this._standardSize={height:0,width:0};const s=e.retina.pixelRatio,n=this._standardSize;this.size={height:n.height*s,width:n.width*s},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const e=this.container.actualOptions,t=e.particles.move.trail,s=this._trailFill;e.backgroundMask.enable?this.paint():t.enable&&t.length>wu&&s?s.color?this._paintBase(Ie(s.color,s.opacity)):s.image&&this._paintImage(s.image,s.opacity):e.clear&&this.draw(n=>{os(n,this.size)})}destroy(){if(this.stop(),this._generated){const e=this.element;e==null||e.remove(),this.element=void 0}else this._resetOriginalStyle();this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(e){const t=this._context;if(t)return e(t)}drawAsync(e){const t=this._context;if(t)return e(t)}drawParticle(e,t){if(e.spawning||e.destroyed)return;const s=e.getRadius();if(s<=bu)return;const n=e.getFillColor(),r=e.getStrokeColor()??n;let[o,a]=this._getPluginParticleColors(e);o||(o=n),a||(a=r),!(!o&&!a)&&this.draw(c=>{var b;const l=this.container,u=l.actualOptions,h=e.options.zIndex,d=_u-e.zIndexFactor,f=d**h.opacityRate,p=e.bubble.opacity??((b=e.opacity)==null?void 0:b.value)??Ys,y=e.strokeOpacity??p,m=p*f,_=y*f,w={},v={fill:o?Xt(o,m):void 0};v.stroke=a?Xt(a,_):v.fill,this._applyPreDrawUpdaters(c,e,s,m,v,w),bh({container:l,context:c,particle:e,delta:t,colorStyles:v,backgroundMask:u.backgroundMask.enable,composite:u.backgroundMask.composite,radius:s*d**h.sizeRate,opacity:m,shadow:e.options.shadow,transform:w}),this._applyPostDrawUpdaters(e)})}drawParticlePlugin(e,t,s){this.draw(n=>Sh(n,e,t,s))}drawPlugin(e,t){this.draw(s=>kh(s,e,t))}async init(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=nh(e=>{for(const t of e)t.type==="attributes"&&t.attributeName==="style"&&this._repairStyle()}),this.resize(),this._initStyle(),await this._initCover();try{await this._initTrail()}catch(e){at().error(e)}this.initBackground(),this._safeMutationObserver(e=>{!this.element||!(this.element instanceof Node)||e.observe(this.element,{attributes:!0})}),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const e=this.container.actualOptions,t=e.background,s=this.element;if(!s)return;const n=s.style;if(n){if(t.color){const r=we(this._engine,t.color);n.backgroundColor=r?Ie(r,t.opacity):""}else n.backgroundColor="";n.backgroundImage=t.image||"",n.backgroundPosition=t.position||"",n.backgroundRepeat=t.repeat||"",n.backgroundSize=t.size||""}}initPlugins(){this._resizePlugins=[];for(const e of this.container.plugins.values())e.resize&&this._resizePlugins.push(e),(e.particleFillColor??e.particleStrokeColor)&&this._colorPlugins.push(e)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const e of this.container.particles.updaters)e.afterDraw&&this._postDrawUpdaters.push(e),(e.getColorStyles??e.getTransformValues??e.beforeDraw)&&this._preDrawUpdaters.push(e)}loadCanvas(e){this._generated&&this.element&&this.element.remove(),this._generated=e.dataset&&et in e.dataset?e.dataset[et]==="true":this._generated,this.element=e,this.element.ariaHidden="true",this._originalStyle=hh(this.element.style);const t=this._standardSize;t.height=e.offsetHeight,t.width=e.offsetWidth;const s=this.container.retina.pixelRatio,n=this.size;e.height=n.height=t.height*s,e.width=n.width=t.width*s,this._context=this.element.getContext("2d"),this._safeMutationObserver(r=>r.disconnect()),this.container.retina.init(),this.initBackground(),this._safeMutationObserver(r=>{!this.element||!(this.element instanceof Node)||r.observe(this.element,{attributes:!0})})}paint(){const e=this.container.actualOptions;this.draw(t=>{e.backgroundMask.enable&&e.backgroundMask.cover?(os(t,this.size),this._coverImage?this._paintImage(this._coverImage.image,this._coverImage.opacity):this._coverColorStyle?this._paintBase(this._coverColorStyle):this._paintBase()):this._paintBase()})}resize(){if(!this.element)return!1;const e=this.container,t=e.canvas._standardSize,s={width:this.element.offsetWidth,height:this.element.offsetHeight},n=e.retina.pixelRatio,r={width:s.width*n,height:s.height*n};if(s.height===t.height&&s.width===t.width&&r.height===this.element.height&&r.width===this.element.width)return!1;const o={...t};t.height=s.height,t.width=s.width;const a=this.size;return this.element.width=a.width=r.width,this.element.height=a.height=r.height,this.container.started&&e.particles.setResizeFactor({width:t.width/o.width,height:t.height/o.height}),!0}stop(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=void 0,this.draw(e=>os(e,this.size))}async windowResize(){if(!this.element||!this.resize())return;const e=this.container,t=e.updateActualOptions();e.particles.setDensity(),this._applyResizePlugins(),t&&await e.refresh()}}var Ot;(function(i){i.canvas="canvas",i.parent="parent",i.window="window"})(Ot||(Ot={}));function le(i,e,t,s,n){if(s){let r={passive:!0};jo(n)?r.capture=n:n!==void 0&&(r=n),i.addEventListener(e,t,r)}else{const r=n;i.removeEventListener(e,t,r)}}class Eh{constructor(e){this.container=e,this._doMouseTouchClick=t=>{const s=this.container,n=s.actualOptions;if(this._canPush){const r=s.interactivity.mouse,o=r.position;if(!o)return;r.clickPosition={...o},r.clickTime=new Date().getTime();const a=n.interactivity.events.onClick;fe(a.mode,c=>this.container.handleClickMode(c))}t.type==="touchend"&&setTimeout(()=>this._mouseTouchFinish(),$u)},this._handleThemeChange=t=>{const s=t,n=this.container,r=n.options,o=r.defaultThemes,a=s.matches?o.dark:o.light,c=r.themes.find(l=>l.name===a);c!=null&&c.default.auto&&n.loadTheme(a)},this._handleVisibilityChange=()=>{const t=this.container,s=t.actualOptions;this._mouseTouchFinish(),s.pauseOnBlur&&(document!=null&&document.hidden?(t.pageHidden=!0,t.pause()):(t.pageHidden=!1,t.animationStatus?t.play(!0):t.draw(!0)))},this._handleWindowResize=()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout);const t=async()=>{const s=this.container.canvas;await(s==null?void 0:s.windowResize())};this._resizeTimeout=setTimeout(()=>void t(),this.container.actualOptions.interactivity.events.resize.delay*K)},this._manageInteractivityListeners=(t,s)=>{const n=this._handlers,r=this.container,o=r.actualOptions,a=r.interactivity.element;if(!a)return;const c=a,l=r.canvas.element;l&&(l.style.pointerEvents=c===l?"initial":"none"),(o.interactivity.events.onHover.enable||o.interactivity.events.onClick.enable)&&(le(a,rt,n.mouseMove,s),le(a,cu,n.touchStart,s),le(a,lu,n.touchMove,s),o.interactivity.events.onClick.enable?(le(a,En,n.touchEndClick,s),le(a,ou,n.mouseUp,s),le(a,ru,n.mouseDown,s)):le(a,En,n.touchEnd,s),le(a,t,n.mouseLeave,s),le(a,uu,n.touchCancel,s))},this._manageListeners=t=>{const s=this._handlers,n=this.container,r=n.actualOptions,o=r.interactivity.detectsOn,a=n.canvas.element;let c=As;o===Ot.window?(n.interactivity.element=window,c=au):o===Ot.parent&&a?n.interactivity.element=a.parentElement??a.parentNode:n.interactivity.element=a,this._manageMediaMatch(t),this._manageResize(t),this._manageInteractivityListeners(c,t),document&&le(document,du,s.visibilityChange,t,!1)},this._manageMediaMatch=t=>{const s=this._handlers,n=zo("(prefers-color-scheme: dark)");if(n){if(n.addEventListener!==void 0){le(n,"change",s.themeChange,t);return}n.addListener!==void 0&&(t?n.addListener(s.oldThemeChange):n.removeListener(s.oldThemeChange))}},this._manageResize=t=>{const s=this._handlers,n=this.container;if(!n.actualOptions.interactivity.events.resize)return;if(typeof ResizeObserver>"u"){le(window,hu,s.resize,t);return}const o=n.canvas.element;this._resizeObserver&&!t?(o&&this._resizeObserver.unobserve(o),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&t&&o&&(this._resizeObserver=new ResizeObserver(a=>{a.find(l=>l.target===o)&&this._handleWindowResize()}),this._resizeObserver.observe(o))},this._mouseDown=()=>{const{interactivity:t}=this.container;if(!t)return;const{mouse:s}=t;s.clicking=!0,s.downPosition=s.position},this._mouseTouchClick=t=>{const s=this.container,n=s.actualOptions,{mouse:r}=s.interactivity;r.inside=!0;let o=!1;const a=r.position;if(!(!a||!n.interactivity.events.onClick.enable)){for(const c of s.plugins.values())if(c.clickPositionValid&&(o=c.clickPositionValid(a),o))break;o||this._doMouseTouchClick(t),r.clicking=!1}},this._mouseTouchFinish=()=>{const t=this.container.interactivity;if(!t)return;const s=t.mouse;delete s.position,delete s.clickPosition,delete s.downPosition,t.status=As,s.inside=!1,s.clicking=!1},this._mouseTouchMove=t=>{const s=this.container,n=s.actualOptions,r=s.interactivity,o=s.canvas.element;if(!(r!=null&&r.element))return;r.mouse.inside=!0;let a;if(t.type.startsWith("pointer")){this._canPush=!0;const l=t;if(r.element===window){if(o){const u=o.getBoundingClientRect();a={x:l.clientX-u.left,y:l.clientY-u.top}}}else if(n.interactivity.detectsOn===Ot.parent){const u=l.target,h=l.currentTarget;if(u&&h&&o){const d=u.getBoundingClientRect(),f=h.getBoundingClientRect(),p=o.getBoundingClientRect();a={x:l.offsetX+J*d.left-(f.left+p.left),y:l.offsetY+J*d.top-(f.top+p.top)}}else a={x:l.offsetX??l.clientX,y:l.offsetY??l.clientY}}else l.target===o&&(a={x:l.offsetX??l.clientX,y:l.offsetY??l.clientY})}else if(this._canPush=t.type!=="touchmove",o){const l=t,u=l.touches[l.touches.length-Io],h=o.getBoundingClientRect();a={x:u.clientX-(h.left??Ri),y:u.clientY-(h.top??Ri)}}const c=s.retina.pixelRatio;a&&(a.x*=c,a.y*=c),r.mouse.position=a,r.status=rt},this._touchEnd=t=>{const s=t,n=Array.from(s.changedTouches);for(const r of n)this._touches.delete(r.identifier);this._mouseTouchFinish()},this._touchEndClick=t=>{const s=t,n=Array.from(s.changedTouches);for(const r of n)this._touches.delete(r.identifier);this._mouseTouchClick(t)},this._touchStart=t=>{const s=t,n=Array.from(s.changedTouches);for(const r of n)this._touches.set(r.identifier,performance.now());this._mouseTouchMove(t)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:t=>this._mouseTouchMove(t),mouseUp:t=>this._mouseTouchClick(t),touchStart:t=>this._touchStart(t),touchMove:t=>this._mouseTouchMove(t),touchEnd:t=>this._touchEnd(t),touchCancel:t=>this._touchEnd(t),touchEndClick:t=>this._touchEndClick(t),visibilityChange:()=>this._handleVisibilityChange(),themeChange:t=>this._handleThemeChange(t),oldThemeChange:t=>this._handleThemeChange(t),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}var ee;(function(i){i.configAdded="configAdded",i.containerInit="containerInit",i.particlesSetup="particlesSetup",i.containerStarted="containerStarted",i.containerStopped="containerStopped",i.containerDestroyed="containerDestroyed",i.containerPaused="containerPaused",i.containerPlay="containerPlay",i.containerBuilt="containerBuilt",i.particleAdded="particleAdded",i.particleDestroyed="particleDestroyed",i.particleRemoved="particleRemoved"})(ee||(ee={}));class Y{constructor(){this.value=""}static create(e,t){const s=new Y;return s.load(e),t!==void 0&&(Ne(t)||Pe(t)?s.load({value:t}):s.load(t)),s}load(e){x(e)||x(e.value)||(this.value=e.value)}}class Th{constructor(){this.color=new Y,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(e){x(e)||(e.color!==void 0&&(this.color=Y.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image),e.position!==void 0&&(this.position=e.position),e.repeat!==void 0&&(this.repeat=e.repeat),e.size!==void 0&&(this.size=e.size),e.opacity!==void 0&&(this.opacity=e.opacity))}}class Rh{constructor(){this.opacity=1}load(e){x(e)||(e.color!==void 0&&(this.color=Y.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image),e.opacity!==void 0&&(this.opacity=e.opacity))}}class Ih{constructor(){this.composite="destination-out",this.cover=new Rh,this.enable=!1}load(e){if(!x(e)){if(e.composite!==void 0&&(this.composite=e.composite),e.cover!==void 0){const t=e.cover,s=Ne(e.cover)?{color:e.cover}:e.cover;this.cover.load(t.color!==void 0||t.image!==void 0?t:{color:s})}e.enable!==void 0&&(this.enable=e.enable)}}}class Ah{constructor(){this.enable=!0,this.zIndex=0}load(e){x(e)||(e.enable!==void 0&&(this.enable=e.enable),e.zIndex!==void 0&&(this.zIndex=e.zIndex))}}class jh{constructor(){this.enable=!1,this.mode=[]}load(e){x(e)||(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode))}}var Dt;(function(i){i.circle="circle",i.rectangle="rectangle"})(Dt||(Dt={}));class Jn{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type=Dt.circle}load(e){x(e)||(e.selectors!==void 0&&(this.selectors=e.selectors),e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),e.type!==void 0&&(this.type=e.type))}}class Mh{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(e){x(e)||(e.enable!==void 0&&(this.enable=e.enable),e.force!==void 0&&(this.force=e.force),e.smooth!==void 0&&(this.smooth=e.smooth))}}class Dh{constructor(){this.enable=!1,this.mode=[],this.parallax=new Mh}load(e){x(e)||(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),this.parallax.load(e.parallax))}}class zh{constructor(){this.delay=.5,this.enable=!0}load(e){x(e)||(e.delay!==void 0&&(this.delay=e.delay),e.enable!==void 0&&(this.enable=e.enable))}}class Lh{constructor(){this.onClick=new jh,this.onDiv=new Jn,this.onHover=new Dh,this.resize=new zh}load(e){if(x(e))return;this.onClick.load(e.onClick);const t=e.onDiv;t!==void 0&&(this.onDiv=fe(t,s=>{const n=new Jn;return n.load(s),n})),this.onHover.load(e.onHover),this.resize.load(e.resize)}}class $h{constructor(e,t){this._engine=e,this._container=t}load(e){if(x(e)||!this._container)return;const t=this._engine.interactors.get(this._container);if(t)for(const s of t)s.loadModeOptions&&s.loadModeOptions(this,e)}}class Ko{constructor(e,t){this.detectsOn=Ot.window,this.events=new Lh,this.modes=new $h(e,t)}load(e){if(x(e))return;const t=e.detectsOn;t!==void 0&&(this.detectsOn=t),this.events.load(e.events),this.modes.load(e.modes)}}class Uh{load(e){x(e)||(e.position&&(this.position={x:e.position.x??Bn,y:e.position.y??Bn,mode:e.position.mode??jt.percent}),e.options&&(this.options=re({},e.options)))}}var st;(function(i){i.screen="screen",i.canvas="canvas"})(st||(st={}));class Nh{constructor(){this.maxWidth=1/0,this.options={},this.mode=st.canvas}load(e){x(e)||(x(e.maxWidth)||(this.maxWidth=e.maxWidth),x(e.mode)||(e.mode===st.screen?this.mode=st.screen:this.mode=st.canvas),x(e.options)||(this.options=re({},e.options)))}}var ze;(function(i){i.any="any",i.dark="dark",i.light="light"})(ze||(ze={}));class Fh{constructor(){this.auto=!1,this.mode=ze.any,this.value=!1}load(e){x(e)||(e.auto!==void 0&&(this.auto=e.auto),e.mode!==void 0&&(this.mode=e.mode),e.value!==void 0&&(this.value=e.value))}}class Bh{constructor(){this.name="",this.default=new Fh}load(e){x(e)||(e.name!==void 0&&(this.name=e.name),this.default.load(e.default),e.options!==void 0&&(this.options=re({},e.options)))}}class nn{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(e){x(e)||(e.count!==void 0&&(this.count=R(e.count)),e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=R(e.speed)),e.decay!==void 0&&(this.decay=R(e.decay)),e.delay!==void 0&&(this.delay=R(e.delay)),e.sync!==void 0&&(this.sync=e.sync))}}class rn extends nn{constructor(){super(),this.mode=it.auto,this.startValue=Ct.random}load(e){super.load(e),!x(e)&&(e.mode!==void 0&&(this.mode=e.mode),e.startValue!==void 0&&(this.startValue=e.startValue))}}class as extends nn{constructor(){super(),this.offset=0,this.sync=!0}load(e){super.load(e),!x(e)&&e.offset!==void 0&&(this.offset=R(e.offset))}}class qh{constructor(){this.h=new as,this.s=new as,this.l=new as}load(e){x(e)||(this.h.load(e.h),this.s.load(e.s),this.l.load(e.l))}}class Zt extends Y{constructor(){super(),this.animation=new qh}static create(e,t){const s=new Zt;return s.load(e),t!==void 0&&(Ne(t)||Pe(t)?s.load({value:t}):s.load(t)),s}load(e){if(super.load(e),x(e))return;const t=e.animation;t!==void 0&&(t.enable!==void 0?this.animation.h.load(t):this.animation.load(e.animation))}}var Et;(function(i){i.absorb="absorb",i.bounce="bounce",i.destroy="destroy"})(Et||(Et={}));class Vh{constructor(){this.speed=2}load(e){x(e)||e.speed!==void 0&&(this.speed=e.speed)}}class Hh{constructor(){this.enable=!0,this.retries=0}load(e){x(e)||(e.enable!==void 0&&(this.enable=e.enable),e.retries!==void 0&&(this.retries=e.retries))}}class ut{constructor(){this.value=0}load(e){x(e)||x(e.value)||(this.value=R(e.value))}}class Wh extends ut{constructor(){super(),this.animation=new nn}load(e){if(super.load(e),x(e))return;const t=e.animation;t!==void 0&&this.animation.load(t)}}class Jo extends Wh{constructor(){super(),this.animation=new rn}load(e){super.load(e)}}class Qn extends ut{constructor(){super(),this.value=1}}class Qo{constructor(){this.horizontal=new Qn,this.vertical=new Qn}load(e){x(e)||(this.horizontal.load(e.horizontal),this.vertical.load(e.vertical))}}class Gh{constructor(){this.absorb=new Vh,this.bounce=new Qo,this.enable=!1,this.maxSpeed=50,this.mode=Et.bounce,this.overlap=new Hh}load(e){x(e)||(this.absorb.load(e.absorb),this.bounce.load(e.bounce),e.enable!==void 0&&(this.enable=e.enable),e.maxSpeed!==void 0&&(this.maxSpeed=R(e.maxSpeed)),e.mode!==void 0&&(this.mode=e.mode),this.overlap.load(e.overlap))}}class Kh{constructor(){this.close=!0,this.fill=!0,this.options={},this.type=[]}load(e){if(x(e))return;const t=e.options;if(t!==void 0)for(const s in t){const n=t[s];n&&(this.options[s]=re(this.options[s]??{},n))}e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}}class Jh{constructor(){this.offset=0,this.value=90}load(e){x(e)||(e.offset!==void 0&&(this.offset=R(e.offset)),e.value!==void 0&&(this.value=R(e.value)))}}class Qh{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}load(e){if(!x(e)&&(e.distance!==void 0&&(this.distance=R(e.distance)),e.enable!==void 0&&(this.enable=e.enable),e.rotate)){const t=e.rotate.x;t!==void 0&&(this.rotate.x=t);const s=e.rotate.y;s!==void 0&&(this.rotate.y=s)}}}class Yh{constructor(){this.x=50,this.y=50,this.mode=jt.percent,this.radius=0}load(e){x(e)||(e.x!==void 0&&(this.x=e.x),e.y!==void 0&&(this.y=e.y),e.mode!==void 0&&(this.mode=e.mode),e.radius!==void 0&&(this.radius=e.radius))}}class Xh{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(e){x(e)||(e.acceleration!==void 0&&(this.acceleration=R(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.inverse!==void 0&&(this.inverse=e.inverse),e.maxSpeed!==void 0&&(this.maxSpeed=R(e.maxSpeed)))}}class Zh{constructor(){this.clamp=!0,this.delay=new ut,this.enable=!1,this.options={}}load(e){x(e)||(e.clamp!==void 0&&(this.clamp=e.clamp),this.delay.load(e.delay),e.enable!==void 0&&(this.enable=e.enable),this.generator=e.generator,e.options&&(this.options=re(this.options,e.options)))}}class ed{load(e){x(e)||(e.color!==void 0&&(this.color=Y.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image))}}class td{constructor(){this.enable=!1,this.length=10,this.fill=new ed}load(e){x(e)||(e.enable!==void 0&&(this.enable=e.enable),e.fill!==void 0&&this.fill.load(e.fill),e.length!==void 0&&(this.length=e.length))}}var F;(function(i){i.bounce="bounce",i.none="none",i.out="out",i.destroy="destroy",i.split="split"})(F||(F={}));class id{constructor(){this.default=F.out}load(e){x(e)||(e.default!==void 0&&(this.default=e.default),this.bottom=e.bottom??e.default,this.left=e.left??e.default,this.right=e.right??e.default,this.top=e.top??e.default)}}class sd{constructor(){this.acceleration=0,this.enable=!1}load(e){x(e)||(e.acceleration!==void 0&&(this.acceleration=R(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.position&&(this.position=re({},e.position)))}}class nd{constructor(){this.angle=new Jh,this.attract=new Qh,this.center=new Yh,this.decay=0,this.distance={},this.direction=H.none,this.drift=0,this.enable=!1,this.gravity=new Xh,this.path=new Zh,this.outModes=new id,this.random=!1,this.size=!1,this.speed=2,this.spin=new sd,this.straight=!1,this.trail=new td,this.vibrate=!1,this.warp=!1}load(e){if(x(e))return;this.angle.load(Fe(e.angle)?{value:e.angle}:e.angle),this.attract.load(e.attract),this.center.load(e.center),e.decay!==void 0&&(this.decay=R(e.decay)),e.direction!==void 0&&(this.direction=e.direction),e.distance!==void 0&&(this.distance=Fe(e.distance)?{horizontal:e.distance,vertical:e.distance}:{...e.distance}),e.drift!==void 0&&(this.drift=R(e.drift)),e.enable!==void 0&&(this.enable=e.enable),this.gravity.load(e.gravity);const t=e.outModes;t!==void 0&&(xt(t)?this.outModes.load(t):this.outModes.load({default:t})),this.path.load(e.path),e.random!==void 0&&(this.random=e.random),e.size!==void 0&&(this.size=e.size),e.speed!==void 0&&(this.speed=R(e.speed)),this.spin.load(e.spin),e.straight!==void 0&&(this.straight=e.straight),this.trail.load(e.trail),e.vibrate!==void 0&&(this.vibrate=e.vibrate),e.warp!==void 0&&(this.warp=e.warp)}}class rd extends rn{constructor(){super(),this.destroy=ot.none,this.speed=2}load(e){super.load(e),!x(e)&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class od extends Jo{constructor(){super(),this.animation=new rd,this.value=1}load(e){if(x(e))return;super.load(e);const t=e.animation;t!==void 0&&this.animation.load(t)}}class ad{constructor(){this.enable=!1,this.width=1920,this.height=1080}load(e){if(x(e))return;e.enable!==void 0&&(this.enable=e.enable);const t=e.width;t!==void 0&&(this.width=t);const s=e.height;s!==void 0&&(this.height=s)}}var ei;(function(i){i.delete="delete",i.wait="wait"})(ei||(ei={}));class cd{constructor(){this.mode=ei.delete,this.value=0}load(e){x(e)||(e.mode!==void 0&&(this.mode=e.mode),e.value!==void 0&&(this.value=e.value))}}class ld{constructor(){this.density=new ad,this.limit=new cd,this.value=0}load(e){x(e)||(this.density.load(e.density),this.limit.load(e.limit),e.value!==void 0&&(this.value=e.value))}}class ud{constructor(){this.blur=0,this.color=new Y,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(e){x(e)||(e.blur!==void 0&&(this.blur=e.blur),this.color=Y.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable),e.offset!==void 0&&(e.offset.x!==void 0&&(this.offset.x=e.offset.x),e.offset.y!==void 0&&(this.offset.y=e.offset.y)))}}class hd{constructor(){this.close=!0,this.fill=!0,this.options={},this.type="circle"}load(e){if(x(e))return;const t=e.options;if(t!==void 0)for(const s in t){const n=t[s];n&&(this.options[s]=re(this.options[s]??{},n))}e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}}class dd extends rn{constructor(){super(),this.destroy=ot.none,this.speed=5}load(e){super.load(e),!x(e)&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class fd extends Jo{constructor(){super(),this.animation=new dd,this.value=3}load(e){if(super.load(e),x(e))return;const t=e.animation;t!==void 0&&this.animation.load(t)}}class Yn{constructor(){this.width=0}load(e){x(e)||(e.color!==void 0&&(this.color=Zt.create(this.color,e.color)),e.width!==void 0&&(this.width=R(e.width)),e.opacity!==void 0&&(this.opacity=R(e.opacity)))}}class pd extends ut{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(e){super.load(e),!x(e)&&(e.opacityRate!==void 0&&(this.opacityRate=e.opacityRate),e.sizeRate!==void 0&&(this.sizeRate=e.sizeRate),e.velocityRate!==void 0&&(this.velocityRate=e.velocityRate))}}class gd{constructor(e,t){this._engine=e,this._container=t,this.bounce=new Qo,this.collisions=new Gh,this.color=new Zt,this.color.value="#fff",this.effect=new Kh,this.groups={},this.move=new nd,this.number=new ld,this.opacity=new od,this.reduceDuplicates=!1,this.shadow=new ud,this.shape=new hd,this.size=new fd,this.stroke=new Yn,this.zIndex=new pd}load(e){if(x(e))return;if(e.groups!==void 0)for(const s of Object.keys(e.groups)){if(!Object.hasOwn(e.groups,s))continue;const n=e.groups[s];n!==void 0&&(this.groups[s]=re(this.groups[s]??{},n))}e.reduceDuplicates!==void 0&&(this.reduceDuplicates=e.reduceDuplicates),this.bounce.load(e.bounce),this.color.load(Zt.create(this.color,e.color)),this.effect.load(e.effect),this.move.load(e.move),this.number.load(e.number),this.opacity.load(e.opacity),this.shape.load(e.shape),this.size.load(e.size),this.shadow.load(e.shadow),this.zIndex.load(e.zIndex),this.collisions.load(e.collisions),e.interactivity!==void 0&&(this.interactivity=re({},e.interactivity));const t=e.stroke;if(t&&(this.stroke=fe(t,s=>{const n=new Yn;return n.load(s),n})),this._container){const s=this._engine.updaters.get(this._container);if(s)for(const r of s)r.loadOptions&&r.loadOptions(this,e);const n=this._engine.interactors.get(this._container);if(n)for(const r of n)r.loadParticlesOptions&&r.loadParticlesOptions(this,e)}}}function Yo(i,...e){for(const t of e)i.load(t)}function Xo(i,e,...t){const s=new gd(i,e);return Yo(s,...t),s}class md{constructor(e,t){this._findDefaultTheme=s=>this.themes.find(n=>n.default.value&&n.default.mode===s)??this.themes.find(n=>n.default.value&&n.default.mode===ze.any),this._importPreset=s=>{this.load(this._engine.getPreset(s))},this._engine=e,this._container=t,this.autoPlay=!0,this.background=new Th,this.backgroundMask=new Ih,this.clear=!0,this.defaultThemes={},this.delay=0,this.fullScreen=new Ah,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new Ko(e,t),this.manualParticles=[],this.particles=Xo(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}load(e){var o,a;if(x(e))return;e.preset!==void 0&&fe(e.preset,c=>this._importPreset(c)),e.autoPlay!==void 0&&(this.autoPlay=e.autoPlay),e.clear!==void 0&&(this.clear=e.clear),e.key!==void 0&&(this.key=e.key),e.name!==void 0&&(this.name=e.name),e.delay!==void 0&&(this.delay=R(e.delay));const t=e.detectRetina;t!==void 0&&(this.detectRetina=t),e.duration!==void 0&&(this.duration=R(e.duration));const s=e.fpsLimit;s!==void 0&&(this.fpsLimit=s),e.pauseOnBlur!==void 0&&(this.pauseOnBlur=e.pauseOnBlur),e.pauseOnOutsideViewport!==void 0&&(this.pauseOnOutsideViewport=e.pauseOnOutsideViewport),e.zLayers!==void 0&&(this.zLayers=e.zLayers),this.background.load(e.background);const n=e.fullScreen;jo(n)?this.fullScreen.enable=n:this.fullScreen.load(n),this.backgroundMask.load(e.backgroundMask),this.interactivity.load(e.interactivity),e.manualParticles&&(this.manualParticles=e.manualParticles.map(c=>{const l=new Uh;return l.load(c),l})),this.particles.load(e.particles),this.style=re(this.style,e.style),this._engine.loadOptions(this,e),e.smooth!==void 0&&(this.smooth=e.smooth);const r=this._engine.interactors.get(this._container);if(r)for(const c of r)c.loadOptions&&c.loadOptions(this,e);if(e.responsive!==void 0)for(const c of e.responsive){const l=new Nh;l.load(c),this.responsive.push(l)}if(this.responsive.sort((c,l)=>c.maxWidth-l.maxWidth),e.themes!==void 0)for(const c of e.themes){const l=this.themes.find(u=>u.name===c.name);if(l)l.load(c);else{const u=new Bh;u.load(c),this.themes.push(u)}}this.defaultThemes.dark=(o=this._findDefaultTheme(ze.dark))==null?void 0:o.name,this.defaultThemes.light=(a=this._findDefaultTheme(ze.light))==null?void 0:a.name}setResponsive(e,t,s){this.load(s);const n=this.responsive.find(r=>r.mode===st.screen&&screen?r.maxWidth>screen.availWidth:r.maxWidth*t>e);return this.load(n==null?void 0:n.options),n==null?void 0:n.maxWidth}setTheme(e){if(e){const t=this.themes.find(s=>s.name===e);t&&this.load(t.options)}else{const t=zo("(prefers-color-scheme: dark)"),s=t==null?void 0:t.matches,n=this._findDefaultTheme(s?ze.dark:ze.light);n&&this.load(n.options)}}}var zt;(function(i){i.external="external",i.particles="particles"})(zt||(zt={}));class yd{constructor(e,t){this.container=t,this._engine=e,this._interactors=[],this._externalInteractors=[],this._particleInteractors=[]}externalInteract(e){for(const t of this._externalInteractors)t.isEnabled()&&t.interact(e)}handleClickMode(e){var t;for(const s of this._externalInteractors)(t=s.handleClickMode)==null||t.call(s,e)}async init(){this._interactors=await this._engine.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[];for(const e of this._interactors){switch(e.type){case zt.external:this._externalInteractors.push(e);break;case zt.particles:this._particleInteractors.push(e);break}e.init()}}particlesInteract(e,t){for(const s of this._externalInteractors)s.clear(e,t);for(const s of this._particleInteractors)s.isEnabled(e)&&s.interact(e,t)}reset(e){for(const t of this._externalInteractors)t.isEnabled()&&t.reset(e);for(const t of this._particleInteractors)t.isEnabled(e)&&t.reset(e)}}var _e;(function(i){i.normal="normal",i.inside="inside",i.outside="outside"})(_e||(_e={}));function vd(i,e,t,s){const n=e.options[i];if(n)return re({close:e.close,fill:e.fill},ve(n,t,s))}function bd(i,e,t,s){const n=e.options[i];if(n)return re({close:e.close,fill:e.fill},ve(n,t,s))}function Xn(i){if(!$(i.outMode,i.checkModes))return;const e=i.radius*J;i.coord>i.maxCoord-e?i.setCb(-i.radius):i.coord<e&&i.setCb(i.radius)}class wd{constructor(e,t){this.container=t,this._calcPosition=(s,n,r,o=Rn)=>{for(const p of s.plugins.values()){const y=p.particlePosition!==void 0?p.particlePosition(n,this):void 0;if(y)return oe.create(y.x,y.y,r)}const a=s.canvas.size,c=Xu({size:a,position:n}),l=oe.create(c.x,c.y,r),u=this.getRadius(),h=this.options.move.outModes,d=p=>{Xn({outMode:p,checkModes:[F.bounce],coord:l.x,maxCoord:s.canvas.size.width,setCb:y=>l.x+=y,radius:u})},f=p=>{Xn({outMode:p,checkModes:[F.bounce],coord:l.y,maxCoord:s.canvas.size.height,setCb:y=>l.y+=y,radius:u})};return d(h.left??h.default),d(h.right??h.default),f(h.top??h.default),f(h.bottom??h.default),this._checkOverlap(l,o)?this._calcPosition(s,void 0,r,o+Ru):l},this._calculateVelocity=()=>{const s=Yu(this.direction),n=s.copy(),r=this.options.move;if(r.direction===H.inside||r.direction===H.outside)return n;const o=Ue(C(r.angle.value)),a=Ue(C(r.angle.offset)),c={left:a-o*B,right:a+o*B};return r.straight||(n.angle+=ae(R(c.left,c.right))),r.random&&typeof r.speed=="number"&&(n.length*=M()),n},this._checkOverlap=(s,n=Rn)=>{const r=this.options.collisions,o=this.getRadius();if(!r.enable)return!1;const a=r.overlap;if(a.enable)return!1;const c=a.retries;if(c>=Iu&&n>c)throw new Error(`${he} particle is overlapping and can't be placed`);return!!this.container.particles.find(l=>ce(s,l.position)<o+l.getRadius())},this._getRollColor=s=>{if(!s||!this.roll||!this.backColor&&!this.roll.alter)return s;const n=this.roll.horizontal&&this.roll.vertical?J*$n:$n,r=this.roll.horizontal?Math.PI*B:Ii;return Math.floor(((this.roll.angle??Ii)+r)/(Math.PI/n))%J?this.backColor?this.backColor:this.roll.alter?Ph(s,this.roll.alter.type,this.roll.alter.value):s:s},this._initPosition=s=>{const n=this.container,r=C(this.options.zIndex.value);this.position=this._calcPosition(n,s,de(r,Au,n.zLayers)),this.initialPosition=this.position.copy();const o=n.canvas.size;switch(this.moveCenter={...Fo(this.options.move.center,o),radius:this.options.move.center.radius??ju,mode:this.options.move.center.mode??jt.percent},this.direction=Qu(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case H.inside:this.outType=_e.inside;break;case H.outside:this.outType=_e.outside;break}this.offset=V.origin},this._engine=e}destroy(e){var r,o,a;if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const t=this.container,s=this.pathGenerator,n=t.shapeDrawers.get(this.shape);(r=n==null?void 0:n.particleDestroy)==null||r.call(n,this);for(const c of t.plugins.values())(o=c.particleDestroyed)==null||o.call(c,this,e);for(const c of t.particles.updaters)(a=c.particleDestroyed)==null||a.call(c,this,e);s==null||s.reset(this),this._engine.dispatchEvent(ee.particleDestroyed,{container:this.container,data:{particle:this}})}draw(e){const t=this.container,s=t.canvas;for(const n of t.plugins.values())s.drawParticlePlugin(n,this,e);s.drawParticle(this,e)}getFillColor(){return this._getRollColor(this.bubble.color??Gn(this.color))}getMass(){return this.getRadius()**Te*Math.PI*B}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){return this.bubble.radius??this.size.value}getStrokeColor(){return this._getRollColor(this.bubble.color??Gn(this.strokeColor))}init(e,t,s,n){var I,X,A,W,ht,dt;const r=this.container,o=this._engine;this.id=e,this.group=n,this.effectClose=!0,this.effectFill=!0,this.shapeClose=!0,this.shapeFill=!0,this.pathRotation=!1,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.isRotating=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType=_e.normal,this.ignoresResizeRatio=!0;const a=r.retina.pixelRatio,c=r.actualOptions,l=Xo(this._engine,r,c.particles),{reduceDuplicates:u}=l,h=l.effect.type,d=l.shape.type;this.effect=ve(h,this.id,u),this.shape=ve(d,this.id,u);const f=l.effect,p=l.shape;if(s){if((I=s.effect)!=null&&I.type){const L=s.effect.type,qe=ve(L,this.id,u);qe&&(this.effect=qe,f.load(s.effect))}if((X=s.shape)!=null&&X.type){const L=s.shape.type,qe=ve(L,this.id,u);qe&&(this.shape=qe,p.load(s.shape))}}if(this.effect===At){const L=[...this.container.effectDrawers.keys()];this.effect=L[Math.floor(Math.random()*L.length)]}if(this.shape===At){const L=[...this.container.shapeDrawers.keys()];this.shape=L[Math.floor(Math.random()*L.length)]}this.effectData=vd(this.effect,f,this.id,u),this.shapeData=bd(this.shape,p,this.id,u),l.load(s);const y=this.effectData;y&&l.load(y.particles);const m=this.shapeData;m&&l.load(m.particles);const _=new Ko(o,r);_.load(r.actualOptions.interactivity),_.load(l.interactivity),this.interactivity=_,this.effectFill=(y==null?void 0:y.fill)??l.effect.fill,this.effectClose=(y==null?void 0:y.close)??l.effect.close,this.shapeFill=(m==null?void 0:m.fill)??l.shape.fill,this.shapeClose=(m==null?void 0:m.close)??l.shape.close,this.options=l;const w=this.options.move.path;this.pathDelay=C(w.delay.value)*K,w.generator&&(this.pathGenerator=this._engine.getPathGenerator(w.generator),this.pathGenerator&&r.addPath(w.generator,this.pathGenerator)&&this.pathGenerator.init(r)),r.retina.initParticle(this),this.size=No(this.options.size,a),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(t),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy(),this.moveDecay=Ro-C(this.options.move.decay);const v=r.particles;v.setLastZIndex(this.position.z),this.zIndexFactor=this.position.z/r.zLayers,this.sides=24;let b=r.effectDrawers.get(this.effect);b||(b=this._engine.getEffectDrawer(this.effect),b&&r.effectDrawers.set(this.effect,b)),b!=null&&b.loadEffect&&b.loadEffect(this);let k=r.shapeDrawers.get(this.shape);k||(k=this._engine.getShapeDrawer(this.shape),k&&r.shapeDrawers.set(this.shape,k)),k!=null&&k.loadShape&&k.loadShape(this);const S=k==null?void 0:k.getSidesCount;S&&(this.sides=S(this)),this.spawning=!1,this.shadowColor=we(this._engine,this.options.shadow.color);for(const L of v.updaters)L.init(this);for(const L of v.movers)(A=L.init)==null||A.call(L,this);(W=b==null?void 0:b.particleInit)==null||W.call(b,r,this),(ht=k==null?void 0:k.particleInit)==null||ht.call(k,r,this);for(const L of r.plugins.values())(dt=L.particleCreated)==null||dt.call(L,this)}isInsideCanvas(){const e=this.getRadius(),t=this.container.canvas.size,s=this.position;return s.x>=-e&&s.y>=-e&&s.y<=t.height+e&&s.x<=t.width+e}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){var e;for(const t of this.container.particles.updaters)(e=t.reset)==null||e.call(t,this)}}class _d{constructor(e,t){this.position=e,this.particle=t}}var Tt;(function(i){i.circle="circle",i.rectangle="rectangle"})(Tt||(Tt={}));class Zo{constructor(e,t,s){this.position={x:e,y:t},this.type=s}}class Q extends Zo{constructor(e,t,s){super(e,t,Tt.circle),this.radius=s}contains(e){return ce(e,this.position)<=this.radius}intersects(e){const t=this.position,s=e.position,n={x:Math.abs(s.x-t.x),y:Math.abs(s.y-t.y)},r=this.radius;if(e instanceof Q||e.type===Tt.circle){const o=e,a=r+o.radius,c=Math.sqrt(n.x**Te+n.y**Te);return a>c}else if(e instanceof xe||e.type===Tt.rectangle){const o=e,{width:a,height:c}=o.size;return Math.pow(n.x-a,Te)+Math.pow(n.y-c,Te)<=r**Te||n.x<=r+a&&n.y<=r+c||n.x<=a||n.y<=c}return!1}}class xe extends Zo{constructor(e,t,s,n){super(e,t,Tt.rectangle),this.size={height:n,width:s}}contains(e){const t=this.size.width,s=this.size.height,n=this.position;return e.x>=n.x&&e.x<=n.x+t&&e.y>=n.y&&e.y<=n.y+s}intersects(e){if(e instanceof Q)return e.intersects(this);const t=this.size.width,s=this.size.height,n=this.position,r=e.position,o=e instanceof xe?e.size:{width:0,height:0},a=o.width,c=o.height;return r.x<n.x+t&&r.x+a>n.x&&r.y<n.y+s&&r.y+c>n.y}}class ji{constructor(e,t){this.rectangle=e,this.capacity=t,this._subdivide=()=>{const{x:s,y:n}=this.rectangle.position,{width:r,height:o}=this.rectangle.size,{capacity:a}=this;for(let c=0;c<gu;c++){const l=c%J;this._subs.push(new ji(new xe(s+r*B*l,n+o*B*(Math.round(c*B)-l),r*B,o*B),a))}this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(e){return this.rectangle.contains(e.position)?this._points.length<this.capacity?(this._points.push(e),!0):(this._divided||this._subdivide(),this._subs.some(t=>t.insert(e))):!1}query(e,t){const s=[];if(!e.intersects(this.rectangle))return[];for(const n of this._points)!e.contains(n.position)&&ce(e.position,n.position)>n.particle.getRadius()&&(!t||t(n.particle))||s.push(n.particle);if(this._divided)for(const n of this._subs)s.push(...n.query(e,t));return s}queryCircle(e,t,s){return this.query(new Q(e.x,e.y,t),s)}queryRectangle(e,t,s){return this.query(new xe(e.x,e.y,t.width,t.height),s)}}const Zn=i=>{const{height:e,width:t}=i;return new xe(Un*t,Un*e,Nn*t,Nn*e)};class xd{constructor(e,t){this._addToPool=(...n)=>{this._pool.push(...n)},this._applyDensity=(n,r,o)=>{var f;const a=n.number;if(!((f=n.number.density)!=null&&f.enable)){o===void 0?this._limit=a.limit.value:a.limit&&this._groupLimits.set(o,a.limit.value);return}const c=this._initDensityFactor(a.density),l=a.value,u=a.limit.value>Fn?a.limit.value:l,h=Math.min(l,u)*c+r,d=Math.min(this.count,this.filter(p=>p.group===o).length);o===void 0?this._limit=a.limit.value*c:this._groupLimits.set(o,a.limit.value*c),d<h?this.push(Math.abs(h-d),void 0,n,o):d>h&&this.removeQuantity(d-h,o)},this._initDensityFactor=n=>{const r=this._container;if(!r.canvas.element||!n.enable)return Lu;const o=r.canvas.element,a=r.retina.pixelRatio;return o.width*o.height/(n.height*n.width*a**Te)},this._pushParticle=(n,r,o,a)=>{try{let c=this._pool.pop();c||(c=new wd(this._engine,this._container)),c.init(this._nextId,n,r,o);let l=!0;return a&&(l=a(c)),l?(this._array.push(c),this._zArray.push(c),this._nextId++,this._engine.dispatchEvent(ee.particleAdded,{container:this._container,data:{particle:c}}),c):void 0}catch(c){at().warning(`${he} adding particle: ${c}`)}},this._removeParticle=(n,r,o)=>{const a=this._array[n];if(!a||a.group!==r)return!1;const c=this._zArray.indexOf(a);return this._array.splice(n,Ai),this._zArray.splice(c,Ai),a.destroy(o),this._engine.dispatchEvent(ee.particleRemoved,{container:this._container,data:{particle:a}}),this._addToPool(a),!0},this._engine=e,this._container=t,this._nextId=0,this._array=[],this._zArray=[],this._pool=[],this._limit=0,this._groupLimits=new Map,this._needsSort=!1,this._lastZIndex=0,this._interactionManager=new yd(e,t),this._pluginsInitialized=!1;const s=t.canvas.size;this.quadTree=new ji(Zn(s),In),this.movers=[],this.updaters=[]}get count(){return this._array.length}addManualParticles(){const e=this._container;e.actualOptions.manualParticles.forEach(s=>this.addParticle(s.position?Fo(s.position,e.canvas.size):void 0,s.options))}addParticle(e,t,s,n){const r=this._container.actualOptions.particles.number.limit.mode,o=s===void 0?this._limit:this._groupLimits.get(s)??this._limit,a=this.count;if(o>Fn)switch(r){case ei.delete:{const c=a+Mu-o;c>Du&&this.removeQuantity(c);break}case ei.wait:if(a>=o)return;break}return this._pushParticle(e,t,s,n)}clear(){this._array=[],this._zArray=[],this._pluginsInitialized=!1}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}draw(e){const t=this._container,s=t.canvas;s.clear(),this.update(e);for(const n of t.plugins.values())s.drawPlugin(n,e);for(const n of this._zArray)n.draw(e)}filter(e){return this._array.filter(e)}find(e){return this._array.find(e)}get(e){return this._array[e]}handleClickMode(e){this._interactionManager.handleClickMode(e)}async init(){var n,r;const e=this._container,t=e.actualOptions;this._lastZIndex=0,this._needsSort=!1,await this.initPlugins();let s=!1;for(const o of e.plugins.values())if(s=((n=o.particlesInitialization)==null?void 0:n.call(o))??s,s)break;if(this.addManualParticles(),!s){const o=t.particles,a=o.groups;for(const c in a){const l=a[c];for(let u=this.count,h=0;h<((r=l.number)==null?void 0:r.value)&&u<o.number.value;u++,h++)this.addParticle(void 0,l,c)}for(let c=this.count;c<o.number.value;c++)this.addParticle()}}async initPlugins(){if(this._pluginsInitialized)return;const e=this._container;this.movers=await this._engine.getMovers(e,!0),this.updaters=await this._engine.getUpdaters(e,!0),await this._interactionManager.init();for(const t of e.pathGenerators.values())t.init(e)}push(e,t,s,n){for(let r=0;r<e;r++)this.addParticle(t==null?void 0:t.position,s,n)}async redraw(){this.clear(),await this.init(),this.draw({value:0,factor:0})}remove(e,t,s){this.removeAt(this._array.indexOf(e),void 0,t,s)}removeAt(e,t=pu,s,n){if(e<zs||e>this.count)return;let r=0;for(let o=e;r<t&&o<this.count;o++)this._removeParticle(o,s,n)&&(o--,r++)}removeQuantity(e,t){this.removeAt(zs,e,t)}setDensity(){const e=this._container.actualOptions,t=e.particles.groups;for(const s in t)this._applyDensity(t[s],zu,s);this._applyDensity(e.particles,e.manualParticles.length)}setLastZIndex(e){this._lastZIndex=e,this._needsSort=this._needsSort||this._lastZIndex<e}setResizeFactor(e){this._resizeFactor=e}update(e){var r,o;const t=this._container,s=new Set;this.quadTree=new ji(Zn(t.canvas.size),In);for(const a of t.pathGenerators.values())a.update();for(const a of t.plugins.values())(r=a.update)==null||r.call(a,e);const n=this._resizeFactor;for(const a of this._array){n&&!a.ignoresResizeRatio&&(a.position.x*=n.width,a.position.y*=n.height,a.initialPosition.x*=n.width,a.initialPosition.y*=n.height),a.ignoresResizeRatio=!1,this._interactionManager.reset(a);for(const c of this._container.plugins.values()){if(a.destroyed)break;(o=c.particleUpdate)==null||o.call(c,a,e)}for(const c of this.movers)c.isEnabled(a)&&c.move(a,e);if(a.destroyed){s.add(a);continue}this.quadTree.insert(new _d(a.getPosition(),a))}if(s.size){const a=c=>!s.has(c);this._array=this.filter(a),this._zArray=this._zArray.filter(a);for(const c of s)this._engine.dispatchEvent(ee.particleRemoved,{container:this._container,data:{particle:c}});this._addToPool(...s)}this._interactionManager.externalInteract(e);for(const a of this._array){for(const c of this.updaters)c.update(a,e);!a.destroyed&&!a.spawning&&this._interactionManager.particlesInteract(a,e)}if(delete this._resizeFactor,this._needsSort){const a=this._zArray;a.sort((c,l)=>l.position.z-c.position.z||c.id-l.id),this._lastZIndex=a[a.length-Io].position.z,this._needsSort=!1}}}class kd{constructor(e){this.container=e,this.pixelRatio=An,this.reduceFactor=jn}init(){const e=this.container,t=e.actualOptions;this.pixelRatio=!t.detectRetina||ct()?An:window.devicePixelRatio,this.reduceFactor=jn;const s=this.pixelRatio,n=e.canvas;if(n.element){const a=n.element;n.size.width=a.offsetWidth*s,n.size.height=a.offsetHeight*s}const r=t.particles,o=r.move;this.maxSpeed=C(o.gravity.maxSpeed)*s,this.sizeAnimationSpeed=C(r.size.animation.speed)*s}initParticle(e){const t=e.options,s=this.pixelRatio,n=t.move,r=n.distance,o=e.retina;o.moveDrift=C(n.drift)*s,o.moveSpeed=C(n.speed)*s,o.sizeAnimationSpeed=C(t.size.animation.speed)*s;const a=o.maxDistance;a.horizontal=r.horizontal!==void 0?r.horizontal*s:void 0,a.vertical=r.vertical!==void 0?r.vertical*s:void 0,o.maxSpeed=C(n.gravity.maxSpeed)*s}}function D(i){return i&&!i.destroyed}function Sd(i,e=Zi,t=!1){return{value:i,factor:t?Zi/e:Zi*i/K}}function vt(i,e,...t){const s=new md(i,e);return Yo(s,...t),s}class Pd{constructor(e,t,s){this._intersectionManager=n=>{if(!(!D(this)||!this.actualOptions.pauseOnOutsideViewport))for(const r of n)r.target===this.interactivity.element&&(r.isIntersecting?this.play():this.pause())},this._nextFrame=n=>{try{if(!this._smooth&&this._lastFrameTime!==void 0&&n<this._lastFrameTime+K/this.fpsLimit){this.draw(!1);return}this._lastFrameTime??(this._lastFrameTime=n);const r=Sd(n-this._lastFrameTime,this.fpsLimit,this._smooth);if(this.addLifeTime(r.value),this._lastFrameTime=n,r.value>K){this.draw(!1);return}if(this.particles.draw(r),!this.alive()){this.destroy();return}this.animationStatus&&this.draw(!1)}catch(r){at().error(`${he} in animation loop`,r)}},this._engine=e,this.id=Symbol(t),this.fpsLimit=120,this._smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this._lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._clickHandlers=new Map,this._sourceOptions=s,this._initialSourceOptions=s,this.retina=new kd(this),this.canvas=new Oh(this,this._engine),this.particles=new xd(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.effectDrawers=new Map,this.shapeDrawers=new Map,this._options=vt(this._engine,this),this.actualOptions=vt(this._engine,this),this._eventListeners=new Eh(this),this._intersectionObserver=sh(n=>this._intersectionManager(n)),this._engine.dispatchEvent(ee.containerBuilt,{container:this})}get animationStatus(){return!this._paused&&!this.pageHidden&&D(this)}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(e){if(!D(this))return;const t=this.interactivity.element;if(!t)return;const s=(h,d,f)=>{if(!D(this))return;const p=this.retina.pixelRatio,y={x:d.x*p,y:d.y*p},m=this.particles.quadTree.queryCircle(y,f*p);e(h,m)},n=h=>{if(!D(this))return;const d=h,f={x:d.offsetX||d.clientX,y:d.offsetY||d.clientY};s(h,f,xu)},r=()=>{D(this)&&(l=!0,u=!1)},o=()=>{D(this)&&(u=!0)},a=h=>{if(D(this)){if(l&&!u){const d=h;let f=d.touches[d.touches.length-Ln];if(!f&&(f=d.changedTouches[d.changedTouches.length-Ln],!f))return;const p=this.canvas.element,y=p?p.getBoundingClientRect():void 0,m={x:f.clientX-(y?y.left:Ri),y:f.clientY-(y?y.top:Ri)};s(h,m,Math.max(f.radiusX,f.radiusY))}l=!1,u=!1}},c=()=>{D(this)&&(l=!1,u=!1)};let l=!1,u=!1;this._clickHandlers.set("click",n),this._clickHandlers.set("touchstart",r),this._clickHandlers.set("touchmove",o),this._clickHandlers.set("touchend",a),this._clickHandlers.set("touchcancel",c);for(const[h,d]of this._clickHandlers)t.addEventListener(h,d)}addLifeTime(e){this._lifeTime+=e}addPath(e,t,s=!1){return!D(this)||!s&&this.pathGenerators.has(e)?!1:(this.pathGenerators.set(e,t),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}clearClickHandlers(){var e;if(D(this)){for(const[t,s]of this._clickHandlers)(e=this.interactivity.element)==null||e.removeEventListener(t,s);this._clickHandlers.clear()}}destroy(e=!0){var t,s;if(D(this)){this.stop(),this.clearClickHandlers(),this.particles.destroy(),this.canvas.destroy();for(const n of this.effectDrawers.values())(t=n.destroy)==null||t.call(n,this);for(const n of this.shapeDrawers.values())(s=n.destroy)==null||s.call(n,this);for(const n of this.effectDrawers.keys())this.effectDrawers.delete(n);for(const n of this.shapeDrawers.keys())this.shapeDrawers.delete(n);if(this._engine.clearPlugins(this),this.destroyed=!0,e){const n=this._engine.items,r=n.findIndex(o=>o===this);r>=ku&&n.splice(r,To)}this._engine.dispatchEvent(ee.containerDestroyed,{container:this})}}draw(e){if(!D(this))return;let t=e;const s=n=>{t&&(this._lastFrameTime=void 0,t=!1),this._nextFrame(n)};this._drawAnimationFrame=Ku(n=>s(n))}async export(e,t={}){for(const s of this.plugins.values()){if(!s.export)continue;const n=await s.export(e,t);if(n.supported)return n.blob}at().error(`${he} - Export plugin with type ${e} not found`)}handleClickMode(e){var t;if(D(this)){this.particles.handleClickMode(e);for(const s of this.plugins.values())(t=s.handleClickMode)==null||t.call(s,e)}}async init(){var l,u,h,d;if(!D(this))return;const e=this._engine.getSupportedEffects();for(const f of e){const p=this._engine.getEffectDrawer(f);p&&this.effectDrawers.set(f,p)}const t=this._engine.getSupportedShapes();for(const f of t){const p=this._engine.getShapeDrawer(f);p&&this.shapeDrawers.set(f,p)}await this.particles.initPlugins(),this._options=vt(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=vt(this._engine,this,this._options);const s=await this._engine.getAvailablePlugins(this);for(const[f,p]of s)this.plugins.set(f,p);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize();const{zLayers:n,duration:r,delay:o,fpsLimit:a,smooth:c}=this.actualOptions;this.zLayers=n,this._duration=C(r)*K,this._delay=C(o)*K,this._lifeTime=0,this.fpsLimit=a>Pu?a:Su,this._smooth=c;for(const f of this.effectDrawers.values())await((l=f.init)==null?void 0:l.call(f,this));for(const f of this.shapeDrawers.values())await((u=f.init)==null?void 0:u.call(f,this));for(const f of this.plugins.values())await((h=f.init)==null?void 0:h.call(f));this._engine.dispatchEvent(ee.containerInit,{container:this}),await this.particles.init(),this.particles.setDensity();for(const f of this.plugins.values())(d=f.particlesSetup)==null||d.call(f);this._engine.dispatchEvent(ee.particlesSetup,{container:this})}async loadTheme(e){D(this)&&(this._currentTheme=e,await this.refresh())}pause(){var e;if(D(this)&&(this._drawAnimationFrame!==void 0&&(Ju(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const t of this.plugins.values())(e=t.pause)==null||e.call(t);this.pageHidden||(this._paused=!0),this._engine.dispatchEvent(ee.containerPaused,{container:this})}}play(e){if(!D(this))return;const t=this._paused||e;if(this._firstStart&&!this.actualOptions.autoPlay){this._firstStart=!1;return}if(this._paused&&(this._paused=!1),t)for(const s of this.plugins.values())s.play&&s.play();this._engine.dispatchEvent(ee.containerPlay,{container:this}),this.draw(t??!1)}async refresh(){if(D(this))return this.stop(),this.start()}async reset(e){if(D(this))return this._initialSourceOptions=e,this._sourceOptions=e,this._options=vt(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=vt(this._engine,this,this._options),this.refresh()}async start(){!D(this)||this.started||(await this.init(),this.started=!0,await new Promise(e=>{const t=async()=>{var s;this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const n of this.plugins.values())await((s=n.start)==null?void 0:s.call(n));this._engine.dispatchEvent(ee.containerStarted,{container:this}),this.play(),e()};this._delayTimeout=setTimeout(()=>void t(),this._delay)}))}stop(){var e;if(!(!D(this)||!this.started)){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const t of this.plugins.values())(e=t.stop)==null||e.call(t);for(const t of this.plugins.keys())this.plugins.delete(t);this._sourceOptions=this._options,this._engine.dispatchEvent(ee.containerStopped,{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const e=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this._responsiveMaxWidth===e?!1:(this._responsiveMaxWidth=e,!0)}}class Cd{constructor(){this._listeners=new Map}addEventListener(e,t){this.removeEventListener(e,t);let s=this._listeners.get(e);s||(s=[],this._listeners.set(e,s)),s.push(t)}dispatchEvent(e,t){const s=this._listeners.get(e);s==null||s.forEach(n=>n(t))}hasEventListener(e){return!!this._listeners.get(e)}removeAllEventListeners(e){e?this._listeners.delete(e):this._listeners=new Map}removeEventListener(e,t){const s=this._listeners.get(e);if(!s)return;const n=s.length,r=s.indexOf(t);r<zs||(n===Ai?this._listeners.delete(e):s.splice(r,Ai))}}async function cs(i,e,t,s=!1){let n=e.get(i);return(!n||s)&&(n=await Promise.all([...t.values()].map(r=>r(i))),e.set(i,n)),n}async function Od(i){const e=ve(i.url,i.index);if(!e)return i.fallback;const t=await fetch(e);return t.ok?await t.json():(at().error(`${he} ${t.status} while retrieving config file`),i.fallback)}const Ed=i=>{let e;if(i instanceof HTMLCanvasElement||i.tagName.toLowerCase()===es)e=i,e.dataset[et]||(e.dataset[et]=Tn);else{const s=i.getElementsByTagName(es);s.length?(e=s[Cu],e.dataset[et]=Tn):(e=document.createElement(es),e.dataset[et]=Oo,i.appendChild(e))}const t="100%";return e.style.width||(e.style.width=t),e.style.height||(e.style.height=t),e},Td=(i,e)=>{let t=e??document.getElementById(i);return t||(t=document.createElement("div"),t.id=i,t.dataset[et]=Oo,document.body.append(t),t)};class Rd{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new Cd,this._initialized=!1,this.plugins=[],this.colorManagers=new Map,this.easingFunctions=new Map,this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.effectDrawers=new Map,this.shapeDrawers=new Map,this.pathGenerators=new Map}get configs(){const e={};for(const[t,s]of this._configs)e[t]=s;return e}get items(){return this._domArray}get version(){return"3.8.1"}async addColorManager(e,t=!0){this.colorManagers.set(e.key,e),await this.refresh(t)}addConfig(e){const t=e.key??e.name??"default";this._configs.set(t,e),this._eventDispatcher.dispatchEvent(ee.configAdded,{data:{name:t,config:e}})}async addEasing(e,t,s=!0){this.getEasing(e)||(this.easingFunctions.set(e,t),await this.refresh(s))}async addEffect(e,t,s=!0){fe(e,n=>{this.getEffectDrawer(n)||this.effectDrawers.set(n,t)}),await this.refresh(s)}addEventListener(e,t){this._eventDispatcher.addEventListener(e,t)}async addInteractor(e,t,s=!0){this._initializers.interactors.set(e,t),await this.refresh(s)}async addMover(e,t,s=!0){this._initializers.movers.set(e,t),await this.refresh(s)}async addParticleUpdater(e,t,s=!0){this._initializers.updaters.set(e,t),await this.refresh(s)}async addPathGenerator(e,t,s=!0){this.getPathGenerator(e)||this.pathGenerators.set(e,t),await this.refresh(s)}async addPlugin(e,t=!0){this.getPlugin(e.id)||this.plugins.push(e),await this.refresh(t)}async addPreset(e,t,s=!1,n=!0){(s||!this.getPreset(e))&&this.presets.set(e,t),await this.refresh(n)}async addShape(e,t=!0){for(const s of e.validTypes)this.getShapeDrawer(s)||this.shapeDrawers.set(s,e);await this.refresh(t)}checkVersion(e){if(this.version!==e)throw new Error(`The tsParticles version is different from the loaded plugins version. Engine version: ${this.version}. Plugin version: ${e}`)}clearPlugins(e){this.updaters.delete(e),this.movers.delete(e),this.interactors.delete(e)}dispatchEvent(e,t){this._eventDispatcher.dispatchEvent(e,t)}dom(){return this.items}domItem(e){return this.item(e)}async getAvailablePlugins(e){const t=new Map;for(const s of this.plugins)s.needsPlugin(e.actualOptions)&&t.set(s.id,await s.getPlugin(e));return t}getEasing(e){return this.easingFunctions.get(e)??(t=>t)}getEffectDrawer(e){return this.effectDrawers.get(e)}async getInteractors(e,t=!1){return cs(e,this.interactors,this._initializers.interactors,t)}async getMovers(e,t=!1){return cs(e,this.movers,this._initializers.movers,t)}getPathGenerator(e){return this.pathGenerators.get(e)}getPlugin(e){return this.plugins.find(t=>t.id===e)}getPreset(e){return this.presets.get(e)}getShapeDrawer(e){return this.shapeDrawers.get(e)}getSupportedEffects(){return this.effectDrawers.keys()}getSupportedShapes(){return this.shapeDrawers.keys()}async getUpdaters(e,t=!1){return cs(e,this.updaters,this._initializers.updaters,t)}init(){this._initialized||(this._initialized=!0)}item(e){const{items:t}=this,s=t[e];if(!s||s.destroyed){t.splice(e,To);return}return s}async load(e){var d;const t=e.id??((d=e.element)==null?void 0:d.id)??`tsparticles${Math.floor(M()*Ou)}`,{index:s,url:n}=e,r=n?await Od({fallback:e.options,url:n,index:s}):e.options,o=ve(r,s),{items:a}=this,c=a.findIndex(f=>f.id.description===t),l=new Pd(this,t,o);if(c>=Eu){const f=this.item(c),p=f?Tu:Ii;f&&!f.destroyed&&f.destroy(!1),a.splice(c,p,l)}else a.push(l);const u=Td(t,e.element),h=Ed(u);return l.canvas.loadCanvas(h),await l.start(),l}loadOptions(e,t){this.plugins.forEach(s=>{var n;return(n=s.loadOptions)==null?void 0:n.call(s,e,t)})}loadParticlesOptions(e,t,...s){const n=this.updaters.get(e);n&&n.forEach(r=>{var o;return(o=r.loadOptions)==null?void 0:o.call(r,t,...s)})}async refresh(e=!0){e&&await Promise.all(this.items.map(t=>t.refresh()))}removeEventListener(e,t){this._eventDispatcher.removeEventListener(e,t)}setOnClickHandler(e){const{items:t}=this;if(!t.length)throw new Error(`${he} can only set click handlers after calling tsParticles.load()`);t.forEach(s=>s.addClickHandler(e))}}function Id(){const i=new Rd;return i.init(),i}class Ce{constructor(e){this.type=zt.external,this.container=e}}class on{constructor(e){this.type=zt.particles,this.container=e}}var ye;(function(i){i.clockwise="clockwise",i.counterClockwise="counter-clockwise",i.random="random"})(ye||(ye={}));var er;(function(i){i.linear="linear",i.radial="radial",i.random="random"})(er||(er={}));var nt;(function(i){i.easeInBack="ease-in-back",i.easeInCirc="ease-in-circ",i.easeInCubic="ease-in-cubic",i.easeInLinear="ease-in-linear",i.easeInQuad="ease-in-quad",i.easeInQuart="ease-in-quart",i.easeInQuint="ease-in-quint",i.easeInExpo="ease-in-expo",i.easeInSine="ease-in-sine",i.easeOutBack="ease-out-back",i.easeOutCirc="ease-out-circ",i.easeOutCubic="ease-out-cubic",i.easeOutLinear="ease-out-linear",i.easeOutQuad="ease-out-quad",i.easeOutQuart="ease-out-quart",i.easeOutQuint="ease-out-quint",i.easeOutExpo="ease-out-expo",i.easeOutSine="ease-out-sine",i.easeInOutBack="ease-in-out-back",i.easeInOutCirc="ease-in-out-circ",i.easeInOutCubic="ease-in-out-cubic",i.easeInOutLinear="ease-in-out-linear",i.easeInOutQuad="ease-in-out-quad",i.easeInOutQuart="ease-in-out-quart",i.easeInOutQuint="ease-in-out-quint",i.easeInOutExpo="ease-in-out-expo",i.easeInOutSine="ease-in-out-sine"})(nt||(nt={}));const an=Id();ct()||(window.tsParticles=an);const Ad=i=>{const e=i.id??"tsparticles";return P.useEffect(()=>{let t;return an.load({id:e,url:i.url,options:i.options}).then(s=>{var n;t=s,(n=i.particlesLoaded)==null||n.call(i,s)}),()=>{t==null||t.destroy()}},[e,i,i.url,i.options]),g.jsx("div",{id:e,className:i.className})};async function jd(i){await i(an)}const Fs=.5,Md=2,$e=0,be=1,tr=60,ir=0,Dd=.01,zd=Math.PI*Md;function Ld(i){const e=i.initialPosition,{dx:t,dy:s}=te(e,i.position),n=Math.abs(t),r=Math.abs(s),{maxDistance:o}=i.retina,a=o.horizontal,c=o.vertical;if(!a&&!c)return;const l=(a&&n>=a)??!1,u=(c&&r>=c)??!1;if((l||u)&&!i.misplaced)i.misplaced=!!a&&n>a||!!c&&r>c,a&&(i.velocity.x=i.velocity.y*Fs-i.velocity.x),c&&(i.velocity.y=i.velocity.x*Fs-i.velocity.y);else if((!a||n<a)&&(!c||r<c)&&i.misplaced)i.misplaced=!1;else if(i.misplaced){const h=i.position,d=i.velocity;a&&(h.x<e.x&&d.x<$e||h.x>e.x&&d.x>$e)&&(d.x*=-M()),c&&(h.y<e.y&&d.y<$e||h.y>e.y&&d.y>$e)&&(d.y*=-M())}}function $d(i,e,t,s,n,r){Nd(i,r);const o=i.gravity,a=o!=null&&o.enable&&o.inverse?-be:be;n&&t&&(i.velocity.x+=n*r.factor/(tr*t)),o!=null&&o.enable&&t&&(i.velocity.y+=a*(o.acceleration*r.factor)/(tr*t));const c=i.moveDecay;i.velocity.multTo(c);const l=i.velocity.mult(t);o!=null&&o.enable&&s>$e&&(!o.inverse&&l.y>=$e&&l.y>=s||o.inverse&&l.y<=$e&&l.y<=-s)&&(l.y=a*s,t&&(i.velocity.y=l.y/t));const u=i.options.zIndex,h=(be-i.zIndexFactor)**u.velocityRate;l.multTo(h);const{position:d}=i;d.addTo(l),e.vibrate&&(d.x+=Math.sin(d.x*Math.cos(d.y)),d.y+=Math.cos(d.y*Math.sin(d.x)))}function Ud(i,e){const t=i.container;if(!i.spin)return;const s=i.spin.direction===ye.clockwise,n={x:s?Math.cos:Math.sin,y:s?Math.sin:Math.cos};i.position.x=i.spin.center.x+i.spin.radius*n.x(i.spin.angle),i.position.y=i.spin.center.y+i.spin.radius*n.y(i.spin.angle),i.spin.radius+=i.spin.acceleration;const r=Math.max(t.canvas.size.width,t.canvas.size.height),o=r*Fs;i.spin.radius>o?(i.spin.radius=o,i.spin.acceleration*=-be):i.spin.radius<ir&&(i.spin.radius=ir,i.spin.acceleration*=-be),i.spin.angle+=e*Dd*(be-i.spin.radius/r)}function Nd(i,e){var o;const t=i.options,s=t.move.path;if(!s.enable)return;if(i.lastPathTime<=i.pathDelay){i.lastPathTime+=e.value;return}const r=(o=i.pathGenerator)==null?void 0:o.generate(i,e);r&&i.velocity.addTo(r),s.clamp&&(i.velocity.x=de(i.velocity.x,-be,be),i.velocity.y=de(i.velocity.y,-be,be)),i.lastPathTime-=i.pathDelay}function Fd(i){return i.slow.inRange?i.slow.factor:be}function Bd(i){const e=i.container,t=i.options,s=t.move.spin;if(!s.enable)return;const n=s.position??{x:50,y:50},r=.01,o={x:n.x*r*e.canvas.size.width,y:n.y*r*e.canvas.size.height},a=i.getPosition(),c=ce(a,o),l=C(s.acceleration);i.retina.spinAcceleration=l*e.retina.pixelRatio,i.spin={center:o,direction:i.velocity.x>=$e?ye.clockwise:ye.counterClockwise,angle:M()*zd,radius:c,acceleration:i.retina.spinAcceleration}}const qd=2,Vd=1,Hd=1;class Wd{init(e){const t=e.options,s=t.move.gravity;e.gravity={enable:s.enable,acceleration:C(s.acceleration),inverse:s.inverse},Bd(e)}isEnabled(e){return!e.destroyed&&e.options.move.enable}move(e,t){var y,m;const s=e.options,n=s.move;if(!n.enable)return;const r=e.container,o=r.retina.pixelRatio;(y=e.retina).moveSpeed??(y.moveSpeed=C(n.speed)*o),(m=e.retina).moveDrift??(m.moveDrift=C(e.options.move.drift)*o);const a=Fd(e),c=e.retina.moveSpeed*r.retina.reduceFactor,l=e.retina.moveDrift,u=Se(s.size.value)*o,h=n.size?e.getRadius()/u:Vd,d=t.factor||Hd,f=c*h*a*d/qd,p=e.retina.maxSpeed??r.retina.maxSpeed;n.spin.enable?Ud(e,f):$d(e,n,f,p,l,t),Ld(e)}}async function Gd(i,e=!0){i.checkVersion("3.8.1"),await i.addMover("base",()=>Promise.resolve(new Wd),e)}const Kd=2,Jd=Math.PI*Kd,Qd=0,sr={x:0,y:0};function Yd(i){const{context:e,particle:t,radius:s}=i;t.circleRange||(t.circleRange={min:Qd,max:Jd});const n=t.circleRange;e.arc(sr.x,sr.y,s,n.min,n.max,!1)}const Xd=12,Zd=360,nr=0;class ef{constructor(){this.validTypes=["circle"]}draw(e){Yd(e)}getSidesCount(){return Xd}particleInit(e,t){const s=t.shapeData,n=(s==null?void 0:s.angle)??{max:Zd,min:nr};t.circleRange=xt(n)?{min:Ue(n.min),max:Ue(n.max)}:{min:nr,max:Ue(n)}}}async function tf(i,e=!0){i.checkVersion("3.8.1"),await i.addShape(new ef,e)}class sf{constructor(e,t){this._container=e,this._engine=t}init(e){const t=Yt(this._engine,e.options.color,e.id,e.options.reduceDuplicates);t&&(e.color=Wo(t,e.options.color.animation,this._container.retina.reduceFactor))}isEnabled(e){const{h:t,s,l:n}=e.options.color.animation,{color:r}=e;return!e.destroyed&&!e.spawning&&((r==null?void 0:r.h.value)!==void 0&&t.enable||(r==null?void 0:r.s.value)!==void 0&&s.enable||(r==null?void 0:r.l.value)!==void 0&&n.enable)}update(e,t){Go(e.color,t)}}async function nf(i,e=!0){i.checkVersion("3.8.1"),await i.addParticleUpdater("color",t=>Promise.resolve(new sf(t,i)),e)}var Ze;(function(i){i[i.r=1]="r",i[i.g=2]="g",i[i.b=3]="b",i[i.a=4]="a"})(Ze||(Ze={}));const rf=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,of=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,ui=16,af=1,cf=255;class lf{constructor(){this.key="hex",this.stringPrefix="#"}handleColor(e){return this._parseString(e.value)}handleRangeColor(e){return this._parseString(e.value)}parseString(e){return this._parseString(e)}_parseString(e){if(typeof e!="string"||!(e!=null&&e.startsWith(this.stringPrefix)))return;const t=e.replace(rf,(n,r,o,a,c)=>r+r+o+o+a+a+(c!==void 0?c+c:"")),s=of.exec(t);return s?{a:s[Ze.a]!==void 0?parseInt(s[Ze.a],ui)/cf:af,b:parseInt(s[Ze.b],ui),g:parseInt(s[Ze.g],ui),r:parseInt(s[Ze.r],ui)}:void 0}}async function uf(i,e=!0){i.checkVersion("3.8.1"),await i.addColorManager(new lf,e)}var kt;(function(i){i[i.h=1]="h",i[i.s=2]="s",i[i.l=3]="l",i[i.a=5]="a"})(kt||(kt={}));class hf{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(e){const t=e.value,s=t.hsl??e.value;if(s.h!==void 0&&s.s!==void 0&&s.l!==void 0)return Mt(s)}handleRangeColor(e){const t=e.value,s=t.hsl??e.value;if(s.h!==void 0&&s.l!==void 0)return Mt({h:C(s.h),l:C(s.l),s:C(s.s)})}parseString(e){if(!e.startsWith("hsl"))return;const t=/hsla?\(\s*(\d+)\s*[\s,]\s*(\d+)%\s*[\s,]\s*(\d+)%\s*([\s,]\s*(0|1|0?\.\d+|(\d{1,3})%)\s*)?\)/i,s=t.exec(e),n=4,r=1,o=10;return s?mh({a:s.length>n?Do(s[kt.a]):r,h:parseInt(s[kt.h],o),l:parseInt(s[kt.l],o),s:parseInt(s[kt.s],o)}):void 0}}async function df(i,e=!0){i.checkVersion("3.8.1"),await i.addColorManager(new hf,e)}class ff{constructor(e){this.container=e}init(e){const t=e.options.opacity,s=1;e.opacity=No(t,s);const n=t.animation;n.enable&&(e.opacity.velocity=C(n.speed)/Le*this.container.retina.reduceFactor,n.sync||(e.opacity.velocity*=M()))}isEnabled(e){return!e.destroyed&&!e.spawning&&!!e.opacity&&e.opacity.enable&&((e.opacity.maxLoops??0)<=0||(e.opacity.maxLoops??0)>0&&(e.opacity.loops??0)<(e.opacity.maxLoops??0))}reset(e){e.opacity&&(e.opacity.time=0,e.opacity.loops=0)}update(e,t){!this.isEnabled(e)||!e.opacity||tn(e,e.opacity,!0,e.options.opacity.animation.destroy,t)}}async function pf(i,e=!0){i.checkVersion("3.8.1"),await i.addParticleUpdater("opacity",t=>Promise.resolve(new ff(t)),e)}const Mi=0,Rt=0;function gf(i){if(i.outMode!==F.bounce&&i.outMode!==F.split||i.direction!==T.left&&i.direction!==T.right)return;i.bounds.right<Rt&&i.direction===T.left?i.particle.position.x=i.size+i.offset.x:i.bounds.left>i.canvasSize.width&&i.direction===T.right&&(i.particle.position.x=i.canvasSize.width-i.size-i.offset.x);const e=i.particle.velocity.x;let t=!1;if(i.direction===T.right&&i.bounds.right>=i.canvasSize.width&&e>Mi||i.direction===T.left&&i.bounds.left<=Rt&&e<Mi){const n=C(i.particle.options.bounce.horizontal.value);i.particle.velocity.x*=-n,t=!0}if(!t)return;const s=i.offset.x+i.size;i.bounds.right>=i.canvasSize.width&&i.direction===T.right?i.particle.position.x=i.canvasSize.width-s:i.bounds.left<=Rt&&i.direction===T.left&&(i.particle.position.x=s),i.outMode===F.split&&i.particle.destroy()}function mf(i){if(i.outMode!==F.bounce&&i.outMode!==F.split||i.direction!==T.bottom&&i.direction!==T.top)return;i.bounds.bottom<Rt&&i.direction===T.top?i.particle.position.y=i.size+i.offset.y:i.bounds.top>i.canvasSize.height&&i.direction===T.bottom&&(i.particle.position.y=i.canvasSize.height-i.size-i.offset.y);const e=i.particle.velocity.y;let t=!1;if(i.direction===T.bottom&&i.bounds.bottom>=i.canvasSize.height&&e>Mi||i.direction===T.top&&i.bounds.top<=Rt&&e<Mi){const n=C(i.particle.options.bounce.vertical.value);i.particle.velocity.y*=-n,t=!0}if(!t)return;const s=i.offset.y+i.size;i.bounds.bottom>=i.canvasSize.height&&i.direction===T.bottom?i.particle.position.y=i.canvasSize.height-s:i.bounds.top<=Rt&&i.direction===T.top&&(i.particle.position.y=s),i.outMode===F.split&&i.particle.destroy()}class yf{constructor(e){this.container=e,this.modes=[F.bounce,F.split]}update(e,t,s,n){if(!this.modes.includes(n))return;const r=this.container;let o=!1;for(const d of r.plugins.values())if(d.particleBounce!==void 0&&(o=d.particleBounce(e,s,t)),o)break;if(o)return;const a=e.getPosition(),c=e.offset,l=e.getRadius(),u=si(a,l),h=r.canvas.size;gf({particle:e,outMode:n,direction:t,bounds:u,canvasSize:h,offset:c,size:l}),mf({particle:e,outMode:n,direction:t,bounds:u,canvasSize:h,offset:c,size:l})}}const hi=0;class vf{constructor(e){this.container=e,this.modes=[F.destroy]}update(e,t,s,n){if(!this.modes.includes(n))return;const r=this.container;switch(e.outType){case _e.normal:case _e.outside:if(Xs(e.position,r.canvas.size,V.origin,e.getRadius(),t))return;break;case _e.inside:{const{dx:o,dy:a}=te(e.position,e.moveCenter),{x:c,y:l}=e.velocity;if(c<hi&&o>e.moveCenter.radius||l<hi&&a>e.moveCenter.radius||c>=hi&&o<-e.moveCenter.radius||l>=hi&&a<-e.moveCenter.radius)return;break}}r.particles.remove(e,e.group,!0)}}const di=0;class bf{constructor(e){this.container=e,this.modes=[F.none]}update(e,t,s,n){if(!this.modes.includes(n)||((e.options.move.distance.horizontal&&(t===T.left||t===T.right))??(e.options.move.distance.vertical&&(t===T.top||t===T.bottom))))return;const r=e.options.move.gravity,o=this.container,a=o.canvas.size,c=e.getRadius();if(r.enable){const l=e.position;(!r.inverse&&l.y>a.height+c&&t===T.bottom||r.inverse&&l.y<-c&&t===T.top)&&o.particles.remove(e)}else{if(e.velocity.y>di&&e.position.y<=a.height+c||e.velocity.y<di&&e.position.y>=-c||e.velocity.x>di&&e.position.x<=a.width+c||e.velocity.x<di&&e.position.x>=-c)return;Xs(e.position,o.canvas.size,V.origin,c,t)||o.particles.remove(e)}}}const fi=0,pi=0;class wf{constructor(e){this.container=e,this.modes=[F.out]}update(e,t,s,n){if(!this.modes.includes(n))return;const r=this.container;switch(e.outType){case _e.inside:{const{x:o,y:a}=e.velocity,c=V.origin;c.length=e.moveCenter.radius,c.angle=e.velocity.angle+Math.PI,c.addTo(V.create(e.moveCenter));const{dx:l,dy:u}=te(e.position,c);if(o<=fi&&l>=pi||a<=fi&&u>=pi||o>=fi&&l<=pi||a>=fi&&u<=pi)return;e.position.x=Math.floor(ae({min:0,max:r.canvas.size.width})),e.position.y=Math.floor(ae({min:0,max:r.canvas.size.height}));const{dx:h,dy:d}=te(e.position,e.moveCenter);e.direction=Math.atan2(-d,-h),e.velocity.angle=e.direction;break}default:{if(Xs(e.position,r.canvas.size,V.origin,e.getRadius(),t))return;switch(e.outType){case _e.outside:{e.position.x=Math.floor(ae({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.x,e.position.y=Math.floor(ae({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.y;const{dx:o,dy:a}=te(e.position,e.moveCenter);e.moveCenter.radius&&(e.direction=Math.atan2(a,o),e.velocity.angle=e.direction);break}case _e.normal:{const o=e.options.move.warp,a=r.canvas.size,c={bottom:a.height+e.getRadius()+e.offset.y,left:-e.getRadius()-e.offset.x,right:a.width+e.getRadius()+e.offset.x,top:-e.getRadius()-e.offset.y},l=e.getRadius(),u=si(e.position,l);t===T.right&&u.left>a.width+e.offset.x?(e.position.x=c.left,e.initialPosition.x=e.position.x,o||(e.position.y=M()*a.height,e.initialPosition.y=e.position.y)):t===T.left&&u.right<-e.offset.x&&(e.position.x=c.right,e.initialPosition.x=e.position.x,o||(e.position.y=M()*a.height,e.initialPosition.y=e.position.y)),t===T.bottom&&u.top>a.height+e.offset.y?(o||(e.position.x=M()*a.width,e.initialPosition.x=e.position.x),e.position.y=c.top,e.initialPosition.y=e.position.y):t===T.top&&u.bottom<-e.offset.y&&(o||(e.position.x=M()*a.width,e.initialPosition.x=e.position.x),e.position.y=c.bottom,e.initialPosition.y=e.position.y);break}}break}}}}const _f=(i,e)=>i.default===e||i.bottom===e||i.left===e||i.right===e||i.top===e;class xf{constructor(e){this._addUpdaterIfMissing=(t,s,n)=>{const r=t.options.move.outModes;!this.updaters.has(s)&&_f(r,s)&&this.updaters.set(s,n(this.container))},this._updateOutMode=(t,s,n,r)=>{for(const o of this.updaters.values())o.update(t,r,s,n)},this.container=e,this.updaters=new Map}init(e){this._addUpdaterIfMissing(e,F.bounce,t=>new yf(t)),this._addUpdaterIfMissing(e,F.out,t=>new wf(t)),this._addUpdaterIfMissing(e,F.destroy,t=>new vf(t)),this._addUpdaterIfMissing(e,F.none,t=>new bf(t))}isEnabled(e){return!e.destroyed&&!e.spawning}update(e,t){const s=e.options.move.outModes;this._updateOutMode(e,t,s.bottom??s.default,T.bottom),this._updateOutMode(e,t,s.left??s.default,T.left),this._updateOutMode(e,t,s.right??s.default,T.right),this._updateOutMode(e,t,s.top??s.default,T.top)}}async function kf(i,e=!0){i.checkVersion("3.8.1"),await i.addParticleUpdater("outModes",t=>Promise.resolve(new xf(t)),e)}var St;(function(i){i[i.r=1]="r",i[i.g=2]="g",i[i.b=3]="b",i[i.a=5]="a"})(St||(St={}));class Sf{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(e){const t=e.value,s=t.rgb??e.value;if(s.r!==void 0)return s}handleRangeColor(e){const t=e.value,s=t.rgb??e.value;if(s.r!==void 0)return{r:C(s.r),g:C(s.g),b:C(s.b)}}parseString(e){if(!e.startsWith(this.stringPrefix))return;const t=/rgba?\(\s*(\d{1,3})\s*[\s,]\s*(\d{1,3})\s*[\s,]\s*(\d{1,3})\s*([\s,]\s*(0|1|0?\.\d+|(\d{1,3})%)\s*)?\)/i,s=t.exec(e),n=10;return s?{a:s.length>4?Do(s[St.a]):1,b:parseInt(s[St.b],n),g:parseInt(s[St.g],n),r:parseInt(s[St.r],n)}:void 0}}async function Pf(i,e=!0){i.checkVersion("3.8.1"),await i.addColorManager(new Sf,e)}const We=0;class Cf{init(e){const t=e.container,s=e.options.size,n=s.animation;n.enable&&(e.size.velocity=(e.retina.sizeAnimationSpeed??t.retina.sizeAnimationSpeed)/Le*t.retina.reduceFactor,n.sync||(e.size.velocity*=M()))}isEnabled(e){return!e.destroyed&&!e.spawning&&e.size.enable&&((e.size.maxLoops??We)<=We||(e.size.maxLoops??We)>We&&(e.size.loops??We)<(e.size.maxLoops??We))}reset(e){e.size.loops=We}update(e,t){this.isEnabled(e)&&tn(e,e.size,!0,e.options.size.animation.destroy,t)}}async function Of(i,e=!0){i.checkVersion("3.8.1"),await i.addParticleUpdater("size",()=>Promise.resolve(new Cf),e)}async function Ef(i,e=!0){i.checkVersion("3.8.1"),await uf(i,!1),await df(i,!1),await Pf(i,!1),await Gd(i,!1),await tf(i,!1),await nf(i,!1),await pf(i,!1),await kf(i,!1),await Of(i,!1),await i.refresh(e)}async function Tf(i,e=!0){i.checkVersion("3.8.1"),await i.addEasing(nt.easeInQuad,t=>t**2,!1),await i.addEasing(nt.easeOutQuad,t=>1-(1-t)**2,!1),await i.addEasing(nt.easeInOutQuad,t=>t<.5?2*t**2:1-(-2*t+2)**2/2,!1),await i.refresh(e)}function Rf(i,e){const{context:t,opacity:s}=i,n=.5,r=t.globalAlpha;if(!e)return;const o=e.width,a=o*n;t.globalAlpha=s,t.drawImage(e,-a,-a,o,o),t.globalAlpha=r}const ls='"Twemoji Mozilla", Apple Color Emoji, "Segoe UI Emoji", "Noto Color Emoji", "EmojiOne Color"',rr=0;class If{constructor(){this.validTypes=["emoji"],this._emojiShapeDict=new Map}destroy(){for(const[e,t]of this._emojiShapeDict)t instanceof ImageBitmap&&(t==null||t.close()),this._emojiShapeDict.delete(e)}draw(e){const t=e.particle.emojiDataKey;if(!t)return;const s=this._emojiShapeDict.get(t);s&&Rf(e,s)}async init(e){const t=e.actualOptions,{validTypes:s}=this;if(!s.find(o=>$(o,t.particles.shape.type)))return;const n=[Wn(ls)],r=s.map(o=>t.particles.shape.options[o]).find(o=>!!o);r&&fe(r,o=>{o.font&&n.push(Wn(o.font))}),await Promise.all(n)}particleDestroy(e){e.emojiDataKey=void 0}particleInit(e,t){const n=t.shapeData;if(!(n!=null&&n.value))return;const r=ve(n.value,t.randomIndexData);if(!r)return;const o=typeof r=="string"?{font:n.font??ls,padding:n.padding??rr,value:r}:{font:ls,padding:rr,...n,...r},a=o.font,c=o.value,l=`${c}_${a}`;if(this._emojiShapeDict.has(l)){t.emojiDataKey=l;return}const u=o.padding*2,h=Se(t.size.value),d=h+u,f=d*2;let p;if(typeof OffscreenCanvas<"u"){const y=new OffscreenCanvas(f,f),m=y.getContext("2d");if(!m)return;m.font=`400 ${h*2}px ${a}`,m.textBaseline="middle",m.textAlign="center",m.fillText(c,d,d),p=y.transferToImageBitmap()}else{const y=document.createElement("canvas");y.width=f,y.height=f;const m=y.getContext("2d");if(!m)return;m.font=`400 ${h*2}px ${a}`,m.textBaseline="middle",m.textAlign="center",m.fillText(c,d,d),p=y}this._emojiShapeDict.set(l,p),t.emojiDataKey=l}}async function Af(i,e=!0){i.checkVersion("3.8.1"),await i.addShape(new If,e)}const jf=1,Mf=1,ea=0;function ta(i,e,t,s,n,r){const o=e.actualOptions.interactivity.modes.attract;if(!o)return;const a=e.particles.quadTree.query(n,r);for(const c of a){const{dx:l,dy:u,distance:h}=te(c.position,t),d=o.speed*o.factor,f=de(i.getEasing(o.easing)(Mf-h/s)*d,jf,o.maxSpeed),p=V.create(h?l/h*f:d,h?u/h*f:d);c.position.subFrom(p)}}function Df(i,e,t){e.attract||(e.attract={particles:[]});const{attract:s}=e;if(s.finish||(s.count||(s.count=0),s.count++,s.count===e.particles.count&&(s.finish=!0)),s.clicking){const n=e.interactivity.mouse.clickPosition,r=e.retina.attractModeDistance;if(!r||r<ea||!n)return;ta(i,e,n,r,new Q(n.x,n.y,r),o=>t(o))}else s.clicking===!1&&(s.particles=[])}function zf(i,e,t){const s=e.interactivity.mouse.position,n=e.retina.attractModeDistance;!n||n<ea||!s||ta(i,e,s,n,new Q(s.x,s.y,n),r=>t(r))}class Lf{constructor(){this.distance=200,this.duration=.4,this.easing=nt.easeOutQuad,this.factor=1,this.maxSpeed=50,this.speed=1}load(e){x(e)||(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.easing!==void 0&&(this.easing=e.easing),e.factor!==void 0&&(this.factor=e.factor),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed),e.speed!==void 0&&(this.speed=e.speed))}}const Bt="attract";let $f=class extends Ce{constructor(e,t){super(t),this._engine=e,t.attract||(t.attract={particles:[]}),this.handleClickMode=s=>{const n=this.container.actualOptions,r=n.interactivity.modes.attract;if(!(!r||s!==Bt)){t.attract||(t.attract={particles:[]}),t.attract.clicking=!0,t.attract.count=0;for(const o of t.attract.particles)this.isEnabled(o)&&o.velocity.setTo(o.initialVelocity);t.attract.particles=[],t.attract.finish=!1,setTimeout(()=>{t.destroyed||(t.attract||(t.attract={particles:[]}),t.attract.clicking=!1)},r.duration*K)}}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.attract;t&&(e.retina.attractModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions,s=e.interactivity.status===rt,n=t.interactivity.events,{enable:r,mode:o}=n.onHover,{enable:a,mode:c}=n.onClick;s&&r&&$(Bt,o)?zf(this._engine,this.container,l=>this.isEnabled(l)):a&&$(Bt,c)&&Df(this._engine,this.container,l=>this.isEnabled(l))}isEnabled(e){const t=this.container,s=t.actualOptions,n=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??s.interactivity).events;if((!n.position||!r.onHover.enable)&&(!n.clickPosition||!r.onClick.enable))return!1;const o=r.onHover.mode,a=r.onClick.mode;return $(Bt,o)||$(Bt,a)}loadModeOptions(e,...t){e.attract||(e.attract=new Lf);for(const s of t)e.attract.load(s==null?void 0:s.attract)}reset(){}};async function Uf(i,e=!0){i.checkVersion("3.8.1"),await i.addInteractor("externalAttract",t=>Promise.resolve(new $f(i,t)),e)}const Nf=2,ki=.5,Ff=Math.PI*ki,or=2,ia=10,Bf=0;function sa(i,e,t,s,n){const r=i.particles.quadTree.query(s,n);for(const o of r)s instanceof Q?$o($s(o),{position:e,mass:t**Nf*Ff,velocity:V.origin,factor:V.origin}):s instanceof xe&&ch(o,si(e,t))}function qf(i,e,t,s){const n=document.querySelectorAll(e);n.length&&n.forEach(r=>{const o=r,a=i.retina.pixelRatio,c={x:(o.offsetLeft+o.offsetWidth*ki)*a,y:(o.offsetTop+o.offsetHeight*ki)*a},l=o.offsetWidth*ki*a,u=ia*a,h=t.type===Dt.circle?new Q(c.x,c.y,l+u):new xe(o.offsetLeft*a-u,o.offsetTop*a-u,o.offsetWidth*a+u*or,o.offsetHeight*a+u*or);s(c,l,h)})}function Vf(i,e,t,s){en(t,e,(n,r)=>qf(i,n,r,(o,a,c)=>sa(i,o,a,c,s)))}function Hf(i,e){const t=i.retina.pixelRatio,s=ia*t,n=i.interactivity.mouse.position,r=i.retina.bounceModeDistance;!r||r<Bf||!n||sa(i,n,r,new Q(n.x,n.y,r+s),e)}class Wf{constructor(){this.distance=200}load(e){x(e)||e.distance!==void 0&&(this.distance=e.distance)}}const gi="bounce";class Gf extends Ce{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bounce;t&&(e.retina.bounceModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions,s=t.interactivity.events,n=e.interactivity.status===rt,r=s.onHover.enable,o=s.onHover.mode,a=s.onDiv;n&&r&&$(gi,o)?Hf(this.container,c=>this.isEnabled(c)):Vf(this.container,a,gi,c=>this.isEnabled(c))}isEnabled(e){const t=this.container,s=t.actualOptions,n=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??s.interactivity).events,o=r.onDiv;return!!n.position&&r.onHover.enable&&$(gi,r.onHover.mode)||Zs(gi,o)}loadModeOptions(e,...t){e.bounce||(e.bounce=new Wf);for(const s of t)e.bounce.load(s==null?void 0:s.bounce)}reset(){}}async function Kf(i,e=!0){i.checkVersion("3.8.1"),await i.addInteractor("externalBounce",t=>Promise.resolve(new Gf(t)),e)}class na{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(e){if(!x(e)){if(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.mix!==void 0&&(this.mix=e.mix),e.opacity!==void 0&&(this.opacity=e.opacity),e.color!==void 0){const t=Pe(this.color)?void 0:this.color;this.color=fe(e.color,s=>Y.create(t,s))}e.size!==void 0&&(this.size=e.size)}}}class Jf extends na{constructor(){super(),this.selectors=[]}load(e){super.load(e),!x(e)&&e.selectors!==void 0&&(this.selectors=e.selectors)}}class Qf extends na{load(e){super.load(e),!x(e)&&(this.divs=fe(e.divs,t=>{const s=new Jf;return s.load(t),s}))}}var ke;(function(i){i.color="color",i.opacity="opacity",i.size="size"})(ke||(ke={}));function ar(i,e,t,s){if(e>=t){const n=i+(e-t)*s;return de(n,i,e)}else if(e<t){const n=i-(t-e)*s;return de(n,e,i)}}const Ge="bubble",us=0,Yf=0,Xf=2,cr=1,lr=1,Zf=0,ep=0,hs=.5,ds=1;class tp extends Ce{constructor(e,t){super(e),this._clickBubble=()=>{var u;const s=this.container,n=s.actualOptions,r=s.interactivity.mouse.clickPosition,o=n.interactivity.modes.bubble;if(!o||!r)return;s.bubble||(s.bubble={});const a=s.retina.bubbleModeDistance;if(!a||a<us)return;const c=s.particles.quadTree.queryCircle(r,a,h=>this.isEnabled(h)),{bubble:l}=s;for(const h of c){if(!l.clicking)continue;h.bubble.inRange=!l.durationEnd;const d=h.getPosition(),f=ce(d,r),p=(new Date().getTime()-(s.interactivity.mouse.clickTime??Yf))/K;p>o.duration&&(l.durationEnd=!0),p>o.duration*Xf&&(l.clicking=!1,l.durationEnd=!1);const y={bubbleObj:{optValue:s.retina.bubbleModeSize,value:h.bubble.radius},particlesObj:{optValue:Se(h.options.size.value)*s.retina.pixelRatio,value:h.size.value},type:ke.size};this._process(h,f,p,y);const m={bubbleObj:{optValue:o.opacity,value:h.bubble.opacity},particlesObj:{optValue:Se(h.options.opacity.value),value:((u=h.opacity)==null?void 0:u.value)??cr},type:ke.opacity};this._process(h,f,p,m),!l.durationEnd&&f<=a?this._hoverBubbleColor(h,f):delete h.bubble.color}},this._hoverBubble=()=>{const s=this.container,n=s.interactivity.mouse.position,r=s.retina.bubbleModeDistance;if(!r||r<us||!n)return;const o=s.particles.quadTree.queryCircle(n,r,a=>this.isEnabled(a));for(const a of o){a.bubble.inRange=!0;const c=a.getPosition(),l=ce(c,n),u=lr-l/r;l<=r?u>=ep&&s.interactivity.status===rt&&(this._hoverBubbleSize(a,u),this._hoverBubbleOpacity(a,u),this._hoverBubbleColor(a,u)):this.reset(a),s.interactivity.status===As&&this.reset(a)}},this._hoverBubbleColor=(s,n,r)=>{const o=this.container.actualOptions,a=r??o.interactivity.modes.bubble;if(a){if(!s.bubble.finalColor){const c=a.color;if(!c)return;const l=ve(c);s.bubble.finalColor=Yt(this._engine,l)}if(s.bubble.finalColor)if(a.mix){s.bubble.color=void 0;const c=s.getFillColor();s.bubble.color=c?qo(sn(c,s.bubble.finalColor,lr-n,n)):s.bubble.finalColor}else s.bubble.color=s.bubble.finalColor}},this._hoverBubbleOpacity=(s,n,r)=>{var d,f;const o=this.container,a=o.actualOptions,c=(r==null?void 0:r.opacity)??((d=a.interactivity.modes.bubble)==null?void 0:d.opacity);if(!c)return;const l=s.options.opacity.value,u=((f=s.opacity)==null?void 0:f.value)??cr,h=ar(u,c,Se(l),n);h!==void 0&&(s.bubble.opacity=h)},this._hoverBubbleSize=(s,n,r)=>{const o=this.container,a=r!=null&&r.size?r.size*o.retina.pixelRatio:o.retina.bubbleModeSize;if(a===void 0)return;const c=Se(s.options.size.value)*o.retina.pixelRatio,l=s.size.value,u=ar(l,a,c,n);u!==void 0&&(s.bubble.radius=u)},this._process=(s,n,r,o)=>{const a=this.container,c=o.bubbleObj.optValue,l=a.actualOptions,u=l.interactivity.modes.bubble;if(!u||c===void 0)return;const h=u.duration,d=a.retina.bubbleModeDistance,f=o.particlesObj.optValue,p=o.bubbleObj.value,y=o.particlesObj.value??Zf,m=o.type;if(!(!d||d<us||c===f))if(a.bubble||(a.bubble={}),a.bubble.durationEnd)p&&(m===ke.size&&delete s.bubble.radius,m===ke.opacity&&delete s.bubble.opacity);else if(n<=d){if((p??y)!==c){const w=y-r*(y-c)/h;m===ke.size&&(s.bubble.radius=w),m===ke.opacity&&(s.bubble.opacity=w)}}else m===ke.size&&delete s.bubble.radius,m===ke.opacity&&delete s.bubble.opacity},this._singleSelectorHover=(s,n,r)=>{const o=this.container,a=document.querySelectorAll(n),c=o.actualOptions.interactivity.modes.bubble;!c||!a.length||a.forEach(l=>{const u=l,h=o.retina.pixelRatio,d={x:(u.offsetLeft+u.offsetWidth*hs)*h,y:(u.offsetTop+u.offsetHeight*hs)*h},f=u.offsetWidth*hs*h,p=r.type===Dt.circle?new Q(d.x,d.y,f):new xe(u.offsetLeft*h,u.offsetTop*h,u.offsetWidth*h,u.offsetHeight*h),y=o.particles.quadTree.query(p,m=>this.isEnabled(m));for(const m of y){if(!p.contains(m.getPosition()))continue;m.bubble.inRange=!0;const _=c.divs,w=Lo(_,u);(!m.bubble.div||m.bubble.div!==u)&&(this.clear(m,s,!0),m.bubble.div=u),this._hoverBubbleSize(m,ds,w),this._hoverBubbleOpacity(m,ds,w),this._hoverBubbleColor(m,ds,w)}})},this._engine=t,e.bubble||(e.bubble={}),this.handleClickMode=s=>{s===Ge&&(e.bubble||(e.bubble={}),e.bubble.clicking=!0)}}clear(e,t,s){e.bubble.inRange&&!s||(delete e.bubble.div,delete e.bubble.opacity,delete e.bubble.radius,delete e.bubble.color)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bubble;t&&(e.retina.bubbleModeDistance=t.distance*e.retina.pixelRatio,t.size!==void 0&&(e.retina.bubbleModeSize=t.size*e.retina.pixelRatio))}interact(e){const t=this.container.actualOptions,s=t.interactivity.events,n=s.onHover,r=s.onClick,o=n.enable,a=n.mode,c=r.enable,l=r.mode,u=s.onDiv;o&&$(Ge,a)?this._hoverBubble():c&&$(Ge,l)?this._clickBubble():en(Ge,u,(h,d)=>this._singleSelectorHover(e,h,d))}isEnabled(e){const t=this.container,s=t.actualOptions,n=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??s.interactivity).events,{onClick:o,onDiv:a,onHover:c}=r,l=Zs(Ge,a);return l||c.enable&&n.position||o.enable&&n.clickPosition?$(Ge,c.mode)||$(Ge,o.mode)||l:!1}loadModeOptions(e,...t){e.bubble||(e.bubble=new Qf);for(const s of t)e.bubble.load(s==null?void 0:s.bubble)}reset(e){e.bubble.inRange=!1}}async function ip(i,e=!0){i.checkVersion("3.8.1"),await i.addInteractor("externalBubble",t=>Promise.resolve(new tp(t,i)),e)}class sp{constructor(){this.opacity=.5}load(e){x(e)||e.opacity!==void 0&&(this.opacity=e.opacity)}}class np{constructor(){this.distance=80,this.links=new sp,this.radius=60}load(e){x(e)||(e.distance!==void 0&&(this.distance=e.distance),this.links.load(e.links),e.radius!==void 0&&(this.radius=e.radius))}}const ur=0,hr=1,rp=0;function op(i,e,t,s){const n=Math.floor(t.getRadius()/e.getRadius()),r=e.getFillColor(),o=t.getFillColor();if(!r||!o)return;const a=e.getPosition(),c=t.getPosition(),l=sn(r,o,e.getRadius(),t.getRadius()),u=i.createLinearGradient(a.x,a.y,c.x,c.y);return u.addColorStop(ur,Xt(r,s)),u.addColorStop(de(n,ur,hr),Ie(l,s)),u.addColorStop(hr,Xt(o,s)),u}function ap(i,e,t,s,n){Jt(i,s,n),i.lineWidth=e,i.strokeStyle=t,i.stroke()}function cp(i,e,t,s){const n=i.actualOptions,r=n.interactivity.modes.connect;if(r)return op(e,t,s,r.links.opacity)}function lp(i,e,t){i.canvas.draw(s=>{const n=cp(i,s,e,t);if(!n)return;const r=e.getPosition(),o=t.getPosition();ap(s,e.retina.linksWidth??rp,n,r,o)})}const up="connect",dr=0;class hp extends Ce{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.connect;t&&(e.retina.connectModeDistance=t.distance*e.retina.pixelRatio,e.retina.connectModeRadius=t.radius*e.retina.pixelRatio)}interact(){const e=this.container;if(e.actualOptions.interactivity.events.onHover.enable&&e.interactivity.status==="pointermove"){const s=e.interactivity.mouse.position,{connectModeDistance:n,connectModeRadius:r}=e.retina;if(!n||n<dr||!r||r<dr||!s)return;const o=Math.abs(r),a=e.particles.quadTree.queryCircle(s,o,c=>this.isEnabled(c));a.forEach((c,l)=>{const u=c.getPosition(),h=1;for(const d of a.slice(l+h)){const f=d.getPosition(),p=Math.abs(n),y=Math.abs(u.x-f.x),m=Math.abs(u.y-f.y);y<p&&m<p&&lp(e,c,d)}})}}isEnabled(e){const t=this.container,s=t.interactivity.mouse,n=((e==null?void 0:e.interactivity)??t.actualOptions.interactivity).events;return n.onHover.enable&&s.position?$(up,n.onHover.mode):!1}loadModeOptions(e,...t){e.connect||(e.connect=new np);for(const s of t)e.connect.load(s==null?void 0:s.connect)}reset(){}}async function dp(i,e=!0){i.checkVersion("3.8.1"),await i.addInteractor("externalConnect",t=>Promise.resolve(new hp(t)),e)}class fp{constructor(){this.blink=!1,this.consent=!1,this.opacity=1}load(e){x(e)||(e.blink!==void 0&&(this.blink=e.blink),e.color!==void 0&&(this.color=Y.create(this.color,e.color)),e.consent!==void 0&&(this.consent=e.consent),e.opacity!==void 0&&(this.opacity=e.opacity))}}class pp{constructor(){this.distance=100,this.links=new fp}load(e){x(e)||(e.distance!==void 0&&(this.distance=e.distance),this.links.load(e.links))}}const gp=0;function mp(i,e,t,s,n,r){Jt(i,t,s),i.strokeStyle=Ie(n,r),i.lineWidth=e,i.stroke()}function yp(i,e,t,s,n){i.canvas.draw(r=>{const o=e.getPosition();mp(r,e.retina.linksWidth??gp,o,n,t,s)})}const vp="grab",bp=0,wp=0;class _p extends Ce{constructor(e,t){super(e),this._engine=t}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.grab;t&&(e.retina.grabModeDistance=t.distance*e.retina.pixelRatio)}interact(){var a;const e=this.container,t=e.actualOptions,s=t.interactivity;if(!s.modes.grab||!s.events.onHover.enable||e.interactivity.status!==rt)return;const n=e.interactivity.mouse.position;if(!n)return;const r=e.retina.grabModeDistance;if(!r||r<bp)return;const o=e.particles.quadTree.queryCircle(n,r,c=>this.isEnabled(c));for(const c of o){const l=c.getPosition(),u=ce(l,n);if(u>r)continue;const h=s.modes.grab.links,d=h.opacity,f=d-u*d/r;if(f<=wp)continue;const p=h.color??((a=c.options.links)==null?void 0:a.color);if(!e.particles.grabLineColor&&p){const m=s.modes.grab.links;e.particles.grabLineColor=Ho(this._engine,p,m.blink,m.consent)}const y=Ns(c,void 0,e.particles.grabLineColor);y&&yp(e,c,y,f,n)}}isEnabled(e){const t=this.container,s=t.interactivity.mouse,n=((e==null?void 0:e.interactivity)??t.actualOptions.interactivity).events;return n.onHover.enable&&!!s.position&&$(vp,n.onHover.mode)}loadModeOptions(e,...t){e.grab||(e.grab=new pp);for(const s of t)e.grab.load(s==null?void 0:s.grab)}reset(){}}async function xp(i,e=!0){i.checkVersion("3.8.1"),await i.addInteractor("externalGrab",t=>Promise.resolve(new _p(t,i)),e)}const kp="pause";class Sp extends Ce{constructor(e){super(e),this.handleClickMode=t=>{if(t!==kp)return;const s=this.container;s.animationStatus?s.pause():s.play()}}clear(){}init(){}interact(){}isEnabled(){return!0}reset(){}}async function Pp(i,e=!0){i.checkVersion("3.8.1"),await i.addInteractor("externalPause",t=>Promise.resolve(new Sp(t)),e)}class Cp{constructor(){this.default=!0,this.groups=[],this.quantity=4}load(e){if(x(e))return;e.default!==void 0&&(this.default=e.default),e.groups!==void 0&&(this.groups=e.groups.map(s=>s)),this.groups.length||(this.default=!0);const t=e.quantity;t!==void 0&&(this.quantity=R(t))}}const Op="push",Ep=0;class Tp extends Ce{constructor(e){super(e),this.handleClickMode=t=>{if(t!==Op)return;const s=this.container,n=s.actualOptions,r=n.interactivity.modes.push;if(!r)return;const o=C(r.quantity);if(o<=Ep)return;const a=qi([void 0,...r.groups]),c=a!==void 0?s.actualOptions.particles.groups[a]:void 0;s.particles.push(o,s.interactivity.mouse,c,a)}}clear(){}init(){}interact(){}isEnabled(){return!0}loadModeOptions(e,...t){e.push||(e.push=new Cp);for(const s of t)e.push.load(s==null?void 0:s.push)}reset(){}}async function Rp(i,e=!0){i.checkVersion("3.8.1"),await i.addInteractor("externalPush",t=>Promise.resolve(new Tp(t)),e)}class Ip{constructor(){this.quantity=2}load(e){if(x(e))return;const t=e.quantity;t!==void 0&&(this.quantity=R(t))}}const Ap="remove";class jp extends Ce{constructor(e){super(e),this.handleClickMode=t=>{const s=this.container,n=s.actualOptions;if(!n.interactivity.modes.remove||t!==Ap)return;const r=C(n.interactivity.modes.remove.quantity);s.particles.removeQuantity(r)}}clear(){}init(){}interact(){}isEnabled(){return!0}loadModeOptions(e,...t){e.remove||(e.remove=new Ip);for(const s of t)e.remove.load(s==null?void 0:s.remove)}reset(){}}async function Mp(i,e=!0){i.checkVersion("3.8.1"),await i.addInteractor("externalRemove",t=>Promise.resolve(new jp(t)),e)}class ra{constructor(){this.distance=200,this.duration=.4,this.factor=100,this.speed=1,this.maxSpeed=50,this.easing=nt.easeOutQuad}load(e){x(e)||(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.easing!==void 0&&(this.easing=e.easing),e.factor!==void 0&&(this.factor=e.factor),e.speed!==void 0&&(this.speed=e.speed),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed))}}class Dp extends ra{constructor(){super(),this.selectors=[]}load(e){super.load(e),!x(e)&&e.selectors!==void 0&&(this.selectors=e.selectors)}}class zp extends ra{load(e){super.load(e),!x(e)&&(this.divs=fe(e.divs,t=>{const s=new Dp;return s.load(t),s}))}}const Ke="repulse",Lp=0,$p=6,Up=3,Np=2,Fp=0,Bp=0,qp=1,fs=.5;class Vp extends Ce{constructor(e,t){super(t),this._clickRepulse=()=>{const s=this.container,n=s.actualOptions.interactivity.modes.repulse;if(!n)return;const r=s.repulse??{particles:[]};if(r.finish||(r.count||(r.count=0),r.count++,r.count===s.particles.count&&(r.finish=!0)),r.clicking){const o=s.retina.repulseModeDistance;if(!o||o<Lp)return;const a=Math.pow(o/$p,Up),c=s.interactivity.mouse.clickPosition;if(c===void 0)return;const l=new Q(c.x,c.y,a),u=s.particles.quadTree.query(l,h=>this.isEnabled(h));for(const h of u){const{dx:d,dy:f,distance:p}=te(c,h.position),y=p**Np,m=n.speed,_=-a*m/y;if(y<=a){r.particles.push(h);const w=V.create(d,f);w.length=_,h.velocity.setTo(w)}}}else if(r.clicking===!1){for(const o of r.particles)o.velocity.setTo(o.initialVelocity);r.particles=[]}},this._hoverRepulse=()=>{const s=this.container,n=s.interactivity.mouse.position,r=s.retina.repulseModeDistance;!r||r<Fp||!n||this._processRepulse(n,r,new Q(n.x,n.y,r))},this._processRepulse=(s,n,r,o)=>{const a=this.container,c=a.particles.quadTree.query(r,m=>this.isEnabled(m)),l=a.actualOptions.interactivity.modes.repulse;if(!l)return;const{easing:u,speed:h,factor:d,maxSpeed:f}=l,p=this._engine.getEasing(u),y=((o==null?void 0:o.speed)??h)*d;for(const m of c){const{dx:_,dy:w,distance:v}=te(m.position,s),b=de(p(qp-v/n)*y,Bp,f),k=V.create(v?_/v*b:y,v?w/v*b:y);m.position.addTo(k)}},this._singleSelectorRepulse=(s,n)=>{const r=this.container,o=r.actualOptions.interactivity.modes.repulse;if(!o)return;const a=document.querySelectorAll(s);a.length&&a.forEach(c=>{const l=c,u=r.retina.pixelRatio,h={x:(l.offsetLeft+l.offsetWidth*fs)*u,y:(l.offsetTop+l.offsetHeight*fs)*u},d=l.offsetWidth*fs*u,f=n.type===Dt.circle?new Q(h.x,h.y,d):new xe(l.offsetLeft*u,l.offsetTop*u,l.offsetWidth*u,l.offsetHeight*u),p=o.divs,y=Lo(p,l);this._processRepulse(h,d,f,y)})},this._engine=e,t.repulse||(t.repulse={particles:[]}),this.handleClickMode=s=>{const n=this.container.actualOptions,r=n.interactivity.modes.repulse;if(!r||s!==Ke)return;t.repulse||(t.repulse={particles:[]});const o=t.repulse;o.clicking=!0,o.count=0;for(const a of t.repulse.particles)this.isEnabled(a)&&a.velocity.setTo(a.initialVelocity);o.particles=[],o.finish=!1,setTimeout(()=>{t.destroyed||(o.clicking=!1)},r.duration*K)}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.repulse;t&&(e.retina.repulseModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions,s=e.interactivity.status===rt,n=t.interactivity.events,r=n.onHover,o=r.enable,a=r.mode,c=n.onClick,l=c.enable,u=c.mode,h=n.onDiv;s&&o&&$(Ke,a)?this._hoverRepulse():l&&$(Ke,u)?this._clickRepulse():en(Ke,h,(d,f)=>this._singleSelectorRepulse(d,f))}isEnabled(e){const t=this.container,s=t.actualOptions,n=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??s.interactivity).events,o=r.onDiv,a=r.onHover,c=r.onClick,l=Zs(Ke,o);if(!(l||a.enable&&n.position||c.enable&&n.clickPosition))return!1;const u=a.mode,h=c.mode;return $(Ke,u)||$(Ke,h)||l}loadModeOptions(e,...t){e.repulse||(e.repulse=new zp);for(const s of t)e.repulse.load(s==null?void 0:s.repulse)}reset(){}}async function Hp(i,e=!0){i.checkVersion("3.8.1"),await i.addInteractor("externalRepulse",t=>Promise.resolve(new Vp(i,t)),e)}class Wp{constructor(){this.factor=3,this.radius=200}load(e){x(e)||(e.factor!==void 0&&(this.factor=e.factor),e.radius!==void 0&&(this.radius=e.radius))}}const Gp="slow",Kp=0;class Jp extends Ce{constructor(e){super(e)}clear(e,t,s){e.slow.inRange&&!s||(e.slow.factor=1)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.slow;t&&(e.retina.slowModeRadius=t.radius*e.retina.pixelRatio)}interact(){}isEnabled(e){const t=this.container,s=t.interactivity.mouse,n=((e==null?void 0:e.interactivity)??t.actualOptions.interactivity).events;return n.onHover.enable&&!!s.position&&$(Gp,n.onHover.mode)}loadModeOptions(e,...t){e.slow||(e.slow=new Wp);for(const s of t)e.slow.load(s==null?void 0:s.slow)}reset(e){e.slow.inRange=!1;const t=this.container,s=t.actualOptions,n=t.interactivity.mouse.position,r=t.retina.slowModeRadius,o=s.interactivity.modes.slow;if(!o||!r||r<Kp||!n)return;const a=e.getPosition(),c=ce(n,a),l=c/r,u=o.factor,{slow:h}=e;c>r||(h.inRange=!0,h.factor=l/u)}}async function Qp(i,e=!0){i.checkVersion("3.8.1"),await i.addInteractor("externalSlow",t=>Promise.resolve(new Jp(t)),e)}const Yp=0,Xp=1,Zp=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;function eg(i,e,t){const{svgData:s}=i;if(!s)return"";const n=Xt(e,t);if(s.includes("fill"))return s.replace(Zp,()=>n);const r=s.indexOf(">");return`${s.substring(Yp,r)} fill="${n}"${s.substring(r)}`}async function Vi(i){return new Promise(e=>{i.loading=!0;const t=new Image;i.element=t,t.addEventListener("load",()=>{i.loading=!1,e()}),t.addEventListener("error",()=>{i.element=void 0,i.error=!0,i.loading=!1,at().error(`${he} loading image: ${i.source}`),e()}),t.src=i.source})}async function tg(i){if(i.type!=="svg"){await Vi(i);return}i.loading=!0;const e=await fetch(i.source);e.ok?i.svgData=await e.text():(at().error(`${he} Image not found`),i.error=!0),i.loading=!1}function ig(i,e,t,s){var o;const n=eg(i,t,((o=s.opacity)==null?void 0:o.value)??Xp),r={color:t,gif:e.gif,data:{...i,svgData:n},loaded:!1,ratio:e.width/e.height,replaceColor:e.replaceColor,source:e.src};return new Promise(a=>{const c=new Blob([n],{type:"image/svg+xml"}),l=URL||window.URL||window.webkitURL||window,u=l.createObjectURL(c),h=new Image;h.addEventListener("load",()=>{r.loaded=!0,r.element=h,a(r),l.revokeObjectURL(u)});const d=async()=>{l.revokeObjectURL(u);const f={...i,error:!1,loading:!0};await Vi(f),r.loaded=!0,r.element=f.element,a(r)};h.addEventListener("error",()=>void d()),h.src=u})}const ps=[0,4,2,1],fr=[8,8,4,2];class sg{constructor(e){this.pos=0,this.data=new Uint8ClampedArray(e)}getString(e){const t=this.data.slice(this.pos,this.pos+e);return this.pos+=t.length,t.reduce((s,n)=>s+String.fromCharCode(n),"")}nextByte(){return this.data[this.pos++]}nextTwoBytes(){return this.pos+=2,this.data[this.pos-2]+(this.data[this.pos-1]<<8)}readSubBlocks(){let e="",t=0;const s=0,n=0;do{t=this.data[this.pos++];for(let r=t;--r>=s;e+=String.fromCharCode(this.data[this.pos++]));}while(t!==n);return e}readSubBlocksBin(){let e=this.data[this.pos],t=0;const s=0,n=1;for(let o=0;e!==s;o+=e+n,e=this.data[this.pos+o])t+=e;const r=new Uint8Array(t);e=this.data[this.pos++];for(let o=0;e!==s;e=this.data[this.pos++])for(let a=e;--a>=s;r[o++]=this.data[this.pos++]);return r}skipSubBlocks(){for(const e=1,t=0;this.data[this.pos]!==t;this.pos+=this.data[this.pos]+e);this.pos++}}var ge;(function(i){i[i.Replace=0]="Replace",i[i.Combine=1]="Combine",i[i.RestoreBackground=2]="RestoreBackground",i[i.RestorePrevious=3]="RestorePrevious",i[i.UndefinedA=4]="UndefinedA",i[i.UndefinedB=5]="UndefinedB",i[i.UndefinedC=6]="UndefinedC",i[i.UndefinedD=7]="UndefinedD"})(ge||(ge={}));var Re;(function(i){i[i.Extension=33]="Extension",i[i.ApplicationExtension=255]="ApplicationExtension",i[i.GraphicsControlExtension=249]="GraphicsControlExtension",i[i.PlainTextExtension=1]="PlainTextExtension",i[i.CommentExtension=254]="CommentExtension",i[i.Image=44]="Image",i[i.EndOfFile=59]="EndOfFile"})(Re||(Re={}));const se={x:0,y:0},ng=0,pr=.5,rg=0,gr=0,Bs=0;function oa(i,e){const t=[];for(let s=0;s<e;s++)t.push({r:i.data[i.pos],g:i.data[i.pos+1],b:i.data[i.pos+2]}),i.pos+=3;return t}function og(i,e,t,s){switch(i.nextByte()){case Re.GraphicsControlExtension:{const n=e.frames[t(!1)];i.pos++;const r=i.nextByte();n.GCreserved=(r&224)>>>5,n.disposalMethod=(r&28)>>>2,n.userInputDelayFlag=(r&2)===2;const o=(r&1)===1;n.delayTime=i.nextTwoBytes()*10;const a=i.nextByte();o&&s(a),i.pos++;break}case Re.ApplicationExtension:{i.pos++;const n={identifier:i.getString(8),authenticationCode:i.getString(3),data:i.readSubBlocksBin()};e.applicationExtensions.push(n);break}case Re.CommentExtension:{e.comments.push([t(!1),i.readSubBlocks()]);break}case Re.PlainTextExtension:{if(e.globalColorTable.length===0)throw new EvalError("plain text extension without global color table");i.pos++,e.frames[t(!1)].plainTextData={left:i.nextTwoBytes(),top:i.nextTwoBytes(),width:i.nextTwoBytes(),height:i.nextTwoBytes(),charSize:{width:i.nextTwoBytes(),height:i.nextTwoBytes()},foregroundColor:i.nextByte(),backgroundColor:i.nextByte(),text:i.readSubBlocks()};break}default:i.skipSubBlocks();break}}async function ag(i,e,t,s,n,r){const o=e.frames[s(!0)];o.left=i.nextTwoBytes(),o.top=i.nextTwoBytes(),o.width=i.nextTwoBytes(),o.height=i.nextTwoBytes();const a=i.nextByte(),c=(a&128)===128,l=(a&64)===64;o.sortFlag=(a&32)===32,o.reserved=(a&24)>>>3;const u=1<<(a&7)+1;c&&(o.localColorTable=oa(i,u));const h=_=>{const{r:w,g:v,b}=(c?o.localColorTable:e.globalColorTable)[_];return _!==n(null)?{r:w,g:v,b,a:255}:{r:w,g:v,b,a:t?~~((w+v+b)/3):0}},d=(()=>{try{return new ImageData(o.width,o.height,{colorSpace:"srgb"})}catch(_){if(_ instanceof DOMException&&_.name==="IndexSizeError")return null;throw _}})();if(d==null)throw new EvalError("GIF frame size is to large");const f=i.nextByte(),p=i.readSubBlocksBin(),y=1<<f,m=(_,w)=>{const v=_>>>3,b=_&7;return(p[v]+(p[v+1]<<8)+(p[v+2]<<16)&(1<<w)-1<<b)>>>b};if(l){for(let _=0,w=f+1,v=0,b=[[0]],k=0;k<4;k++)if(ps[k]<o.height){let S=0,I=0,X=!1;for(;!X;){const A=_;if(_=m(v,w),v+=w+1,_===y){w=f+1,b.length=y+2;for(let W=0;W<b.length;W++)b[W]=W<y?[W]:[]}else{_>=b.length?b.push(b[A].concat(b[A][0])):A!==y&&b.push(b[A].concat(b[_][0]));for(const W of b[_]){const{r:ht,g:dt,b:L,a:qe}=h(W);d.data.set([ht,dt,L,qe],ps[k]*o.width+fr[k]*I+S%(o.width*4)),S+=4}b.length===1<<w&&w<12&&w++}S===o.width*4*(I+1)&&(I++,ps[k]+fr[k]*I>=o.height&&(X=!0))}}o.image=d,o.bitmap=await createImageBitmap(d)}else{let _=0,w=f+1,v=0,b=-4,k=!1;const S=[[0]];for(;!k;){const I=_;if(_=m(v,w),v+=w,_===y){w=f+1,S.length=y+2;for(let X=0;X<S.length;X++)S[X]=X<y?[X]:[]}else{if(_===y+1){k=!0;break}_>=S.length?S.push(S[I].concat(S[I][0])):I!==y&&S.push(S[I].concat(S[_][0]));for(const X of S[_]){const{r:A,g:W,b:ht,a:dt}=h(X);d.data.set([A,W,ht,dt],b+=4)}S.length>=1<<w&&w<12&&w++}}o.image=d,o.bitmap=await createImageBitmap(d)}}async function cg(i,e,t,s,n,r){switch(i.nextByte()){case Re.EndOfFile:return!0;case Re.Image:await ag(i,e,t,s,n);break;case Re.Extension:og(i,e,s,n);break;default:throw new EvalError("undefined block found")}return!1}function lg(i){for(const e of i.applicationExtensions)if(e.identifier+e.authenticationCode==="NETSCAPE2.0")return e.data[1]+(e.data[2]<<8);return NaN}async function ug(i,e,t){t||(t=!1);const s=await fetch(i);if(!s.ok&&s.status===404)throw new EvalError("file not found");const n=await s.arrayBuffer(),r={width:0,height:0,totalTime:0,colorRes:0,pixelAspectRatio:0,frames:[],sortFlag:!1,globalColorTable:[],backgroundImage:new ImageData(1,1,{colorSpace:"srgb"}),comments:[],applicationExtensions:[]},o=new sg(new Uint8ClampedArray(n));if(o.getString(6)!=="GIF89a")throw new Error("not a supported GIF file");r.width=o.nextTwoBytes(),r.height=o.nextTwoBytes();const a=o.nextByte(),c=(a&128)===128;r.colorRes=(a&112)>>>4,r.sortFlag=(a&8)===8;const l=1<<(a&7)+1,u=o.nextByte();r.pixelAspectRatio=o.nextByte(),r.pixelAspectRatio!==0&&(r.pixelAspectRatio=(r.pixelAspectRatio+15)/64),c&&(r.globalColorTable=oa(o,l));const h=(()=>{try{return new ImageData(r.width,r.height,{colorSpace:"srgb"})}catch(b){if(b instanceof DOMException&&b.name==="IndexSizeError")return null;throw b}})();if(h==null)throw new Error("GIF frame size is to large");const{r:d,g:f,b:p}=r.globalColorTable[u];h.data.set(c?[d,f,p,255]:[0,0,0,0]);for(let b=4;b<h.data.length;b*=2)h.data.copyWithin(b,0,b);r.backgroundImage=h;let y=-1,m=!0,_=-1;const w=b=>(b&&(m=!0),y),v=b=>(b!=null&&(_=b),_);try{do m&&(r.frames.push({left:0,top:0,width:0,height:0,disposalMethod:ge.Replace,image:new ImageData(1,1,{colorSpace:"srgb"}),plainTextData:null,userInputDelayFlag:!1,delayTime:0,sortFlag:!1,localColorTable:[],reserved:0,GCreserved:0}),y++,_=-1,m=!1);while(!await cg(o,r,t,w,v,e));r.frames.length--;for(const b of r.frames){if(b.userInputDelayFlag&&b.delayTime===0){r.totalTime=1/0;break}r.totalTime+=b.delayTime}return r}catch(b){throw b instanceof EvalError?new Error(`error while parsing frame ${y} "${b.message}"`):b}}function hg(i){const{context:e,radius:t,particle:s,delta:n}=i,r=s.image;if(!(r!=null&&r.gifData)||!r.gif)return;const o=new OffscreenCanvas(r.gifData.width,r.gifData.height),a=o.getContext("2d");if(!a)throw new Error("could not create offscreen canvas context");a.imageSmoothingQuality="low",a.imageSmoothingEnabled=!1,a.clearRect(se.x,se.y,o.width,o.height),s.gifLoopCount===void 0&&(s.gifLoopCount=r.gifLoopCount??Bs);let c=s.gifFrame??ng;const l={x:-r.gifData.width*pr,y:-r.gifData.height*pr},u=r.gifData.frames[c];if(s.gifTime===void 0&&(s.gifTime=rg),!!u.bitmap){switch(e.scale(t/r.gifData.width,t/r.gifData.height),u.disposalMethod){case ge.UndefinedA:case ge.UndefinedB:case ge.UndefinedC:case ge.UndefinedD:case ge.Replace:a.drawImage(u.bitmap,u.left,u.top),e.drawImage(o,l.x,l.y),a.clearRect(se.x,se.y,o.width,o.height);break;case ge.Combine:a.drawImage(u.bitmap,u.left,u.top),e.drawImage(o,l.x,l.y);break;case ge.RestoreBackground:a.drawImage(u.bitmap,u.left,u.top),e.drawImage(o,l.x,l.y),a.clearRect(se.x,se.y,o.width,o.height),r.gifData.globalColorTable.length?a.putImageData(r.gifData.backgroundImage,l.x,l.y):a.putImageData(r.gifData.frames[gr].image,l.x+u.left,l.y+u.top);break;case ge.RestorePrevious:{const h=a.getImageData(se.x,se.y,o.width,o.height);a.drawImage(u.bitmap,u.left,u.top),e.drawImage(o,l.x,l.y),a.clearRect(se.x,se.y,o.width,o.height),a.putImageData(h,se.x,se.y)}break}if(s.gifTime+=n.value,s.gifTime>u.delayTime){if(s.gifTime-=u.delayTime,++c>=r.gifData.frames.length){if(--s.gifLoopCount<=Bs)return;c=gr,a.clearRect(se.x,se.y,o.width,o.height)}s.gifFrame=c}e.scale(r.gifData.width/t,r.gifData.height/t)}}async function dg(i){if(i.type!=="gif"){await Vi(i);return}i.loading=!0;try{i.gifData=await ug(i.source),i.gifLoopCount=lg(i.gifData)??Bs,i.gifLoopCount||(i.gifLoopCount=1/0)}catch{i.error=!0}i.loading=!1}const fg=2,pg=1,gg=12,mg=1;class yg{constructor(e){this.validTypes=["image","images"],this.loadImageShape=async t=>{if(!this._engine.loadImage)throw new Error(`${he} image shape not initialized`);await this._engine.loadImage({gif:t.gif,name:t.name,replaceColor:t.replaceColor??!1,src:t.src})},this._engine=e}addImage(e){this._engine.images||(this._engine.images=[]),this._engine.images.push(e)}draw(e){const{context:t,radius:s,particle:n,opacity:r}=e,o=n.image,a=o==null?void 0:o.element;if(o){if(t.globalAlpha=r,o.gif&&o.gifData)hg(e);else if(a){const c=o.ratio,l={x:-s,y:-s},u=s*fg;t.drawImage(a,l.x,l.y,u,u/c)}t.globalAlpha=pg}}getSidesCount(){return gg}async init(e){const t=e.actualOptions;if(!(!t.preload||!this._engine.loadImage))for(const s of t.preload)await this._engine.loadImage(s)}loadShape(e){if(e.shape!=="image"&&e.shape!=="images")return;this._engine.images||(this._engine.images=[]);const t=e.shapeData;if(!t)return;this._engine.images.find(n=>n.name===t.name||n.source===t.src)||this.loadImageShape(t).then(()=>{this.loadShape(e)})}particleInit(e,t){if(t.shape!=="image"&&t.shape!=="images")return;this._engine.images||(this._engine.images=[]);const s=this._engine.images,n=t.shapeData;if(!n)return;const r=t.getFillColor(),o=s.find(c=>c.name===n.name||c.source===n.src);if(!o)return;const a=n.replaceColor??o.replaceColor;if(o.loading){setTimeout(()=>{this.particleInit(e,t)});return}(async()=>{let c;o.svgData&&r?c=await ig(o,n,r,t):c={color:r,data:o,element:o.element,gif:o.gif,gifData:o.gifData,gifLoopCount:o.gifLoopCount,loaded:!0,ratio:n.width&&n.height?n.width/n.height:o.ratio??mg,replaceColor:a,source:n.src},c.ratio||(c.ratio=1);const l=n.fill??t.shapeFill,u=n.close??t.shapeClose,h={image:c,fill:l,close:u};t.image=h.image,t.shapeFill=h.fill,t.shapeClose=h.close})()}}class vg{constructor(){this.src="",this.gif=!1}load(e){x(e)||(e.gif!==void 0&&(this.gif=e.gif),e.height!==void 0&&(this.height=e.height),e.name!==void 0&&(this.name=e.name),e.replaceColor!==void 0&&(this.replaceColor=e.replaceColor),e.src!==void 0&&(this.src=e.src),e.width!==void 0&&(this.width=e.width))}}class bg{constructor(e){this.id="imagePreloader",this._engine=e}async getPlugin(){return await Promise.resolve(),{}}loadOptions(e,t){if(!(t!=null&&t.preload))return;e.preload||(e.preload=[]);const s=e.preload;for(const n of t.preload){const r=s.find(o=>o.name===n.name||o.src===n.src);if(r)r.load(n);else{const o=new vg;o.load(n),s.push(o)}}}needsPlugin(){return!0}}const wg=3;function _g(i){i.loadImage||(i.loadImage=async e=>{if(!e.name&&!e.src)throw new Error(`${he} no image source provided`);if(i.images||(i.images=[]),!i.images.find(t=>t.name===e.name||t.source===e.src))try{const t={gif:e.gif??!1,name:e.name??e.src,source:e.src,type:e.src.substring(e.src.length-wg),error:!1,loading:!0,replaceColor:e.replaceColor,ratio:e.width&&e.height?e.width/e.height:void 0};i.images.push(t);let s;e.gif?s=dg:s=e.replaceColor?tg:Vi,await s(t)}catch{throw new Error(`${he} ${e.name??e.src} not found`)}})}async function xg(i,e=!0){i.checkVersion("3.8.1"),_g(i);const t=new bg(i);await i.addPlugin(t,e),await i.addShape(new yg(i),e)}class kg extends ut{constructor(){super(),this.sync=!1}load(e){x(e)||(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class Sg extends ut{constructor(){super(),this.sync=!1}load(e){x(e)||(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class Pg{constructor(){this.count=0,this.delay=new kg,this.duration=new Sg}load(e){x(e)||(e.count!==void 0&&(this.count=e.count),this.delay.load(e.delay),this.duration.load(e.duration))}}const bt=0,Cg=-1,mr=0,yr=0;function Og(i,e,t){if(!i.life)return;const s=i.life;let n=!1;if(i.spawning)if(s.delayTime+=e.value,s.delayTime>=i.life.delay)n=!0,i.spawning=!1,s.delayTime=bt,s.time=bt;else return;if(s.duration===Cg||i.spawning||(n?s.time=bt:s.time+=e.value,s.time<s.duration))return;if(s.time=bt,i.life.count>mr&&i.life.count--,i.life.count===mr){i.destroy();return}const r=R(yr,t.width),o=R(yr,t.width);i.position.x=ae(r),i.position.y=ae(o),i.spawning=!0,s.delayTime=bt,s.time=bt,i.reset();const a=i.options.life;a&&(s.delay=C(a.delay.value)*K,s.duration=C(a.duration.value)*K)}const Je=0,vr=1,br=-1;class Eg{constructor(e){this.container=e}init(e){const t=this.container,s=e.options,n=s.life;n&&(e.life={delay:t.retina.reduceFactor?C(n.delay.value)*(n.delay.sync?vr:M())/t.retina.reduceFactor*K:Je,delayTime:Je,duration:t.retina.reduceFactor?C(n.duration.value)*(n.duration.sync?vr:M())/t.retina.reduceFactor*K:Je,time:Je,count:n.count},e.life.duration<=Je&&(e.life.duration=br),e.life.count<=Je&&(e.life.count=br),e.life&&(e.spawning=e.life.delay>Je))}isEnabled(e){return!e.destroyed}loadOptions(e,...t){e.life||(e.life=new Pg);for(const s of t)e.life.load(s==null?void 0:s.life)}update(e,t){!this.isEnabled(e)||!e.life||Og(e,t,this.container.canvas.size)}}async function Tg(i,e=!0){i.checkVersion("3.8.1"),await i.addParticleUpdater("life",async t=>Promise.resolve(new Eg(t)),e)}function Rg(i){const{context:e,particle:t,radius:s}=i,n=t.shapeData,r=0;e.moveTo(-s,r),e.lineTo(s,r),e.lineCap=(n==null?void 0:n.cap)??"butt"}const Ig=1;class Ag{constructor(){this.validTypes=["line"]}draw(e){Rg(e)}getSidesCount(){return Ig}}async function jg(i,e=!0){i.checkVersion("3.8.1"),await i.addShape(new Ag,e)}const wr=.5;class Mg{init(){}isEnabled(e){return!ct()&&!e.destroyed&&e.container.actualOptions.interactivity.events.onHover.parallax.enable}move(e){const t=e.container,s=t.actualOptions,n=s.interactivity.events.onHover.parallax;if(ct()||!n.enable)return;const r=n.force,o=t.interactivity.mouse.position;if(!o)return;const a=t.canvas.size,c={x:a.width*wr,y:a.height*wr},l=n.smooth,u=e.getRadius()/r,h={x:(o.x-c.x)*u,y:(o.y-c.y)*u},{offset:d}=e;d.x+=(h.x-d.x)/l,d.y+=(h.y-d.y)/l}}async function Dg(i,e=!0){i.checkVersion("3.8.1"),await i.addMover("parallax",()=>Promise.resolve(new Mg),e)}const _r=1e3,zg=1;class Lg extends on{constructor(e){super(e)}clear(){}init(){}interact(e){const t=this.container;e.attractDistance===void 0&&(e.attractDistance=C(e.options.move.attract.distance)*t.retina.pixelRatio);const s=e.attractDistance,n=e.getPosition(),r=t.particles.quadTree.queryCircle(n,s);for(const o of r){if(e===o||!o.options.move.attract.enable||o.destroyed||o.spawning)continue;const a=o.getPosition(),{dx:c,dy:l}=te(n,a),u=e.options.move.attract.rotate,h=c/(u.x*_r),d=l/(u.y*_r),f=o.size.value/e.size.value,p=zg/f;e.velocity.x-=h*f,e.velocity.y-=d*f,o.velocity.x+=h*p,o.velocity.y+=d*p}}isEnabled(e){return e.options.move.attract.enable}reset(){}}async function $g(i,e=!0){i.checkVersion("3.8.1"),await i.addInteractor("particlesAttract",t=>Promise.resolve(new Lg(t)),e)}const Ug=.5,Ng=10,Fg=0;function xr(i,e,t,s,n,r){const o=de(i.options.collisions.absorb.speed*n.factor/Ng,Fg,s);i.size.value+=o*Ug,t.size.value-=o,s<=r&&(t.size.value=0,t.destroy())}function Bg(i,e,t,s){const n=i.getRadius(),r=e.getRadius();n===void 0&&r!==void 0?i.destroy():n!==void 0&&r===void 0?e.destroy():n!==void 0&&r!==void 0&&(n>=r?xr(i,n,e,r,t,s):xr(e,r,i,n,t,s))}const kr=i=>{i.collisionMaxSpeed===void 0&&(i.collisionMaxSpeed=C(i.options.collisions.maxSpeed)),i.velocity.length>i.collisionMaxSpeed&&(i.velocity.length=i.collisionMaxSpeed)};function aa(i,e){$o($s(i),$s(e)),kr(i),kr(e)}function qg(i,e){!i.unbreakable&&!e.unbreakable&&aa(i,e),i.getRadius()===void 0&&e.getRadius()!==void 0?i.destroy():i.getRadius()!==void 0&&e.getRadius()===void 0?e.destroy():i.getRadius()!==void 0&&e.getRadius()!==void 0&&(i.getRadius()>=e.getRadius()?e:i).destroy()}function Vg(i,e,t,s){switch(i.options.collisions.mode){case Et.absorb:{Bg(i,e,t,s);break}case Et.bounce:{aa(i,e);break}case Et.destroy:{qg(i,e);break}}}const Hg=2;class Wg extends on{constructor(e){super(e)}clear(){}init(){}interact(e,t){if(e.destroyed||e.spawning)return;const s=this.container,n=e.getPosition(),r=e.getRadius(),o=s.particles.quadTree.queryCircle(n,r*Hg);for(const a of o){if(e===a||!a.options.collisions.enable||e.options.collisions.mode!==a.options.collisions.mode||a.destroyed||a.spawning)continue;const c=a.getPosition(),l=a.getRadius();if(Math.abs(Math.round(n.z)-Math.round(c.z))>r+l)continue;const u=ce(n,c),h=r+l;u>h||Vg(e,a,t,s.retina.pixelRatio)}}isEnabled(e){return e.options.collisions.enable}reset(){}}async function Gg(i,e=!0){i.checkVersion("3.8.1"),await i.addInteractor("particlesCollisions",t=>Promise.resolve(new Wg(t)),e)}const gs=2;class Kg extends Q{constructor(e,t,s,n){super(e,t,s),this.canvasSize=n,this.canvasSize={...n}}contains(e){const{width:t,height:s}=this.canvasSize,{x:n,y:r}=e;return super.contains(e)||super.contains({x:n-t,y:r})||super.contains({x:n-t,y:r-s})||super.contains({x:n,y:r-s})}intersects(e){if(super.intersects(e))return!0;const t=e,s=e,n={x:e.position.x-this.canvasSize.width,y:e.position.y-this.canvasSize.height};if(s.radius!==void 0){const r=new Q(n.x,n.y,s.radius*gs);return super.intersects(r)}else if(t.size!==void 0){const r=new xe(n.x,n.y,t.size.width*gs,t.size.height*gs);return super.intersects(r)}return!1}}class Jg{constructor(){this.blur=5,this.color=new Y,this.color.value="#000",this.enable=!1}load(e){x(e)||(e.blur!==void 0&&(this.blur=e.blur),this.color=Y.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable))}}class Qg{constructor(){this.enable=!1,this.frequency=1}load(e){x(e)||(e.color!==void 0&&(this.color=Y.create(this.color,e.color)),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity))}}class Yg{constructor(){this.blink=!1,this.color=new Y,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new Jg,this.triangles=new Qg,this.width=1,this.warp=!1}load(e){x(e)||(e.id!==void 0&&(this.id=e.id),e.blink!==void 0&&(this.blink=e.blink),this.color=Y.create(this.color,e.color),e.consent!==void 0&&(this.consent=e.consent),e.distance!==void 0&&(this.distance=e.distance),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity),this.shadow.load(e.shadow),this.triangles.load(e.triangles),e.width!==void 0&&(this.width=e.width),e.warp!==void 0&&(this.warp=e.warp))}}const Sr=2,Xg=1,mi={x:0,y:0},Zg=0;function em(i,e,t,s,n){const{dx:r,dy:o,distance:a}=te(i,e);if(!n||a<=t)return a;const c={x:Math.abs(r),y:Math.abs(o)},l={x:Math.min(c.x,s.width-c.x),y:Math.min(c.y,s.height-c.y)};return Math.sqrt(l.x**Sr+l.y**Sr)}class tm extends on{constructor(e,t){super(e),this._setColor=s=>{if(!s.options.links)return;const n=this._linkContainer,r=s.options.links;let o=r.id===void 0?n.particles.linksColor:n.particles.linksColors.get(r.id);if(o)return;const a=r.color;o=Ho(this._engine,a,r.blink,r.consent),r.id===void 0?n.particles.linksColor=o:n.particles.linksColors.set(r.id,o)},this._linkContainer=e,this._engine=t}clear(){}init(){this._linkContainer.particles.linksColor=void 0,this._linkContainer.particles.linksColors=new Map}interact(e){if(!e.options.links)return;e.links=[];const t=e.getPosition(),s=this.container,n=s.canvas.size;if(t.x<mi.x||t.y<mi.y||t.x>n.width||t.y>n.height)return;const r=e.options.links,o=r.opacity,a=e.retina.linksDistance??Zg,c=r.warp;let l;c?l=new Kg(t.x,t.y,a,n):l=new Q(t.x,t.y,a);const u=s.particles.quadTree.query(l);for(const h of u){const d=h.options.links;if(e===h||!(d!=null&&d.enable)||r.id!==d.id||h.spawning||h.destroyed||!h.links||e.links.some(m=>m.destination===h)||h.links.some(m=>m.destination===e))continue;const f=h.getPosition();if(f.x<mi.x||f.y<mi.y||f.x>n.width||f.y>n.height)continue;const p=em(t,f,a,n,c&&d.warp);if(p>a)continue;const y=(Xg-p/a)*o;this._setColor(e),e.links.push({destination:h,opacity:y})}}isEnabled(e){var t;return!!((t=e.options.links)!=null&&t.enable)}loadParticlesOptions(e,...t){e.links||(e.links=new Yg);for(const s of t)e.links.load(s==null?void 0:s.links)}reset(){}}async function im(i,e=!0){await i.addInteractor("particlesLinks",async t=>Promise.resolve(new tm(t,i)),e)}function sm(i,e,t,s){i.beginPath(),i.moveTo(e.x,e.y),i.lineTo(t.x,t.y),i.lineTo(s.x,s.y),i.closePath()}function nm(i){let e=!1;const{begin:t,end:s,engine:n,maxDistance:r,context:o,canvasSize:a,width:c,backgroundMask:l,colorLine:u,opacity:h,links:d}=i;if(ce(t,s)<=r)Jt(o,t,s),e=!0;else if(d.warp){let p,y;const m={x:s.x-a.width,y:s.y},_=te(t,m);if(_.distance<=r){const w=t.y-_.dy/_.dx*t.x;p={x:0,y:w},y={x:a.width,y:w}}else{const w={x:s.x,y:s.y-a.height},v=te(t,w);if(v.distance<=r){const k=-(t.y-v.dy/v.dx*t.x)/(v.dy/v.dx);p={x:k,y:0},y={x:k,y:a.height}}else{const b={x:s.x-a.width,y:s.y-a.height},k=te(t,b);if(k.distance<=r){const S=t.y-k.dy/k.dx*t.x;p={x:-S/(k.dy/k.dx),y:S},y={x:p.x+a.width,y:p.y+a.height}}}}p&&y&&(Jt(o,t,p),Jt(o,s,y),e=!0)}if(!e)return;o.lineWidth=c,l.enable&&(o.globalCompositeOperation=l.composite),o.strokeStyle=Ie(u,h);const{shadow:f}=d;if(f.enable){const p=we(n,f.color);p&&(o.shadowBlur=f.blur,o.shadowColor=Ie(p))}o.stroke()}function rm(i){const{context:e,pos1:t,pos2:s,pos3:n,backgroundMask:r,colorTriangle:o,opacityTriangle:a}=i;sm(e,t,s,n),r.enable&&(e.globalCompositeOperation=r.composite),e.fillStyle=Ie(o,a),e.fill()}function om(i){return i.sort((e,t)=>e-t),i.join("_")}function Pr(i,e){const t=om(i.map(n=>n.id));let s=e.get(t);return s===void 0&&(s=M(),e.set(t,s)),s}const Cr=0,ms=0,Or=0,am=.5,cm=1;class lm{constructor(e,t){this._drawLinkLine=(s,n)=>{const r=s.options.links;if(!(r!=null&&r.enable))return;const o=this._container,a=o.actualOptions,c=n.destination,l=s.getPosition(),u=c.getPosition();let h=n.opacity;o.canvas.draw(d=>{var w;let f;const p=(w=s.options.twinkle)==null?void 0:w.lines;if(p!=null&&p.enable){const v=p.frequency,b=we(this._engine,p.color);M()<v&&b&&(f=b,h=C(p.opacity))}if(!f){const v=r.id!==void 0?o.particles.linksColors.get(r.id):o.particles.linksColor;f=Ns(s,c,v)}if(!f)return;const y=s.retina.linksWidth??ms,m=s.retina.linksDistance??Or,{backgroundMask:_}=a;nm({context:d,width:y,begin:l,end:u,engine:this._engine,maxDistance:m,canvasSize:o.canvas.size,links:r,backgroundMask:_,colorLine:f,opacity:h})})},this._drawLinkTriangle=(s,n,r)=>{const o=s.options.links;if(!(o!=null&&o.enable))return;const a=o.triangles;if(!a.enable)return;const c=this._container,l=c.actualOptions,u=n.destination,h=r.destination,d=a.opacity??(n.opacity+r.opacity)*am;d<=Cr||c.canvas.draw(f=>{const p=s.getPosition(),y=u.getPosition(),m=h.getPosition(),_=s.retina.linksDistance??Or;if(ce(p,y)>_||ce(m,y)>_||ce(m,p)>_)return;let w=we(this._engine,a.color);if(!w){const v=o.id!==void 0?c.particles.linksColors.get(o.id):c.particles.linksColor;w=Ns(s,u,v)}w&&rm({context:f,pos1:p,pos2:y,pos3:m,backgroundMask:l.backgroundMask,colorTriangle:w,opacityTriangle:d})})},this._drawTriangles=(s,n,r,o)=>{var l,u,h;const a=r.destination;if(!((l=s.links)!=null&&l.triangles.enable&&((u=a.options.links)!=null&&u.triangles.enable)))return;const c=(h=a.links)==null?void 0:h.filter(d=>{const f=this._getLinkFrequency(a,d.destination);return a.options.links&&f<=a.options.links.frequency&&o.findIndex(y=>y.destination===d.destination)>=0});if(c!=null&&c.length)for(const d of c){const f=d.destination;this._getTriangleFrequency(n,a,f)>s.links.triangles.frequency||this._drawLinkTriangle(n,r,d)}},this._getLinkFrequency=(s,n)=>Pr([s,n],this._freqs.links),this._getTriangleFrequency=(s,n,r)=>Pr([s,n,r],this._freqs.triangles),this._container=e,this._engine=t,this._freqs={links:new Map,triangles:new Map}}drawParticle(e,t){const{links:s,options:n}=t;if(!(s!=null&&s.length))return;const r=s.filter(o=>n.links&&(n.links.frequency>=cm||this._getLinkFrequency(t,o.destination)<=n.links.frequency));for(const o of r)this._drawTriangles(n,t,o,r),o.opacity>Cr&&(t.retina.linksWidth??ms)>ms&&this._drawLinkLine(t,o)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map,await Promise.resolve()}particleCreated(e){if(e.links=[],!e.options.links)return;const t=this._container.retina.pixelRatio,{retina:s}=e,{distance:n,width:r}=e.options.links;s.linksDistance=n*t,s.linksWidth=r*t}particleDestroyed(e){e.links=[]}}class um{constructor(e){this.id="links",this._engine=e}getPlugin(e){return Promise.resolve(new lm(e,this._engine))}loadOptions(){}needsPlugin(){return!0}}async function hm(i,e=!0){const t=new um(i);await i.addPlugin(t,e)}async function dm(i,e=!0){i.checkVersion("3.8.1"),await im(i,e),await hm(i,e)}const fm=180,yi={x:0,y:0},pm=2;function gm(i,e,t){const{context:s}=i,n=t.count.numerator*t.count.denominator,r=t.count.numerator/t.count.denominator,o=fm*(r-pm)/r,a=Math.PI-Ue(o);if(s){s.beginPath(),s.translate(e.x,e.y),s.moveTo(yi.x,yi.y);for(let c=0;c<n;c++)s.lineTo(t.length,yi.y),s.translate(t.length,yi.y),s.rotate(a)}}const mm=5;class ca{draw(e){const{particle:t,radius:s}=e,n=this.getCenter(t,s),r=this.getSidesData(t,s);gm(e,n,r)}getSidesCount(e){const t=e.shapeData;return Math.round(C((t==null?void 0:t.sides)??mm))}}const Er=3.5,Tr=2.66,ym=3;class vm extends ca{constructor(){super(...arguments),this.validTypes=["polygon"]}getCenter(e,t){return{x:-t/(e.sides/Er),y:-t/(Tr/Er)}}getSidesData(e,t){const s=e.sides;return{count:{denominator:1,numerator:s},length:t*Tr/(s/ym)}}}const bm=1.66,wm=3,_m=2;class xm extends ca{constructor(){super(...arguments),this.validTypes=["triangle"]}getCenter(e,t){return{x:-t,y:t/bm}}getSidesCount(){return wm}getSidesData(e,t){const s=t*_m;return{count:{denominator:2,numerator:3},length:s}}}async function km(i,e=!0){i.checkVersion("3.8.1"),await i.addShape(new vm,e)}async function Sm(i,e=!0){i.checkVersion("3.8.1"),await i.addShape(new xm,e)}async function Pm(i,e=!0){i.checkVersion("3.8.1"),await km(i,e),await Sm(i,e)}class Cm{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){x(e)||(e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=R(e.speed)),e.decay!==void 0&&(this.decay=R(e.decay)),e.sync!==void 0&&(this.sync=e.sync))}}class Om extends ut{constructor(){super(),this.animation=new Cm,this.direction=ye.clockwise,this.path=!1,this.value=0}load(e){x(e)||(super.load(e),e.direction!==void 0&&(this.direction=e.direction),this.animation.load(e.animation),e.path!==void 0&&(this.path=e.path))}}const la=2,Em=Math.PI*la,Tm=1,Rm=360;class Im{constructor(e){this.container=e}init(e){const t=e.options.rotate;if(!t)return;e.rotate={enable:t.animation.enable,value:Ue(C(t.value)),min:0,max:Em},e.pathRotation=t.path;let s=t.direction;switch(s===ye.random&&(s=Math.floor(M()*la)>0?ye.counterClockwise:ye.clockwise),s){case ye.counterClockwise:case"counterClockwise":e.rotate.status=N.decreasing;break;case ye.clockwise:e.rotate.status=N.increasing;break}const n=t.animation;n.enable&&(e.rotate.decay=Tm-C(n.decay),e.rotate.velocity=C(n.speed)/Rm*this.container.retina.reduceFactor,n.sync||(e.rotate.velocity*=M())),e.rotation=e.rotate.value}isEnabled(e){const t=e.options.rotate;return t?!e.destroyed&&!e.spawning&&(!!t.value||t.animation.enable||t.path):!1}loadOptions(e,...t){e.rotate||(e.rotate=new Om);for(const s of t)e.rotate.load(s==null?void 0:s.rotate)}update(e,t){this.isEnabled(e)&&(e.isRotating=!!e.rotate,e.rotate&&(tn(e,e.rotate,!1,ot.none,t),e.rotation=e.rotate.value))}}async function Am(i,e=!0){i.checkVersion("3.8.1"),await i.addParticleUpdater("rotate",t=>Promise.resolve(new Im(t)),e)}const jm=2,Mm=Math.sqrt(jm),Dm=2;function zm(i){const{context:e,radius:t}=i,s=t/Mm,n=s*Dm;e.rect(-s,-s,n,n)}const Lm=4;class $m{constructor(){this.validTypes=["edge","square"]}draw(e){zm(e)}getSidesCount(){return Lm}}async function Um(i,e=!0){i.checkVersion("3.8.1"),await i.addShape(new $m,e)}const Nm=2,wt={x:0,y:0};function Fm(i){const{context:e,particle:t,radius:s}=i,n=t.sides,r=t.starInset??Nm;e.moveTo(wt.x,wt.y-s);for(let o=0;o<n;o++)e.rotate(Math.PI/n),e.lineTo(wt.x,wt.y-s*r),e.rotate(Math.PI/n),e.lineTo(wt.x,wt.y-s)}const Bm=2,qm=5;class Vm{constructor(){this.validTypes=["star"]}draw(e){Fm(e)}getSidesCount(e){const t=e.shapeData;return Math.round(C((t==null?void 0:t.sides)??qm))}particleInit(e,t){const s=t.shapeData;t.starInset=C((s==null?void 0:s.inset)??Bm)}}async function Hm(i,e=!0){i.checkVersion("3.8.1"),await i.addShape(new Vm,e)}const Wm=1;class Gm{constructor(e,t){this._container=e,this._engine=t}init(e){var o;const t=this._container,s=e.options,n=ve(s.stroke,e.id,s.reduceDuplicates);e.strokeWidth=C(n.width)*t.retina.pixelRatio,e.strokeOpacity=C(n.opacity??Wm),e.strokeAnimation=(o=n.color)==null?void 0:o.animation;const r=Yt(this._engine,n.color)??e.getFillColor();r&&(e.strokeColor=Wo(r,e.strokeAnimation,t.retina.reduceFactor))}isEnabled(e){const t=e.strokeAnimation,{strokeColor:s}=e;return!e.destroyed&&!e.spawning&&!!t&&((s==null?void 0:s.h.value)!==void 0&&s.h.enable||(s==null?void 0:s.s.value)!==void 0&&s.s.enable||(s==null?void 0:s.l.value)!==void 0&&s.l.enable)}update(e,t){this.isEnabled(e)&&Go(e.strokeColor,t)}}async function Km(i,e=!0){i.checkVersion("3.8.1"),await i.addParticleUpdater("strokeColor",t=>Promise.resolve(new Gm(t,i)),e)}async function Jm(i,e=!0){i.checkVersion("3.8.1"),await Dg(i,!1),await Uf(i,!1),await Kf(i,!1),await ip(i,!1),await dp(i,!1),await xp(i,!1),await Pp(i,!1),await Rp(i,!1),await Mp(i,!1),await Hp(i,!1),await Qp(i,!1),await $g(i,!1),await Gg(i,!1),await dm(i,!1),await Tf(i,!1),await Af(i,!1),await xg(i,!1),await jg(i,!1),await Pm(i,!1),await Um(i,!1),await Hm(i,!1),await Tg(i,!1),await Am(i,!1),await Km(i,!1),await Ef(i,e)}const Qm=i=>{const{id:e,className:t,background:s,minSize:n,maxSize:r,speed:o,particleColor:a,particleDensity:c}=i,[l,u]=P.useState(!1);P.useEffect(()=>{jd(async p=>{await Jm(p)}).then(()=>{u(!0)})},[]);const h=ka(),d=async p=>{p&&h.start({opacity:1,transition:{duration:1}})},f=P.useId();return g.jsx(Sa.div,{animate:h,className:z("opacity-0",t),children:l&&g.jsx(Ad,{id:e||f,className:z("h-full w-full"),particlesLoaded:d,options:{background:{color:{value:s||"transparent"}},fullScreen:{enable:!1,zIndex:1},detectRetina:!0,fpsLimit:120,interactivity:{events:{onClick:{enable:!0,mode:"push"},onHover:{enable:!0,mode:"bubble"},resize:{enable:!0}},modes:{bubble:{distance:400,duration:2,opacity:.8,size:2},push:{quantity:2},repulse:{distance:200,duration:.4}}},particles:{color:{value:a||"#ffffff"},move:{direction:"none",enable:!0,outModes:{default:"out"},random:!1,speed:o||2,straight:!1},number:{density:{enable:!0},value:c||160},opacity:{value:{min:.1,max:.8},animation:{enable:!0,speed:2,sync:!1}},shape:{type:"circle"},size:{value:{min:n||1,max:r||3},animation:{enable:!0,speed:3,sync:!1}}}}})})},Rr=P.memo(function(){const{theme:e}=Na();return g.jsx("div",{className:"fixed inset-0 w-full h-full overflow-hidden z-0 pointer-events-none",children:g.jsx(Qm,{id:"sparkles-background",background:"transparent",minSize:.6,maxSize:1.4,particleDensity:333,className:"w-full h-full",particleColor:e==="dark"?"rgba(255, 255, 255, 0.85)":"#6366f1",speed:1})})});function Ym(){const[,i]=qs(),{signIn:e,signUp:t,user:s,loading:n,authEnabled:r}=Qs(),{toast:o}=qr(),[a,c]=P.useState("login"),[l,u]=P.useState(!1),[h,d]=P.useState(!1),[f,p]=P.useState(""),[y,m]=P.useState(""),[_,w]=P.useState(""),[v,b]=P.useState("");P.useEffect(()=>{!n&&s&&i("/app")},[s,n,i]);const k=()=>{p(""),m(""),w(""),b("")},S=async A=>{if(A.preventDefault(),!f||!y){o({title:"Error",description:"Please fill in all required fields.",variant:"destructive"});return}try{u(!0),await e(f,y),o({title:"Welcome back!",description:"You have been signed in successfully."}),i("/app")}catch(W){o({title:"Sign in failed",description:W.message||"An error occurred during sign in.",variant:"destructive"})}finally{u(!1)}},I=async A=>{if(A.preventDefault(),!f||!y||!_){o({title:"Error",description:"Please fill in all required fields.",variant:"destructive"});return}try{u(!0),await t(f,y,_,v),o({title:"Account created!",description:"Please check your email to verify your account."})}catch(W){o({title:"Sign up failed",description:W.message||"An error occurred during sign up.",variant:"destructive"})}finally{u(!1)}},X=A=>{c(A),k()};return n?g.jsx(wi,{text:"Initializing..."}):r?g.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-white dark:bg-black",children:[g.jsx("div",{className:"absolute inset-0",children:g.jsx(Rr,{})}),g.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen px-4 py-8",children:[g.jsxs("div",{className:"mb-12 text-center",children:[g.jsx("h1",{className:"text-6xl md:text-7xl lg:text-8xl font-black tracking-tight text-black dark:text-white",children:"Conquer"}),g.jsx("p",{className:"mt-4 text-lg text-gray-600 dark:text-gray-300",children:"Your AI-powered companion awaits"})]}),g.jsxs(Oi,{className:"w-full max-w-md bg-white/90 dark:bg-black/90 backdrop-blur-md border border-gray-200 dark:border-gray-800 shadow-2xl",children:[g.jsxs(Os,{className:"space-y-1",children:[g.jsx(Es,{className:"text-2xl font-bold text-center text-black dark:text-white",children:a==="login"?"Welcome back":"Create account"}),g.jsx(Ts,{className:"text-center text-gray-600 dark:text-gray-400",children:a==="login"?"Sign in to your KAI account":"Sign up to get started with KAI"})]}),g.jsx(Ei,{children:g.jsxs(nu,{value:a,onValueChange:X,className:"w-full",children:[g.jsxs(Co,{className:"grid w-full grid-cols-2 mb-6",children:[g.jsx(Rs,{value:"login",children:"Sign In"}),g.jsx(Rs,{value:"signup",children:"Sign Up"})]}),g.jsx(Is,{value:"login",className:"space-y-4",children:g.jsxs("form",{onSubmit:S,className:"space-y-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),g.jsx(Ye,{id:"email",type:"email",placeholder:"Enter your email",value:f,onChange:A=>p(A.target.value),required:!0,className:"bg-white dark:bg-black border-gray-300 dark:border-gray-700"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),g.jsxs("div",{className:"relative",children:[g.jsx(Ye,{id:"password",type:h?"text":"password",placeholder:"Enter your password",value:y,onChange:A=>m(A.target.value),required:!0,className:"bg-white dark:bg-black border-gray-300 dark:border-gray-700 pr-10"}),g.jsx(Vt,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>d(!h),children:h?g.jsx(cn,{className:"h-4 w-4 text-gray-400"}):g.jsx(ln,{className:"h-4 w-4 text-gray-400"})})]})]}),g.jsx(Vt,{type:"submit",className:"w-full bg-black dark:bg-white text-white dark:text-black hover:bg-gray-800 dark:hover:bg-gray-200",disabled:l,children:l?g.jsxs(g.Fragment,{children:[g.jsx(ys,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})}),g.jsx(Is,{value:"signup",className:"space-y-4",children:g.jsxs("form",{onSubmit:I,className:"space-y-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"fullName",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Full Name *"}),g.jsx(Ye,{id:"fullName",type:"text",placeholder:"Enter your full name",value:_,onChange:A=>w(A.target.value),required:!0,className:"bg-white dark:bg-black border-gray-300 dark:border-gray-700"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"signupEmail",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email *"}),g.jsx(Ye,{id:"signupEmail",type:"email",placeholder:"Enter your email",value:f,onChange:A=>p(A.target.value),required:!0,className:"bg-white dark:bg-black border-gray-300 dark:border-gray-700"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Phone Number"}),g.jsx(Ye,{id:"phoneNumber",type:"tel",placeholder:"Enter your phone number",value:v,onChange:A=>b(A.target.value),className:"bg-white dark:bg-black border-gray-300 dark:border-gray-700"})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("label",{htmlFor:"signupPassword",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password *"}),g.jsxs("div",{className:"relative",children:[g.jsx(Ye,{id:"signupPassword",type:h?"text":"password",placeholder:"Create a password",value:y,onChange:A=>m(A.target.value),required:!0,className:"bg-white dark:bg-black border-gray-300 dark:border-gray-700 pr-10"}),g.jsx(Vt,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>d(!h),children:h?g.jsx(cn,{className:"h-4 w-4 text-gray-400"}):g.jsx(ln,{className:"h-4 w-4 text-gray-400"})})]})]}),g.jsx(Vt,{type:"submit",className:"w-full bg-black dark:bg-white text-white dark:text-black hover:bg-gray-800 dark:hover:bg-gray-200",disabled:l,children:l?g.jsxs(g.Fragment,{children:[g.jsx(ys,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Create Account"})]})})]})})]})]})]}):g.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-white dark:bg-black",children:[g.jsx("div",{className:"absolute inset-0",children:g.jsx(Rr,{})}),g.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen px-4 py-8",children:g.jsxs(Oi,{className:"w-full max-w-md bg-white/90 dark:bg-black/90 backdrop-blur-md border border-gray-200 dark:border-gray-800 shadow-2xl",children:[g.jsxs(Os,{children:[g.jsx(Es,{className:"text-2xl font-bold text-center text-black dark:text-white",children:"Authentication Required"}),g.jsx(Ts,{className:"text-center text-gray-600 dark:text-gray-400",children:"Supabase authentication is not configured. Please add your Supabase credentials to the .env file."})]}),g.jsx(Ei,{className:"space-y-4",children:g.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[g.jsx("p",{className:"mb-2",children:"To enable authentication, add these to your .env file:"}),g.jsxs("code",{className:"block bg-gray-100 dark:bg-gray-900 p-2 rounded text-xs",children:["VITE_SUPABASE_URL=your-project-url",g.jsx("br",{}),"VITE_SUPABASE_ANON_KEY=your-anon-key"]})]})})]})})]})}function Xm(){return g.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:g.jsx(Oi,{className:"w-full max-w-md mx-4",children:g.jsxs(Ei,{className:"pt-6",children:[g.jsxs("div",{className:"flex mb-4 gap-2",children:[g.jsx(xa,{className:"h-8 w-8 text-red-500"}),g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),g.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const Zm=P.lazy(()=>Ae(()=>import("./Landing-C2bHCQQ-.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),ey=P.lazy(()=>Ae(()=>import("./chat-C7AXKxB3.js"),__vite__mapDeps([10,1,2,9,11,6,4,7,8,12,5]))),ty=P.lazy(()=>Ae(()=>import("./settings-DvOIEeqI.js"),__vite__mapDeps([13,1,2,11,6,4,12,3,14,9,7,8,5]))),iy=P.lazy(()=>Ae(()=>import("./memory-DxDag2RN.js"),__vite__mapDeps([15,1,2,9,11,6,4,3,14,7,8,5]))),Si=()=>g.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:g.jsx("div",{className:"text-gray-100",children:"Loading..."})});function sy(){const{user:i,loading:e,authEnabled:t}=Qs(),[,s]=qs();return P.useEffect(()=>{e||t&&i&&s("/app")},[i,e,t,s]),e?g.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:g.jsx("div",{className:"text-gray-100",children:"Loading..."})}):g.jsx(P.Suspense,{fallback:g.jsx(Si,{}),children:g.jsx(Zm,{})})}function ny(){return g.jsxs(ma,{children:[g.jsx(ft,{path:"/auth",children:g.jsx(Ft,{requireAuth:!1,children:g.jsx(Ym,{})})}),g.jsx(ft,{path:"/",children:g.jsx(sy,{})}),g.jsx(ft,{path:"/app",children:g.jsx(Ft,{requireAuth:!0,children:g.jsx(P.Suspense,{fallback:g.jsx(Si,{}),children:g.jsx(ey,{})})})}),g.jsx(ft,{path:"/settings",children:g.jsx(Ft,{requireAuth:!0,children:g.jsx(P.Suspense,{fallback:g.jsx(Si,{}),children:g.jsx(ty,{})})})}),g.jsx(ft,{path:"/memory",children:g.jsx(Ft,{requireAuth:!0,children:g.jsx(P.Suspense,{fallback:g.jsx(Si,{}),children:g.jsx(iy,{})})})}),g.jsx(ft,{children:g.jsx(Ft,{requireAuth:!0,children:g.jsx(Xm,{})})})]})}function ry(){return g.jsx(va,{client:Oa,children:g.jsx(Ua,{children:g.jsx(tu,{children:g.jsxs(La,{children:[g.jsx(za,{}),g.jsx(ny,{})]})})})})}Br(document.getElementById("root")).render(g.jsx(ry,{}));export{Vt as B,Oi as C,Ye as I,wi as L,Rr as S,nu as T,qr as a,Qs as b,z as c,Co as d,Rs as e,Is as f,Ei as g,Na as u};
